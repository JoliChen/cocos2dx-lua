{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/physics/cannon/shapes/cannon-terrain-shape.ts"],"names":["CANNON_AABB_LOCAL","CANNON","AABB","CANNON_AABB","CANNON_TRANSFORM","Transform","Heightfield","prototype","calculateWorldAABB","pos","quat","min","max","frame","result","Vec3","copy","position","Quat","quaternion","s","elementSize","data","lowerBound","set","minValue","upperBound","length","maxValue","toWorldFrame","CannonTerrainShape","CannonShape","collider","_collider","impl","_shape","setTerrain","v","_terrainID","_uuid","terrain","sizeI","getVertexCountI","sizeJ","getVertexCountJ","i","j","getHeight","options","tileSize","updateProperties","constructor","onComponentSet","onLoad","updateMinValue","updateMaxValue","updateBoundingSphereRadius","update","_index","_body","_setCenter","fromEuler","_orient","lpos","_offset","add"],"mappings":"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"}