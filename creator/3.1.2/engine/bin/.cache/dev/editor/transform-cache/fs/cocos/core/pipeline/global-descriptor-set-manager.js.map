{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/pipeline/global-descriptor-set-manager.ts"],"names":["_samplerLinearInfo","Filter","LINEAR","NONE","Address","CLAMP","_samplerPointInfo","POINT","GlobalDSManager","descriptorSetMap","_descriptorSetMap","linearSampler","_linearSampler","pointSampler","_pointSampler","descriptorSetLayout","_descriptorSetLayout","globalDescriptorSet","_globalDescriptorSet","constructor","pipeline","_device","Map","device","linearSamplerHash","samplerLib","getSampler","pointSamplerHash","layoutInfo","DescriptorSetLayoutInfo","globalDescriptorSetLayout","bindings","createDescriptorSetLayout","createDescriptorSet","DescriptorSetInfo","bindBuffer","binding","buffer","it","values","res","next","done","descriptorSet","value","bindSampler","sampler","bindTexture","texture","update","getOrCreateDescriptorSet","idx","has","set","i","PipelineGlobalBindings","UBO_GLOBAL","COUNT","getBuffer","getTexture","shadowBUO","createBuffer","BufferInfo","BufferUsageBit","UNIFORM","TRANSFER_DST","MemoryUsageBit","HOST","DEVICE","UBOShadow","SIZE","BINDING","get","destroy"],"mappings":"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"}