{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/pipeline/render-instanced-queue.ts"],"names":["RenderInstancedQueue","queue","Set","clear","it","values","res","next","done","value","uploadBuffers","cmdBuff","hasPendingModels","recordCommandBuffer","device","renderPass","instances","pass","bindDescriptorSet","SetIndex","MATERIAL","descriptorSet","lastPSO","b","length","instance","count","shader","ShaderPool","get","hShader","pso","PipelineStateManager","getOrCreatePipelineState","ia","bindPipelineState","LOCAL","DSPool","hDescriptorSet","dynamicOffsets","bindInputAssembler","draw"],"mappings":";;;;;;;AAgCA;;AACA;;AACA;;AAlCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAQA;AACA;AACA;AACA;AACO,MAAMA,oBAAN,CAA2B;AAAA;AAAA,SAKvBC,KALuB,GAKf,IAAIC,GAAJ,EALe;AAAA;;AAO9B;AACJ;AACA;AACA;AACWC,EAAAA,KAAK,GAAI;AACZ,UAAMC,EAAE,GAAG,KAAKH,KAAL,CAAWI,MAAX,EAAX;AAAgC,QAAIC,GAAG,GAAGF,EAAE,CAACG,IAAH,EAAV;;AAChC,WAAO,CAACD,GAAG,CAACE,IAAZ,EAAkB;AACdF,MAAAA,GAAG,CAACG,KAAJ,CAAUN,KAAV;AACAG,MAAAA,GAAG,GAAGF,EAAE,CAACG,IAAH,EAAN;AACH;;AACD,SAAKN,KAAL,CAAWE,KAAX;AACH;;AAEMO,EAAAA,aAAa,CAAEC,OAAF,EAA0B;AAC1C,UAAMP,EAAE,GAAG,KAAKH,KAAL,CAAWI,MAAX,EAAX;AAAgC,QAAIC,GAAG,GAAGF,EAAE,CAACG,IAAH,EAAV;;AAChC,WAAO,CAACD,GAAG,CAACE,IAAZ,EAAkB;AACd,UAAIF,GAAG,CAACG,KAAJ,CAAUG,gBAAd,EAAgCN,GAAG,CAACG,KAAJ,CAAUC,aAAV,CAAwBC,OAAxB;AAChCL,MAAAA,GAAG,GAAGF,EAAE,CAACG,IAAH,EAAN;AACH;AACJ;AAED;AACJ;AACA;AACA;AACA;;;AACWM,EAAAA,mBAAmB,CAAEC,MAAF,EAAkBC,UAAlB,EAA0CJ,OAA1C,EAAkE;AACxF,UAAMP,EAAE,GAAG,KAAKH,KAAL,CAAWI,MAAX,EAAX;AAAgC,QAAIC,GAAG,GAAGF,EAAE,CAACG,IAAH,EAAV;;AAChC,WAAO,CAACD,GAAG,CAACE,IAAZ,EAAkB;AACd,YAAM;AAAEQ,QAAAA,SAAF;AAAaC,QAAAA,IAAb;AAAmBL,QAAAA;AAAnB,UAAwCN,GAAG,CAACG,KAAlD;;AACA,UAAIG,gBAAJ,EAAsB;AAClBD,QAAAA,OAAO,CAACO,iBAAR,CAA0BC,iBAASC,QAAnC,EAA6CH,IAAI,CAACI,aAAlD;AACA,YAAIC,OAA6B,GAAG,IAApC;;AACA,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,SAAS,CAACQ,MAA9B,EAAsC,EAAED,CAAxC,EAA2C;AACvC,gBAAME,QAAQ,GAAGT,SAAS,CAACO,CAAD,CAA1B;;AACA,cAAI,CAACE,QAAQ,CAACC,KAAd,EAAqB;AAAE;AAAW;;AAClC,gBAAMC,MAAM,GAAGC,wBAAWC,GAAX,CAAeJ,QAAQ,CAACK,OAAxB,CAAf;;AACA,gBAAMC,GAAG,GAAGC,2CAAqBC,wBAArB,CAA8CnB,MAA9C,EAAsDG,IAAtD,EAA4DU,MAA5D,EAAoEZ,UAApE,EAAgFU,QAAQ,CAACS,EAAzF,CAAZ;;AACA,cAAIZ,OAAO,KAAKS,GAAhB,EAAqB;AACjBpB,YAAAA,OAAO,CAACwB,iBAAR,CAA0BJ,GAA1B;AACAT,YAAAA,OAAO,GAAGS,GAAV;AACH;;AACDpB,UAAAA,OAAO,CAACO,iBAAR,CAA0BC,iBAASiB,KAAnC,EAA0CC,oBAAOR,GAAP,CAAWJ,QAAQ,CAACa,cAApB,CAA1C,EAA+EhC,GAAG,CAACG,KAAJ,CAAU8B,cAAzF;AACA5B,UAAAA,OAAO,CAAC6B,kBAAR,CAA2Bf,QAAQ,CAACS,EAApC;AACAvB,UAAAA,OAAO,CAAC8B,IAAR,CAAahB,QAAQ,CAACS,EAAtB;AACH;AACJ;;AACD5B,MAAAA,GAAG,GAAGF,EAAE,CAACG,IAAH,EAAN;AACH;AACJ;;AAxD6B"}