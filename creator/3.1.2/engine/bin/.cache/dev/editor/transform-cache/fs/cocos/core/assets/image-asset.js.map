{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/assets/image-asset.ts"],"names":["isImageBitmap","imageSource","legacyCC","sys","capabilities","imageBitmap","ImageBitmap","fetchImageSource","_data","isNativeImage","ALIPAY","XIAOMI","BAIDU","JSB","_compressed","HTMLImageElement","HTMLCanvasElement","ImageAsset","Asset","_nativeAsset","_nativeData","value","HTMLElement","format","_format","reset","data","width","_width","height","_height","isCompressed","PixelFormat","RGB_ETC1","RGBA_ASTC_12x12","RGB_A_PVRTC_2BPPV1","RGBA_ETC1","url","nativeUrl","_texture","tex","_tex","Texture2D","name","image","constructor","nativeAsset","_exportedExts","undefined","RGBA8888","loaded","EDITOR","_onDataComplete","MINIGAME","complete","addEventListener","err","message","destroy","src","_setRawAsset","close","_serialize","TEST","targetExtensions","_native","extensionIndices","targetExtension","extensionFormat","split","i","extnames","indexOf","exportedExtensionID","push","fmt","join","w","h","_deserialize","fmtStr","device","_getGlobalDevice","extensionIDs","defaultExt","preferedExtensionIndex","Number","MAX_VALUE","ext","SupportTextureFormats","macro","SUPPORT_TEXTURE_FORMATS","extensionID","extFormat","parseInt","tmpExt","index","hasFeature","Feature","FORMAT_ASTC","FORMAT_PVRTC","FORMAT_ETC1","RGB_ETC2","RGBA_ETC2","FORMAT_ETC2","webp","emit","initDefault","uuid","_sharedPlaceHolderCanvas","canvas","document","createElement","context","getContext","l","fillStyle","fillRect","validate","override","director","root"],"mappings":"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"}