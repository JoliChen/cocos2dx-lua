{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/animation/animation-manager.ts"],"names":["AnimationManager","ccclass","System","_anims","MutableForwardIterator","_crossFades","_delayEvents","_blendStateBuffer","BlendStateBuffer","_sockets","blendState","addCrossFade","crossFade","index","array","indexOf","push","removeCrossFade","fastRemoveAt","update","dt","crossFadesIter","crossFades","i","length","iterator","anim","isMotionless","apply","stamp","legacyCC","director","getTotalFrames","l","target","transform","matrix","event","fn","thisArg","args","destruct","addAnimation","removeAnimation","pushDelayEvent","addSockets","root","sockets","socket","find","s","targetNode","getChildByPath","path","removeSockets","socketToRemove","j","node","ID","on","Director","EVENT_INIT","animationManager","registerSystem","Scheduler","PRIORITY_SYSTEM"],"mappings":";;;;;;;AA8BA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AAGA;;AACA;;;;;;IASaA,gB,OADZC,c,8BAAD,MACaD,gBADb,SACsCE,eADtC,CAC6C;AAAA;AAAA;AAAA,SAMjCC,MANiC,GAMxB,IAAIC,6BAAJ,CAA2C,EAA3C,CANwB;AAAA,SAOjCC,WAPiC,GAOnB,IAAID,6BAAJ,CAAsC,EAAtC,CAPmB;AAAA,SAQjCE,YARiC,GAYnC,EAZmC;AAAA,SAajCC,iBAbiC,GAaK,IAAIC,2CAAJ,EAbL;AAAA,SAcjCC,QAdiC,GAcP,EAdO;AAAA;;AACpB,MAAVC,UAAU,GAAI;AACrB,WAAO,KAAKH,iBAAZ;AACH;;AAaMI,EAAAA,YAAY,CAAEC,SAAF,EAAwB;AACvC,UAAMC,KAAK,GAAG,KAAKR,WAAL,CAAiBS,KAAjB,CAAuBC,OAAvB,CAA+BH,SAA/B,CAAd;;AACA,QAAIC,KAAK,KAAK,CAAC,CAAf,EAAkB;AACd,WAAKR,WAAL,CAAiBW,IAAjB,CAAsBJ,SAAtB;AACH;AACJ;;AAEMK,EAAAA,eAAe,CAAEL,SAAF,EAAwB;AAC1C,UAAMC,KAAK,GAAG,KAAKR,WAAL,CAAiBS,KAAjB,CAAuBC,OAAvB,CAA+BH,SAA/B,CAAd;;AACA,QAAIC,KAAK,IAAI,CAAb,EAAgB;AACZ,WAAKR,WAAL,CAAiBa,YAAjB,CAA8BL,KAA9B;AACH,KAFD,MAEO;AACH,0BAAQ,IAAR;AACH;AACJ;;AAEMM,EAAAA,MAAM,CAAEC,EAAF,EAAc;AACvB,UAAM;AAAEd,MAAAA,YAAF;AAAgBD,MAAAA,WAAW,EAAEgB,cAA7B;AAA6CZ,MAAAA;AAA7C,QAA0D,IAAhE;AAEA;AAAE;AACE,YAAMa,UAAU,GAAGD,cAAc,CAACP,KAAlC;;AACA,WAAKO,cAAc,CAACE,CAAf,GAAmB,CAAxB,EAA2BF,cAAc,CAACE,CAAf,GAAmBD,UAAU,CAACE,MAAzD,EAAiE,EAAEH,cAAc,CAACE,CAAlF,EAAqF;AACjF,cAAMX,SAAS,GAAGU,UAAU,CAACD,cAAc,CAACE,CAAhB,CAA5B;AACAX,QAAAA,SAAS,CAACO,MAAV,CAAiBC,EAAjB;AACH;AACJ;AAED,UAAMK,QAAQ,GAAG,KAAKtB,MAAtB;AACA,UAAMW,KAAK,GAAGW,QAAQ,CAACX,KAAvB;;AACA,SAAKW,QAAQ,CAACF,CAAT,GAAa,CAAlB,EAAqBE,QAAQ,CAACF,CAAT,GAAaT,KAAK,CAACU,MAAxC,EAAgD,EAAEC,QAAQ,CAACF,CAA3D,EAA8D;AAC1D,YAAMG,IAAI,GAAGZ,KAAK,CAACW,QAAQ,CAACF,CAAV,CAAlB;;AACA,UAAI,CAACG,IAAI,CAACC,YAAV,EAAwB;AACpBD,QAAAA,IAAI,CAACP,MAAL,CAAYC,EAAZ;AACH;AACJ;;AACD,SAAKb,iBAAL,CAAuBqB,KAAvB;;AAEA,UAAMC,KAAK,GAAGC,wBAASC,QAAT,CAAkBC,cAAlB,EAAd;;AACA,SAAK,IAAIT,CAAC,GAAG,CAAR,EAAWU,CAAC,GAAGxB,QAAQ,CAACe,MAA7B,EAAqCD,CAAC,GAAGU,CAAzC,EAA4CV,CAAC,EAA7C,EAAiD;AAC7C,YAAM;AAAEW,QAAAA,MAAF;AAAUC,QAAAA;AAAV,UAAwB1B,QAAQ,CAACc,CAAD,CAAtC;AACAW,MAAAA,MAAM,CAACE,MAAP,GAAgB,4CAAeD,SAAf,EAA0BN,KAA1B,CAAhB;AACH;;AAED,SAAK,IAAIN,CAAC,GAAG,CAAR,EAAWU,CAAC,GAAG3B,YAAY,CAACkB,MAAjC,EAAyCD,CAAC,GAAGU,CAA7C,EAAgDV,CAAC,EAAjD,EAAqD;AACjD,YAAMc,KAAK,GAAG/B,YAAY,CAACiB,CAAD,CAA1B;AACAc,MAAAA,KAAK,CAACC,EAAN,CAASV,KAAT,CAAeS,KAAK,CAACE,OAArB,EAA8BF,KAAK,CAACG,IAApC;AACH;;AACDlC,IAAAA,YAAY,CAACkB,MAAb,GAAsB,CAAtB;AACH;;AAEMiB,EAAAA,QAAQ,GAAI,CAElB;;AAEMC,EAAAA,YAAY,CAAEhB,IAAF,EAAwB;AACvC,UAAMb,KAAK,GAAG,KAAKV,MAAL,CAAYW,KAAZ,CAAkBC,OAAlB,CAA0BW,IAA1B,CAAd;;AACA,QAAIb,KAAK,KAAK,CAAC,CAAf,EAAkB;AACd,WAAKV,MAAL,CAAYa,IAAZ,CAAiBU,IAAjB;AACH;AACJ;;AAEMiB,EAAAA,eAAe,CAAEjB,IAAF,EAAwB;AAC1C,UAAMb,KAAK,GAAG,KAAKV,MAAL,CAAYW,KAAZ,CAAkBC,OAAlB,CAA0BW,IAA1B,CAAd;;AACA,QAAIb,KAAK,IAAI,CAAb,EAAgB;AACZ,WAAKV,MAAL,CAAYe,YAAZ,CAAyBL,KAAzB;AACH,KAFD,MAEO;AACH,0BAAQ,IAAR;AACH;AACJ;;AAEM+B,EAAAA,cAAc,CAAEN,EAAF,EAAgBC,OAAhB,EAA8BC,IAA9B,EAA2C;AAC5D,SAAKlC,YAAL,CAAkBU,IAAlB,CAAuB;AACnBsB,MAAAA,EADmB;AAEnBC,MAAAA,OAFmB;AAGnBC,MAAAA;AAHmB,KAAvB;AAKH;;AAEMK,EAAAA,UAAU,CAAEC,IAAF,EAAcC,OAAd,EAAiC;AAC9C,SAAK,IAAIxB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwB,OAAO,CAACvB,MAA5B,EAAoC,EAAED,CAAtC,EAAyC;AACrC,YAAMyB,MAAM,GAAGD,OAAO,CAACxB,CAAD,CAAtB;;AACA,UAAI,KAAKd,QAAL,CAAcwC,IAAd,CAAoBC,CAAD,IAAOA,CAAC,CAAChB,MAAF,KAAac,MAAM,CAACd,MAA9C,CAAJ,EAA2D;AAAE;AAAW;;AACxE,YAAMiB,UAAU,GAAGL,IAAI,CAACM,cAAL,CAAoBJ,MAAM,CAACK,IAA3B,CAAnB;AACA,YAAMlB,SAAS,GAAGa,MAAM,CAACd,MAAP,IAAiBiB,UAAjB,IAA+B,0CAAaA,UAAb,EAAyBL,IAAzB,CAAjD;;AACA,UAAIX,SAAJ,EAAe;AACX,aAAK1B,QAAL,CAAcO,IAAd,CAAmB;AAAEkB,UAAAA,MAAM,EAAEc,MAAM,CAACd,MAAjB;AAA0BC,UAAAA;AAA1B,SAAnB;AACH;AACJ;AACJ;;AAEMmB,EAAAA,aAAa,CAAER,IAAF,EAAcC,OAAd,EAAiC;AACjD,SAAK,IAAIxB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwB,OAAO,CAACvB,MAA5B,EAAoC,EAAED,CAAtC,EAAyC;AACrC,YAAMgC,cAAc,GAAGR,OAAO,CAACxB,CAAD,CAA9B;;AACA,WAAK,IAAIiC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK/C,QAAL,CAAce,MAAlC,EAA0C,EAAEgC,CAA5C,EAA+C;AAC3C,cAAMR,MAAM,GAAG,KAAKvC,QAAL,CAAc+C,CAAd,CAAf;;AACA,YAAIR,MAAM,CAACd,MAAP,KAAmBqB,cAAc,CAACrB,MAAtC,EAA8C;AAC1C,uDAAgBc,MAAM,CAACb,SAAP,CAAiBsB,IAAjC;AACA,eAAKhD,QAAL,CAAc+C,CAAd,IAAmB,KAAK/C,QAAL,CAAc,KAAKA,QAAL,CAAce,MAAd,GAAuB,CAArC,CAAnB;AACA,eAAKf,QAAL,CAAce,MAAd;AACA;AACH;AACJ;AACJ;AACJ;;AAvHwC,C,UAK3BkC,E,GAAK,W;;;;AAqHvB3B,mBAAS4B,EAAT,CAAYC,mBAASC,UAArB,EAAiC,MAAM;AACnC,QAAMC,gBAAgB,GAAG,IAAI9D,gBAAJ,EAAzB;;AACA+B,qBAASgC,cAAT,CAAwB/D,gBAAgB,CAAC0D,EAAzC,EAA6CI,gBAA7C,EAA+DE,qBAAUC,eAAzE;AACH,CAHD;;AAKAnC,wBAAS9B,gBAAT,GAA4BA,gBAA5B"}