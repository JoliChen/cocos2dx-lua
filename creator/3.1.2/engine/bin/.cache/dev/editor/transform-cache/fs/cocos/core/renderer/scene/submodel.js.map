{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/renderer/scene/submodel.ts"],"names":["_dsInfo","DescriptorSetInfo","MAX_PASS_COUNT","SubModel","_device","_passes","_subMesh","_patches","_handle","NULL_HANDLE","_priority","RenderPriority","DEFAULT","_inputAssembler","_descriptorSet","passes","passLengh","length","_flushPassInfo","DSPool","free","SubModelPool","get","SubModelView","DESCRIPTOR_SET","layout","localSetLayout","dsHandle","alloc","set","subMesh","destroy","initialize","iaInfo","batchingScheme","BatchingSchemes","VB_MERGING","genFlatBuffers","SUB_MESH","handle","priority","val","PRIORITY","inputAssembler","descriptorSet","patches","planarShaderHandle","PLANAR_SHADER","planarInstanceShaderHandle","PLANAR_INSTANCE_SHADER","legacyCC","director","root","device","iaHandle","IAPool","INPUT_ASSEMBLER","initPlanarShadowShader","pipeline","shadowInfo","pipelineSceneData","shadows","shaderHandle","getPlanarShader","initPlanarShadowInstanceShader","getPlanarInstanceShader","update","i","pass","onPipelineStateChanged","beginChangeStatesSilently","tryCompile","endChangeStatesSilently","onMacroPatchesStateChanged","PASS_COUNT","passOffset","PASS_0","shaderOffset","SHADER_0","getShaderVariant"],"mappings":"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"}