{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/animation/animation-curve.ts"],"names":["RatioSampler","constructor","ratios","_findRatio","currRatioDif","lastRatioDif","canOptimize","EPSILON","i","l","length","Math","abs","quickFindIndex","binarySearch","sample","ratio","legacyCC","AnimCurve","Bezier","controlPoints","propertyCurveData","duration","types","undefined","type","_values","_lerp","_duration","_array","values","getCurveType","easingMethod","Array","isArray","Linear","easingMethods","map","fill","index","Object","keys","firstValue","interpolate","selectLerpFx","_arrayLength","hasLerp","valueAt","value","getNoLerp","valueBetween","from","fromRatio","to","toRatio","dRatio","ratioBetweenFrames","computeRatioByType","fromVal","toVal","empty","constant","EventInfo","events","add","func","params","push","sampleAnimationCurve","curve","sampler","easing","start","end","eachLength","floorIndex","makeValueTypeLerpFx","tempValue","lerp","callLerpable","t","dt","makeQuatSlerpFx","Quat","slerp","ValueType","Number"],"mappings":"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"}