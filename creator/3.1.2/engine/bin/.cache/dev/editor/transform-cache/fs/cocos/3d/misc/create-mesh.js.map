{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/3d/misc/create-mesh.ts"],"names":["_defAttrs","Attribute","AttributeName","ATTR_POSITION","Format","RGB32F","ATTR_NORMAL","ATTR_TEX_COORD","RG32F","ATTR_TANGENT","RGBA32F","ATTR_COLOR","v3_1","Vec3","createMesh","geometry","out","options","attributes","stride","channels","vertCount","attr","positions","slice","length","att","name","push","info","FormatInfos","format","Math","max","floor","count","offset","data","attribute","size","normals","uvs","tangents","colors","customAttributes","ca","values","bufferBlob","BufferBlob","vertexBuffer","ArrayBuffer","vertexBufferView","DataView","channel","setNextAlignment","vertexBundle","view","getLength","byteLength","addBuffer","indexBuffer","idxCount","idxStride","indices","indexBufferView","R16UI","primitive","primitiveMode","PrimitiveMode","TRIANGLE_LIST","vertexBundelIndices","indexView","minPosition","minPos","calculateBounds","set","Infinity","iVertex","min","maxPosition","maxPos","meshStruct","vertexBundles","primitives","x","y","z","Mesh","reset","struct","Uint8Array","getCombined"],"mappings":"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"}