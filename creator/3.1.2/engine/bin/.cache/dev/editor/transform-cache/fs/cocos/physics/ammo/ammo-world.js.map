{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/physics/ammo/ammo-world.ts"],"names":["contactsPool","v3_0","CC_V3_0","v3_1","CC_V3_1","AmmoWorld","setAllowSleep","v","setDefaultMaterial","setGravity","gravity","TMP","AmmoConstant","instance","VECTOR3_0","_btWorld","impl","constructor","options","_btBroadphase","_btSolver","_btDispatcher","_btCollisionConfiguration","bodies","ghosts","constraints","triggerArrayMat","ArrayCollisionMatrix","collisionArrayMat","contactsDic","TupleDictionary","oldContactsDic","Ammo","btDefaultCollisionConfiguration","btCollisionDispatcher","btDbvtBroadphase","btSequentialImpulseConstraintSolver","btDiscreteDynamicsWorld","getPairCache","setOverlapFilterCallback","ccOverlapFilterCallback","setValue","closeHitCB","ClosestRayResultCallback","allHitsCB","AllHitsRayResultCallback","setUseCC","destroy","length","step","deltaTime","timeSinceLastCalled","maxSubStep","undefined","stepSimulation","i","syncPhysicsToScene","syncSceneToPhysics","updateDirty","syncSceneToGhost","syncAfterEvents","raycast","worldRay","pool","results","from","m_rayFromWorld","o","computeHit","maxDistance","to","m_rayToWorld","m_collisionFilterGroup","m_collisionFilterMask","mask","m_closestHitFraction","m_shapePart","m_collisionObject","m_shapeParts","clear","m_hitFractions","m_collisionObjects","hp","m_hitPointWorld","hn","m_hitNormalWorld","rayTest","hasHit","n","size","btObj","at","btCs","getCollisionShape","shape","isCompound","shapeIndex","index","getUserIndex","shared","AmmoInstance","bodyAndGhosts","wrappedShapes","wrapped","distance","Vec3","r","add","_assign","collider","push","raycastClosest","result","getSharedBody","node","wrappedBody","AmmoSharedBody","addSharedBody","sharedBody","indexOf","addRigidBody","body","collisionFilterGroup","collisionFilterMask","removeSharedBody","removeRigidBody","addGhostObject","addCollisionObject","ghost","removeGhostObject","removeCollisionObject","addConstraint","constraint","enableCollision","removeConstraint","splice","emitEvents","numManifolds","getNumManifolds","manifold","getManifoldByIndexInternal","body0","getBody0","body1","getBody1","useCharacter","numContacts","getNumContacts","j","manifoldPoint","getContactPoint","s0","getShape0","s1","getShape1","shape0","shape1","com","castObject","btCompoundShape","getChildShape","m_index0","m_index1","needTriggerEvent","needCollisionEvent","item","get","id","set","contacts","dicL","getLength","apply","CollisionEventObject","key","getKeyByIndex","data","getDataByKey","collider0","collider1","isTrigger","TriggerEventObject","type","selfCollider","otherCollider","emit","attachedRigidBody","isSleeping","cq","c","pop","AmmoContactEquation","oldDicL","reset"],"mappings":"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"}