{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/2d/utils/dynamic-atlas/atlas-manager.ts"],"names":["DynamicAtlasManager","_atlases","_atlasIndex","_maxAtlasCount","_textureSize","_maxFrameSize","_textureBleeding","_enabled","enabled","value","reset","legacyCC","director","on","Director","EVENT_BEFORE_SCENE_LAUNCH","beforeSceneLoad","off","maxAtlasCount","atlasCount","length","textureBleeding","enable","textureSize","maxFrameSize","newAtlas","atlas","Atlas","push","insertSpriteFrame","spriteFrame","EDITOR","_original","packable","frame","i","l","destroy","deleteAtlasSpriteFrame","texture","_texture","deleteAtlasTexture","deleteInnerTexture","isEmpty","splice","packToDynamicAtlas","comp","packedFrame","_setDynamicAtlasFrame","instance","dynamicAtlasManager","internal"],"mappings":"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"}