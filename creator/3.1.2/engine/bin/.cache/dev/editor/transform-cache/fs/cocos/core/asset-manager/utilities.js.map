{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/asset-manager/utilities.ts"],"names":["defaultProgressCallback","setDefaultProgressCallback","onProgress","clear","task","clearRef","i","l","input","length","item","isNative","content","Asset","decRef","recycle","urlAppendTimestamp","url","append","test","Date","now","retry","process","times","wait","onComplete","index","err","result","setTimeout","getDepends","uuid","data","exclude","depends","config","info","dependUtil","parse","deps","dep","push","bundle","name","nativeDep","e","message","stack","cache","id","asset","cacheAsset","undefined","legacyCC","assetManager","isDefault","assets","add","setProperties","assetsMap","missingAsset","__depends__","missingAssetReporter","depend","dependAsset","EDITOR","EditorExtends","MissingReporter","object","stashByOwner","owner","prop","serialize","asAsset","type","placeHolder","initDefault","addRef","reference","references","get","reportByOwner","__nativeDepend__","_nativeAsset","console","error","gatherAsset","source","options","__outputAsArray__","output","forEach","array","count","errs","cb","parseParameters","optionsOut","onProgressOut","onCompleteOut","isCallback","Object","create","parseLoadResArgs","typeOut","isValidType","js","isChildClassOf","checkCircleReference","map","checked","getDeps","asyncify","p1","p2","refs","Array","isArray","x"],"mappings":"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"}