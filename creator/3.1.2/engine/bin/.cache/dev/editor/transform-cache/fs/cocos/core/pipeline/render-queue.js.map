{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/pipeline/render-queue.ts"],"names":["opaqueCompareFn","a","b","hash","depth","shaderId","transparentCompareFn","RenderQueue","constructor","desc","queue","_passDesc","_passPool","RecyclePool","subModel","passIdx","CachedArray","sortFunc","clear","reset","insertRenderPass","renderObj","subModelIdx","model","subModels","pass","passes","isTransparent","blendState","targets","blend","phase","phases","priority","rp","add","SubModelPool","get","handle","SubModelView","SHADER_0","push","sort","recordCommandBuffer","device","renderPass","cmdBuff","i","length","array","inputAssembler","hSubModel","shader","ShaderPool","pso","PipelineStateManager","getOrCreatePipelineState","bindPipelineState","bindDescriptorSet","SetIndex","MATERIAL","descriptorSet","LOCAL","bindInputAssembler","draw","convertRenderQueue","j","stages","sortMode","RenderQueueSortMode","BACK_TO_FRONT","FRONT_TO_BACK","renderQueueClearFunc","rq","renderQueueSortFunc"],"mappings":"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"}