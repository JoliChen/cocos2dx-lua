{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/2d/components/rich-text.ts"],"names":["_htmlTextParser","HtmlTextParser","RichTextChildName","RichTextChildImageName","labelPool","Pool","seg","DEV","node","parent","legacyCC","isValid","outline","getComponent","LabelOutline","width","imagePool","createSegment","type","Node","comp","lineCount","styleIndex","imageOffset","clickParam","clickHandler","getSegmentByPool","content","_get","hideFlags","CCObject","Flags","DontSave","HideInHierarchy","Sprite","addComponent","spriteFrame","Type","SLICED","sizeMode","SizeMode","CUSTOM","Label","string","horizontalAlign","HorizontalTextAlignment","LEFT","verticalAlign","VerticalTextAlignment","TOP","setPosition","trans","_uiProps","uiTransformComp","setAnchorPoint","RichText","Font","CacheMode","SpriteAtlas","executeInEditMode","UIComponent","_string","value","_updateRichTextStatus","_horizontalAlign","_layoutDirty","fontSize","_fontSize","fontFamily","_fontFamily","font","_font","EDITOR","_userDefinedFont","useSystemFont","_onTTFLoaded","_isSystemFontUsed","cacheMode","_cacheMode","maxWidth","_maxWidth","lineHeight","_lineHeight","imageAtlas","_imageAtlas","handleTouchEvent","_handleTouchEvent","enabledInHierarchy","_addEventListeners","_removeEventListeners","constructor","_textArray","_segments","_labelSegmentsCache","_linesWidth","_lineCount","_labelWidth","_labelHeight","_lineOffsetX","_updateRichText","onLoad","on","SystemEventType","LAYER_CHANGED","_applyLayer","onEnable","_activateChildren","onDisable","start","EventType","ANCHOR_CHANGED","_updateRichTextPosition","onRestore","onDestroy","removeFromParent","put","off","TOUCH_END","_onTouchEnded","_updateLabelSegmentTextAttributes","forEach","item","_applyTextAttribute","_createFontLabel","str","_createImage","TTFFont","_nativeAsset","assetManager","postLoadNative","err","_measureText","func","s","label","length","push","labelSize","contentSize","event","components","getComponents","Component","_containsTouchLocation","touch","getUILocation","component","call","propagationStopped","point","UITransform","myRect","getBoundingBoxToWorld","contains","_resetState","children","i","child","name","splice","segment","active","_addLabelSegment","stringToken","labelSegment","pop","layer","addChild","_updateRichTextWithMaxWidth","labelString","labelWidth","fragmentWidth","checkStartIndex","checkEndIndex","_getFirstWordLen","checkString","substr","checkStringWidth","remainingString","_updateLineInfo","fragments","k","splitString","_isLastComponentCR","lastIndexOf","_needsUpdateTextLayout","newTextArray","oldItem","newItem","text","oldStyle","style","newStyle","size","italic","isImage","src","imageAlign","imageHeight","imageWidth","_addRichTextImageElement","richTextElement","spriteFrameName","getSpriteFrame","sprite","spriteRect","rect","clone","scaleFactor","spriteWidth","spriteHeight","height","expectWidth","expectHeight","setContentSize","click","param","parse","slice","lastEmptyLine","undefined","isNewLine","multilineTexts","split","j","BASELINE_RATIO","startIndex","textLen","character","charAt","len","index","nextTokenX","nextLineIndex","totalLineCount","anchorX","anchorY","lineOffsetX","CENTER","RIGHT","pos","position","z","lineHeightSet","lineHeightReal","y","offsets","offsetY","parseFloat","Number","isInteger","offsetX","x","_convertLiteralColorValue","color","colorValue","toUpperCase","Color","colorUse","out","fromHEX","labelSeg","textStyle","isBold","bold","isItalic","isUnderline","underline","labelOutline","isAsset","updateRenderData","assembler","_assembler","HorizontalAlign","VerticalAlign","multiline","serializable","NONE"],"mappings":"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"}