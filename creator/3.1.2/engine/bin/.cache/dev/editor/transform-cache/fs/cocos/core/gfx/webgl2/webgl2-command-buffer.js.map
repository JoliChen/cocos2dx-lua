{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/gfx/webgl2/webgl2-command-buffer.ts"],"names":["WebGL2CommandBuffer","CommandBuffer","cmdPackage","WebGL2CmdPackage","_webGLAllocator","_isInRenderPass","_curGPUPipelineState","_curGPUDescriptorSets","_curGPUInputAssembler","_curDynamicOffsets","Array","fill","_curDynamicStates","DynamicStates","_isStateInvalied","initialize","info","_type","type","_queue","queue","_device","cmdAllocator","setCount","bindingMappingInfo","bufferOffsets","length","i","push","destroy","clearCmds","begin","renderPass","subpass","frameBuffer","_numDrawCalls","_numInstances","_numTris","end","bindStates","beginRenderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","cmd","beginRenderPassCmdPool","alloc","WebGL2CmdBeginRenderPass","gpuRenderPass","gpuFramebuffer","beginRenderPassCmds","cmds","WebGL2Cmd","BEGIN_RENDER_PASS","endRenderPass","bindPipelineState","pipelineState","gpuPipelineState","bindDescriptorSet","set","descriptorSet","dynamicOffsets","gpuDescriptorSets","gpuDescriptorSet","gpuPipelineLayout","offsets","idx","dynamicOffsetOffsets","bindInputAssembler","inputAssembler","gpuInputAssembler","setViewport","viewport","cache","left","top","width","height","minDepth","maxDepth","setScissor","scissor","x","y","setLineWidth","lineWidth","setDepthBias","depthBiasConstantFactor","depthBiasClamp","depthBiasSlopeFactor","depthBiasConstant","depthBiasSlope","setBlendConstants","blendConstants","blendConstant","z","w","copy","setDepthBound","minDepthBounds","maxDepthBounds","depthMinBounds","depthMaxBounds","setStencilWriteMask","face","writeMask","front","stencilStatesFront","back","stencilStatesBack","StencilFace","FRONT","BACK","setStencilCompareMask","reference","compareMask","draw","CommandBufferType","PRIMARY","SECONDARY","drawCmdPool","WebGL2CmdDraw","drawInfo","vertexCount","firstVertex","indexCount","firstIndex","vertexOffset","instanceCount","firstInstance","drawCmds","DRAW","glPrimitive","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","updateBufferCmdPool","WebGL2CmdUpdateBuffer","buffSize","buff","usage","BufferUsageBit","INDIRECT","undefined","byteLength","offset","updateBufferCmds","UPDATE_BUFFER","copyBuffersToTexture","buffers","texture","regions","gpuTexture","copyBufferToTextureCmdPool","WebGL2CmdCopyBufferToTexture","copyBufferToTextureCmds","COPY_BUFFER_TO_TEXTURE","execute","cmdBuffs","count","webGL2CmdBuff","c","array","refCount","bindStatesCmds","concat","pipelineBarrier","globalBarrier","textureBarriers","webGLDevice","bindStatesCmd","bindStatesCmdPool","WebGL2CmdBindStates","prototype","apply","dynamicStates","BIND_STATES"],"mappings":"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"}