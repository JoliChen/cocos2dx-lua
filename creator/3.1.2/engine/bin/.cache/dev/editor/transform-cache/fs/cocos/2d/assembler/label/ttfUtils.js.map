{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/2d/assembler/label/ttfUtils.ts"],"names":["Overflow","Label","MAX_SIZE","_BASELINE_OFFSET","_invisibleAlpha","toFixed","_context","_canvas","_texture","_fontDesc","_string","_fontSize","_drawFontsize","_splitStrings","_canvasSize","Size","_lineHeight","_hAlign","_vAlign","_color","Color","_alpha","_fontFamily","_overflow","NONE","_isWrapText","_outlineComp","_outlineColor","BLACK","clone","_shadowComp","_shadowColor","_canvasPadding","Rect","_contentSizeExtend","ZERO","_nodeContentSize","_startPosition","Vec2","_drawUnderlinePos","_drawUnderlineWidth","_underlineThickness","_isBold","_isItalic","_isUnderline","Alignment","ttfUtils","getAssemblerData","sharedLabelData","_canvasPool","get","resetAssemblerData","assemblerData","put","updateRenderData","comp","renderData","vertDirty","trans","node","_uiProps","uiTransformComp","_updateFontFamily","_updateProperties","_calculateLabelFont","_updateLabelDimensions","_resetDynamicAtlas","_updateTexture","updateOpacity","_setCacheAlpha","_calDynamicAtlas","actualFontSize","setContentSize","updateVertexData","updateUvs","markForUpdateRenderData","vData","colorOffset","colorA","opacity","i","useSystemFont","font","_nativeAsset","assetManager","postLoadNative","err","isValid","fontFamily","context","canvas","spriteFrame","string","toString","fontSize","overflow","width","height","underlineHeight","lineHeight","horizontalAlign","verticalAlign","color","isBold","isItalic","isUnderline","RESIZE_HEIGHT","enableWrapText","LabelOutline","getComponent","enabled","set","LabelShadow","_updatePaddingRect","top","bottom","left","right","outlineWidth","shadowWidth","blur","offsetX","offset","x","offsetY","y","Math","max","tan","_calculateFillTextStartPosition","labelX","HorizontalTextAlignment","RIGHT","CENTER","_getLineHeight","drawStartY","length","firstLinelabelY","BASELINE_RATIO","VerticalTextAlignment","TOP","blank","BOTTOM","clearRect","lineJoin","_srcBlendFactor","BlendFactor","SRC_ALPHA","fillStyle","r","g","b","fillRect","drawTextPosX","drawTextPosY","_drawTextEffect","strokeText","fillText","shadowColor","tex","SpriteFrame","texture","uploadAgain","reset","mipmapLevel","uploadData","rect","_calculateUV","legacyCC","director","root","batcher2D","_releaseDescriptorSetCache","getHash","cacheMode","CacheMode","BITMAP","frame","ttfSpriteFrame","dynamicAtlasManager","deleteAtlasSpriteFrame","_resetDynamicAtlasFrame","packToDynamicAtlas","uvDirty","_setupOutline","strokeStyle","a","lineWidth","_setupShadow","shadowBlur","shadowOffsetX","shadowOffsetY","startPosition","isMultiple","measureText","_measureText","min","recreate","textAlign","textBaseline","_getFontDesc","fontDesc","nodeSpacingY","_calculateParagraphLength","paragraphedStrings","ctx","paragraphLength","para","push","_calculateShrinkFont","totalHeight","maxLength","canvasWidthNoMargin","canvasHeightNoMargin","textFragment","mid","allWidth","scaleX","scaleY","_calculateWrapText","concat","split","canvasSizeX","canvasSizeY","paraLength","rawWidth","parseFloat","rawHeight","SHRINK","CLAMP"],"mappings":"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"}