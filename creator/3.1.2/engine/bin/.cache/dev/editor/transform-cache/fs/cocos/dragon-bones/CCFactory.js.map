{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/dragon-bones/CCFactory.ts"],"names":["CCFactory","BaseFactory","getInstance","_factory","constructor","id","uuid","_slots","eventManager","CCArmatureDisplay","_dragonBones","DragonBones","EDITOR","director","getScheduler","game","on","Game","EVENT_RESTART","initUpdate","dt","Scheduler","enableForTarget","scheduleUpdate","PRIORITY_SYSTEM","update","advanceTime","getDragonBonesDataByRawData","rawData","dataParser","ArrayBuffer","_binaryParser","_dataParser","parseDragonBonesData","buildArmatureDisplay","armatureName","dragonBonesName","skinName","textureAtlasName","armature","buildArmature","_display","createArmatureNode","comp","node","Node","display","getComponent","addComponent","name","_armatureName","_dragonAsset","dragonAsset","_dragonAtlasAsset","dragonAtlasAsset","_init","_buildTextureAtlasData","textureAtlasData","textureAtlas","renderTexture","BaseObject","borrowObject","CCTextureAtlasData","_sortSlots","slots","sortedSlots","i","l","length","slot","zOrder","_zOrder","inserted","j","splice","_buildArmature","dataPackage","Armature","_skinData","skin","_animation","Animation","_armature","animations","_isChildArmature","init","_buildSlot","slotData","displays","CCSlot","getDragonBonesDataByUUID","_dragonBonesDataMap","indexOf","removeDragonBonesDataByUUID","disposeData","undefined","bufferObject"],"mappings":"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"}