{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/3d/skinned-mesh-renderer/skinned-mesh-batch-renderer.ts"],"names":["repeat","n","Math","floor","batch_id","Attribute","AttributeName","ATTR_BATCH_ID","Format","R32F","batch_uv","ATTR_BATCH_UV","RG32F","batch_extras_size","FormatInfos","format","size","SkinnedMeshUnit","Mesh","Skeleton","Material","SkinnedMeshRenderer","offset","Vec2","copy","_offset","_size","copyFrom","comp","mesh","skeleton","material","getMaterial","skinningRoot","node","_localTransform","serializable","Mat4","editable","m4_local","m4_1","v3_1","Vec3","SkinnedMeshBatchRenderer","CCString","executeInEditMode","_textures","_batchMaterial","val","onLoad","cook","onDestroy","tex","destroy","_mesh","_onMaterialModified","idx","cookMaterials","getMaterialInstance","cookSkeletons","cookMeshes","mat","effectAsset","console","warn","resizeAtlases","tech","techniques","technique","i","passes","length","pass","properties","prop","type","Type","SAMPLER1D","batchableTextureNames","find","createTexture","cookTextures","units","some","u","getProperty","setProperty","value","unit","push","slice","_skinningRoot","joints","bindposes","partial","invert","path","findIndex","p","EDITOR","multiply","equals","name","IDENTITY","idxMap","Array","from","keys","sort","a","b","map","_","arr","_skeleton","isValid","destroyRenderingMesh","posOffset","posFormat","UNKNOWN","normalOffset","normalFormat","tangentOffset","tangentFormat","uvOffset","uvFormat","jointOffset","jointFormat","jointIndexMap","unitLen","j","ref","data","newMesh","_createUnitMesh","dataView","DataView","buffer","inverseTranspose","struct","vertexBundles","bundle","view","attributes","attr","ATTR_POSITION","pos","stride","fromArray","transformMat4","toArray","ATTR_NORMAL","normal","transformMat4Normal","ATTR_TANGENT","tangent","cur","ATTR_JOINTS","merge","_onMeshChanged","_updateModels","target","passIdx","texImages","texImageRegions","texBuffers","texBufferRegions","image","region","BufferTextureCopy","texOffset","x","atlasSize","y","texExtent","width","height","ArrayBuffer","isView","gfxTex","getGFXTexture","device","legacyCC","director","root","copyBuffersToTexture","copyTexImagesToTexture","Texture2D","setFilters","Filter","LINEAR","setMipFilter","NEAREST","reset","PixelFormat","RGBA8888","loaded","unitIdx","newMeshStruct","JSON","parse","stringify","modifiedBundles","primitives","primitive","bundleIdx","vertexBundelIndices","ATTR_TEX_COORD","undefined","newBundle","count","totalLength","pm","indexView","newMeshData","Uint8Array","oldMeshData","newDataView","oldDataView","isLittleEndian","sys","oldBundle","uvs","oldView","newView","oldStride","newStride","oldOffset","newOffset","srcVertex","subarray","set","setFloat32","k","oldPrimitive","newPrimitive","srcIndices","override"],"mappings":";;;;;;;AA6BA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;AAEA,MAAMA,MAAM,GAAIC,CAAD,IAAeA,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWF,CAAX,CAAlC;;AACA,MAAMG,QAAmB,GAAG,IAAIC,iBAAJ,CAAcC,sBAAcC,aAA5B,EAA2CC,eAAOC,IAAlD,CAA5B;AACA,MAAMC,QAAmB,GAAG,IAAIL,iBAAJ,CAAcC,sBAAcK,aAA5B,EAA2CH,eAAOI,KAAlD,CAA5B;AACA,MAAMC,iBAAiB,GAAGC,oBAAYV,QAAQ,CAACW,MAArB,EAA6BC,IAA7B,GAAoCF,oBAAYJ,QAAQ,CAACK,MAArB,EAA6BC,IAA3F;IAGaC,e,WADZ,oBAAQ,oBAAR,C,UAMI,iBAAKC,UAAL,C,UAOA,iBAAKC,kBAAL,C,UAOA,iBAAKC,kBAAL,C,UA0CA,iBAAKC,wCAAL,C,oCA9DL,MACaJ,eADb,CAC6B;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AA+BzB;AACJ;AACA;AACA;AAEc,MAANK,MAAM,CAAEA,MAAF,EAAU;AAChBC,iBAAKC,IAAL,CAAU,KAAKC,OAAf,EAAwBH,MAAxB;AACH;;AAES,MAANA,MAAM,GAAI;AACV,WAAO,KAAKG,OAAZ;AACH;AAED;AACJ;AACA;AACA;;;AAEY,MAAJT,IAAI,CAAEA,IAAF,EAAQ;AACZO,iBAAKC,IAAL,CAAU,KAAKE,KAAf,EAAsBV,IAAtB;AACH;;AAEO,MAAJA,IAAI,GAAI;AACR,WAAO,KAAKU,KAAZ;AACH;AAED;AACJ;AACA;AACA;;;AAEgB,MAARC,QAAQ,CAAEC,IAAF,EAAoC;AAC5C,QAAI,CAACA,IAAL,EAAW;AAAE;AAAS;;AACtB,SAAKC,IAAL,GAAYD,IAAI,CAACC,IAAjB;AACA,SAAKC,QAAL,GAAgBF,IAAI,CAACE,QAArB;AACA,SAAKC,QAAL,GAAgBH,IAAI,CAACI,WAAL,CAAiB,CAAjB,CAAhB;;AACA,QAAIJ,IAAI,CAACK,YAAT,EAAuB;AAAE,sDAA2BL,IAAI,CAACM,IAAhC,EAAsCN,IAAI,CAACK,YAA3C,EAAyD,KAAKE,eAA9D;AAAiF;AAC7G;;AAEW,MAARR,QAAQ,GAAI;AACZ,WAAO,IAAP;AACH;;AAxEwB,C;;;;;WAME,I;;;;;;;WAOQ,I;;;;;;;WAOA,I;;oFAElCS,mB;;;;;WACwB,IAAIC,YAAJ,E;;4EAExBD,mB;;;;;WACiB,IAAIb,YAAJ,CAAS,CAAT,EAAY,CAAZ,C;;0EAEjBa,mB;;;;;WACe,IAAIb,YAAJ,CAAS,CAAT,EAAY,CAAZ,C;;4DAMfe,e,2IAaAA,e;;AA2BL,MAAMC,QAAQ,GAAG,IAAIF,YAAJ,EAAjB;AACA,MAAMG,IAAI,GAAG,IAAIH,YAAJ,EAAb;AACA,MAAMI,IAAI,GAAG,IAAIC,YAAJ,EAAb;AAEA;AACA;AACA;AACA;;IAMaC,wB,YALZ,oBAAQ,6BAAR,C,UACA,iBAAK,kCAAL,C,UACA,2BAAe,GAAf,C,UAEA,iBAAK,+BAAL,C,WAOI,oBAAQ,wCAAR,C,WAUA,iBAAK,CAACC,mBAAD,CAAL,C,WAEA,oBAAQ,qDAAR,C,WAOA,iBAAK,CAAC3B,eAAD,CAAL,C,WAEA,oBAAQ,mCAAR,C,WAQA,oBAAQ,KAAR,C,WAUA,oBAAQ,KAAR,C,sDA/CJ4B,wB,iDAHD,MAKaF,wBALb,SAK8CtB,wCAL9C,CAKkE;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,SA8BtDyB,SA9BsD,GA8Bf,EA9Be;AAAA,SAgCtDC,cAhCsD,GAgCpB,IAhCoB;AAAA;;AAoCtD,MAAJlB,IAAI,GAAI;AACR,WAAO,MAAMA,IAAb;AACH;;AAEO,MAAJA,IAAI,CAAEmB,GAAF,EAAO;AACX,UAAMnB,IAAN,GAAamB,GAAb;AACH;;AAIW,MAARlB,QAAQ,GAAI;AACZ,WAAO,MAAMA,QAAb;AACH;;AAEW,MAARA,QAAQ,CAAEkB,GAAF,EAAO;AACf,UAAMlB,QAAN,GAAiBkB,GAAjB;AACH;;AAEMC,EAAAA,MAAM,GAAI;AACb,UAAMA,MAAN;AACA,SAAKC,IAAL;AACH;;AAEMC,EAAAA,SAAS,GAAI;AAChB,SAAK,MAAMC,GAAX,IAAkB,KAAKN,SAAvB,EAAkC;AAC9B,WAAKA,SAAL,CAAeM,GAAf,EAAoBC,OAApB;AACH;;AACD,SAAKP,SAAL,GAAiB,EAAjB;;AACA,QAAI,KAAKQ,KAAT,EAAgB;AACZ,WAAKA,KAAL,CAAWD,OAAX;;AACA,WAAKC,KAAL,GAAa,IAAb;AACH;;AACD,UAAMH,SAAN;AACH;;AAEMI,EAAAA,mBAAmB,CAAEC,GAAF,EAAezB,QAAf,EAA0C;AAChE,SAAK0B,aAAL;;AACA,UAAMF,mBAAN,CAA0BC,GAA1B,EAA+B,KAAKE,mBAAL,CAAyBF,GAAzB,CAA/B;AACH;;AAEMN,EAAAA,IAAI,GAAI;AACX,SAAKO,aAAL;AACA,SAAKE,aAAL;AACA,SAAKC,UAAL;AACH;;AAEMH,EAAAA,aAAa,GAAI;AACpB,QAAI,CAAC,KAAKV,cAAV,EAA0B;AACtB,WAAKA,cAAL,GAAsB,KAAKf,WAAL,CAAiB,CAAjB,CAAtB;AACH;;AACD,UAAM6B,GAAG,GAAG,KAAKH,mBAAL,CAAyB,CAAzB,CAAZ;;AACA,QAAI,CAACG,GAAD,IAAQ,CAAC,KAAKd,cAAd,IAAgC,CAAC,KAAKA,cAAL,CAAoBe,WAAzD,EAAsE;AAClEC,MAAAA,OAAO,CAACC,IAAR,CAAa,4BAAb;AAA4C;AAC/C;;AACDH,IAAAA,GAAG,CAACrC,IAAJ,CAAS,KAAKuB,cAAd;AAA+B,SAAKkB,aAAL;AAC/B,UAAMC,IAAI,GAAGL,GAAG,CAACC,WAAJ,CAAiBK,UAAjB,CAA4BN,GAAG,CAACO,SAAhC,CAAb;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,IAAI,CAACI,MAAL,CAAYC,MAAhC,EAAwCF,CAAC,EAAzC,EAA6C;AACzC,YAAMG,IAAI,GAAGN,IAAI,CAACI,MAAL,CAAYD,CAAZ,CAAb;;AACA,UAAI,CAACG,IAAI,CAACC,UAAV,EAAsB;AAAE;AAAW;;AACnC,WAAK,MAAMC,IAAX,IAAmBF,IAAI,CAACC,UAAxB,EAAoC;AAChC,YAAID,IAAI,CAACC,UAAL,CAAgBC,IAAhB,EAAsBC,IAAtB,IAA8BC,aAAKC,SAAvC,EAAkD;AAAE;AAChD,cAAIzB,GAAqB,GAAG,IAA5B;;AACA,cAAI,KAAK0B,qBAAL,CAA2BC,IAA3B,CAAiC9E,CAAD,IAAOA,CAAC,KAAKyE,IAA7C,CAAJ,EAAwD;AACpDtB,YAAAA,GAAG,GAAG,KAAKN,SAAL,CAAe4B,IAAf,CAAN;;AACA,gBAAI,CAACtB,GAAL,EAAU;AAAEA,cAAAA,GAAG,GAAG,KAAK4B,aAAL,CAAmBN,IAAnB,CAAN;AAAiC;;AAC7C,iBAAKO,YAAL,CAAkB7B,GAAlB,EAAuBsB,IAAvB,EAA6BL,CAA7B;AACH,WAJD,MAIO;AACH,iBAAKa,KAAL,CAAWC,IAAX,CAAiBC,CAAD,IAAOhC,GAAG,GAAGgC,CAAC,CAACrD,QAAF,IAAcqD,CAAC,CAACrD,QAAF,CAAWsD,WAAX,CAAuBX,IAAvB,EAA6BL,CAA7B,CAA3C;AACH;;AACD,cAAIjB,GAAJ,EAAS;AAAES,YAAAA,GAAG,CAACyB,WAAJ,CAAgBZ,IAAhB,EAAsBtB,GAAtB,EAA2BiB,CAA3B;AAAgC;AAC9C,SAVD,MAUO;AAAE;AACL,gBAAMkB,KAAY,GAAG,EAArB;;AACA,eAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKF,KAAL,CAAWX,MAA/B,EAAuCa,CAAC,EAAxC,EAA4C;AACxC,kBAAMI,IAAI,GAAG,KAAKN,KAAL,CAAWE,CAAX,CAAb;;AACA,gBAAI,CAACI,IAAI,CAACzD,QAAV,EAAoB;AAAE;AAAW;;AACjCwD,YAAAA,KAAK,CAACE,IAAN,CAAWD,IAAI,CAACzD,QAAL,CAAcsD,WAAd,CAA0BX,IAAI,CAACgB,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAA1B,EAA6CrB,CAA7C,CAAX;AACH;;AACDR,UAAAA,GAAG,CAACyB,WAAJ,CAAgBZ,IAAhB,EAAsBa,KAAtB,EAA6BlB,CAA7B;AACH;AACJ;AACJ;AACJ;;AAEMV,EAAAA,aAAa,GAAI;AACpB,QAAI,CAAC,KAAKgC,aAAV,EAAyB;AAAE5B,MAAAA,OAAO,CAACC,IAAR,CAAa,6BAAb;AAA6C;AAAS,KAD7D,CAEpB;;;AACA,UAAM4B,MAAgB,GAAG,EAAzB;AACA,UAAMC,SAAiB,GAAG,EAA1B;;AACA,SAAK,IAAIT,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKF,KAAL,CAAWX,MAA/B,EAAuCa,CAAC,EAAxC,EAA4C;AACxC,YAAMI,IAAI,GAAG,KAAKN,KAAL,CAAWE,CAAX,CAAb;;AACA,UAAI,CAACI,IAAD,IAAS,CAACA,IAAI,CAAC1D,QAAnB,EAA6B;AAAE;AAAW;;AAC1C,YAAMgE,OAAO,GAAGN,IAAI,CAAC1D,QAArB;;AACAO,mBAAK0D,MAAL,CAAYxD,QAAZ,EAAsBiD,IAAI,CAACrD,eAA3B;;AACA,WAAK,IAAIkC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyB,OAAO,CAACF,MAAR,CAAerB,MAAnC,EAA2CF,CAAC,EAA5C,EAAgD;AAC5C,cAAM2B,IAAI,GAAGF,OAAO,CAACF,MAAR,CAAevB,CAAf,CAAb;AACA,cAAMb,GAAG,GAAGoC,MAAM,CAACK,SAAP,CAAkBC,CAAD,IAAOA,CAAC,KAAKF,IAA9B,CAAZ;;AACA,YAAIxC,GAAG,IAAI,CAAX,EAAc;AACV,cAAI2C,6BAAJ,EAAY;AAAE;AACV9D,yBAAK+D,QAAL,CAAc5D,IAAd,EAAoBsD,OAAO,CAACD,SAAR,CAAkBxB,CAAlB,CAApB,EAA0C9B,QAA1C;;AACA,gBAAI,CAACC,IAAI,CAAC6D,MAAL,CAAYR,SAAS,CAACrC,GAAD,CAArB,CAAL,EAAkC;AAC9BO,cAAAA,OAAO,CAACC,IAAR,CAAc,GAAE,KAAK9B,IAAL,CAAUoE,IAAK,8BAA6BV,MAAM,CAACpC,GAAD,CAAM,YAAW4B,CAAE,yBAArF;AACH;AACJ;;AACD;AACH;;AACDQ,QAAAA,MAAM,CAACH,IAAP,CAAYO,IAAZ,EAZ4C,CAa5C;;AACAH,QAAAA,SAAS,CAACJ,IAAV,CAAepD,aAAK+D,QAAL,CAAc,IAAI/D,YAAJ,EAAd,EAA0ByD,OAAO,CAACD,SAAR,CAAkBxB,CAAlB,KAAwBhC,aAAKkE,QAAvD,EAAiEhE,QAAjE,CAAf;AACH;AACJ,KA1BmB,CA2BpB;;;AACA,UAAMiE,MAAM,GAAGC,KAAK,CAACC,IAAN,CAAWD,KAAK,CAACb,MAAM,CAACrB,MAAR,CAAL,CAAqBoC,IAArB,EAAX,EAAwCC,IAAxC,CAA6C,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAClE,UAAIlB,MAAM,CAACiB,CAAD,CAAN,GAAYjB,MAAM,CAACkB,CAAD,CAAtB,EAA2B;AAAE,eAAO,CAAP;AAAW;;AACxC,UAAIlB,MAAM,CAACiB,CAAD,CAAN,GAAYjB,MAAM,CAACkB,CAAD,CAAtB,EAA2B;AAAE,eAAO,CAAC,CAAR;AAAY;;AACzC,aAAO,CAAP;AACH,KAJc,CAAf;AAKA,UAAMhF,QAAQ,GAAG,IAAIX,kBAAJ,EAAjB;AACAW,IAAAA,QAAQ,CAAC8D,MAAT,GAAkBA,MAAM,CAACmB,GAAP,CAAW,CAACC,CAAD,EAAIxD,GAAJ,EAASyD,GAAT,KAAiBA,GAAG,CAACT,MAAM,CAAChD,GAAD,CAAP,CAA/B,CAAlB;AACA1B,IAAAA,QAAQ,CAAC+D,SAAT,GAAqBA,SAAS,CAACkB,GAAV,CAAc,CAACC,CAAD,EAAIxD,GAAJ,EAASyD,GAAT,KAAiBA,GAAG,CAACT,MAAM,CAAChD,GAAD,CAAP,CAAlC,CAArB,CAnCoB,CAoCpB;;AACA,QAAI,KAAK0D,SAAT,EAAoB;AAAE,WAAKA,SAAL,CAAe7D,OAAf;AAA2B;;AACjD,SAAKvB,QAAL,GAAgBA,QAAhB;AACH;;AAEM8B,EAAAA,UAAU,GAAI;AACjB,QAAIuD,OAAO,GAAG,KAAd;;AACA,SAAK,IAAI/B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKF,KAAL,CAAWX,MAA/B,EAAuCa,CAAC,EAAxC,EAA4C;AACxC,YAAMI,IAAI,GAAG,KAAKN,KAAL,CAAWE,CAAX,CAAb;;AACA,UAAII,IAAI,CAAC3D,IAAT,EAAe;AACXsF,QAAAA,OAAO,GAAG,IAAV;AACA;AACH;AACJ;;AAED,QAAI,CAACA,OAAD,IAAY,CAAC,KAAKxB,aAAtB,EAAqC;AACjC;AACH;;AAED,QAAI,KAAKrC,KAAT,EAAgB;AACZ,WAAKA,KAAL,CAAW8D,oBAAX;AACH,KAFD,MAEO;AACH,WAAK9D,KAAL,GAAa,IAAIpC,UAAJ,EAAb;AACH;;AAED,QAAImG,SAAS,GAAG,CAAhB;AACA,QAAIC,SAAS,GAAG9G,eAAO+G,OAAvB;AACA,QAAIC,YAAY,GAAG,CAAnB;AACA,QAAIC,YAAY,GAAGjH,eAAO+G,OAA1B;AACA,QAAIG,aAAa,GAAG,CAApB;AACA,QAAIC,aAAa,GAAGnH,eAAO+G,OAA3B;AACA,QAAIK,QAAQ,GAAG,CAAf;AACA,QAAIC,QAAQ,GAAGrH,eAAO+G,OAAtB;AACA,QAAIO,WAAW,GAAG,CAAlB;AACA,QAAIC,WAAW,GAAGvH,eAAO+G,OAAzB,CA7BiB,CA+BjB;;AACA,UAAMS,aAAyB,GAAG,IAAIvB,KAAJ,CAAU,KAAKvB,KAAL,CAAWX,MAArB,CAAlC;AACA,UAAM0D,OAAO,GAAG,KAAK/C,KAAL,CAAWX,MAA3B;;AACA,SAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4D,OAApB,EAA6B5D,CAAC,EAA9B,EAAkC;AAC9B,YAAMmB,IAAI,GAAG,KAAKN,KAAL,CAAWb,CAAX,CAAb;;AACA,UAAI,CAACmB,IAAD,IAAS,CAACA,IAAI,CAAC1D,QAAnB,EAA6B;AAAE;AAAW;;AAC1CkG,MAAAA,aAAa,CAAC3D,CAAD,CAAb,GAAmBmB,IAAI,CAAC1D,QAAL,CAAc8D,MAAd,CAAqBmB,GAArB,CAA0BmB,CAAD,IAAO,KAAKhB,SAAL,CAAgBtB,MAAhB,CAAuBK,SAAvB,CAAkCkC,GAAD,IAASD,CAAC,KAAKC,GAAhD,CAAhC,CAAnB;AACH;;AAED,SAAK,IAAI9D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4D,OAApB,EAA6B5D,CAAC,EAA9B,EAAkC;AAC9B,YAAMmB,IAAI,GAAG,KAAKN,KAAL,CAAWb,CAAX,CAAb;;AACA,UAAI,CAACmB,IAAD,IAAS,CAACA,IAAI,CAAC3D,IAAf,IAAuB,CAAC2D,IAAI,CAAC3D,IAAL,CAAUuG,IAAtC,EAA4C;AAAE;AAAW;;AACzD,YAAMC,OAAO,GAAG,KAAKC,eAAL,CAAqBjE,CAArB,EAAwBmB,IAAI,CAAC3D,IAA7B,CAAhB;;AACA,YAAM0G,QAAQ,GAAG,IAAIC,QAAJ,CAAaH,OAAO,CAACD,IAAR,CAAaK,MAA1B,CAAjB;;AACApG,mBAAKqG,gBAAL,CAAsBnG,QAAtB,EAAgCiD,IAAI,CAACrD,eAArC;;AACA,YAAM;AAAEb,QAAAA;AAAF,UAAakE,IAAnB;AACA,YAAM;AAAExE,QAAAA;AAAF,UAAWwE,IAAjB;;AACA,WAAK,IAAIsB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuB,OAAO,CAACM,MAAR,CAAeC,aAAf,CAA6BrE,MAAjD,EAAyDuC,CAAC,EAA1D,EAA8D;AAC1D,cAAM+B,MAAM,GAAGR,OAAO,CAACM,MAAR,CAAeC,aAAf,CAA6B9B,CAA7B,CAAf,CAD0D,CAE1D;;AACAO,QAAAA,SAAS,GAAGwB,MAAM,CAACC,IAAP,CAAYxH,MAAxB;AACAgG,QAAAA,SAAS,GAAG9G,eAAO+G,OAAnB;;AACA,aAAK,IAAIV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgC,MAAM,CAACE,UAAP,CAAkBxE,MAAtC,EAA8CsC,CAAC,EAA/C,EAAmD;AAC/C,gBAAMmC,IAAI,GAAGH,MAAM,CAACE,UAAP,CAAkBlC,CAAlB,CAAb;;AACA,cAAImC,IAAI,CAAC1C,IAAL,KAAchG,sBAAc2I,aAAhC,EAA+C;AAC3C3B,YAAAA,SAAS,GAAG0B,IAAI,CAACjI,MAAjB;AACA;AACH;;AACDsG,UAAAA,SAAS,IAAIvG,oBAAYkI,IAAI,CAACjI,MAAjB,EAAyBC,IAAtC;AACH;;AACD,YAAIsG,SAAJ,EAAe;AACX,gBAAM4B,GAAG,GAAG,wBAAWX,QAAX,EAAqBjB,SAArB,EAAgCD,SAAhC,EAA2CwB,MAAM,CAACC,IAAP,CAAYvE,MAAvD,EAA+DsE,MAAM,CAACC,IAAP,CAAYK,MAA3E,CAAZ;;AACA,eAAK,IAAIjB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgB,GAAG,CAAC3E,MAAxB,EAAgC2D,CAAC,IAAI,CAArC,EAAwC;AACpCxF,yBAAK0G,SAAL,CAAe3G,IAAf,EAAqByG,GAArB,EAA0BhB,CAA1B;;AACAxF,yBAAK2G,aAAL,CAAmB5G,IAAnB,EAAyBA,IAAzB,EAA+B+C,IAAI,CAACrD,eAApC;;AACAO,yBAAK4G,OAAL,CAAaJ,GAAb,EAAkBzG,IAAlB,EAAwByF,CAAxB;AACH;;AACD,mCAAYK,QAAZ,EAAsBW,GAAtB,EAA2B5B,SAA3B,EAAsCD,SAAtC,EAAiDwB,MAAM,CAACC,IAAP,CAAYK,MAA7D;AACH;;AACD3B,QAAAA,YAAY,GAAGqB,MAAM,CAACC,IAAP,CAAYxH,MAA3B;AACAmG,QAAAA,YAAY,GAAGjH,eAAO+G,OAAtB;;AACA,aAAK,IAAIV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgC,MAAM,CAACE,UAAP,CAAkBxE,MAAtC,EAA8CsC,CAAC,EAA/C,EAAmD;AAC/C,gBAAMmC,IAAI,GAAGH,MAAM,CAACE,UAAP,CAAkBlC,CAAlB,CAAb;;AACA,cAAImC,IAAI,CAAC1C,IAAL,KAAchG,sBAAciJ,WAAhC,EAA6C;AACzC9B,YAAAA,YAAY,GAAGuB,IAAI,CAACjI,MAApB;AACA;AACH;;AACDyG,UAAAA,YAAY,IAAI1G,oBAAYkI,IAAI,CAACjI,MAAjB,EAAyBC,IAAzC;AACH;;AACD,YAAIyG,YAAJ,EAAkB;AACd,gBAAM+B,MAAM,GAAG,wBAAWjB,QAAX,EAAqBd,YAArB,EAAmCD,YAAnC,EAAiDqB,MAAM,CAACC,IAAP,CAAYvE,MAA7D,EAAqEsE,MAAM,CAACC,IAAP,CAAYK,MAAjF,CAAf;;AACA,eAAK,IAAIjB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsB,MAAM,CAACjF,MAA3B,EAAmC2D,CAAC,IAAI,CAAxC,EAA2C;AACvCxF,yBAAK0G,SAAL,CAAe3G,IAAf,EAAqB+G,MAArB,EAA6BtB,CAA7B;;AACAxF,yBAAK+G,mBAAL,CAAyBhH,IAAzB,EAA+BA,IAA/B,EAAqCF,QAArC;;AACAG,yBAAK4G,OAAL,CAAaE,MAAb,EAAqB/G,IAArB,EAA2ByF,CAA3B;AACH;;AACD,mCAAYK,QAAZ,EAAsBiB,MAAtB,EAA8B/B,YAA9B,EAA4CD,YAA5C,EAA0DqB,MAAM,CAACC,IAAP,CAAYK,MAAtE;AACH;;AACDzB,QAAAA,aAAa,GAAGmB,MAAM,CAACC,IAAP,CAAYxH,MAA5B;AACAqG,QAAAA,aAAa,GAAGnH,eAAO+G,OAAvB;;AACA,aAAK,IAAIV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgC,MAAM,CAACE,UAAP,CAAkBxE,MAAtC,EAA8CsC,CAAC,EAA/C,EAAmD;AAC/C,gBAAMmC,IAAI,GAAGH,MAAM,CAACE,UAAP,CAAkBlC,CAAlB,CAAb;;AACA,cAAImC,IAAI,CAAC1C,IAAL,KAAchG,sBAAcoJ,YAAhC,EAA8C;AAC1C/B,YAAAA,aAAa,GAAGqB,IAAI,CAACjI,MAArB;AACA;AACH;;AACD2G,UAAAA,aAAa,IAAI5G,oBAAYkI,IAAI,CAACjI,MAAjB,EAAyBC,IAA1C;AACH;;AACD,YAAI2G,aAAJ,EAAmB;AACf,gBAAMgC,OAAO,GAAG,wBAAWpB,QAAX,EAAqBZ,aAArB,EAAoCD,aAApC,EAAmDmB,MAAM,CAACC,IAAP,CAAYvE,MAA/D,EAAuEsE,MAAM,CAACC,IAAP,CAAYK,MAAnF,CAAhB;;AACA,eAAK,IAAIjB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyB,OAAO,CAACpF,MAA5B,EAAoC2D,CAAC,IAAI,CAAzC,EAA4C;AACxCxF,yBAAK0G,SAAL,CAAe3G,IAAf,EAAqBkH,OAArB,EAA8BzB,CAA9B;;AACAxF,yBAAK+G,mBAAL,CAAyBhH,IAAzB,EAA+BA,IAA/B,EAAqCF,QAArC;;AACAG,yBAAK4G,OAAL,CAAaK,OAAb,EAAsBlH,IAAtB,EAA4ByF,CAA5B;AACH;;AACD,mCAAYK,QAAZ,EAAsBoB,OAAtB,EAA+BhC,aAA/B,EAA8CD,aAA9C,EAA6DmB,MAAM,CAACC,IAAP,CAAYK,MAAzE;AACH,SA3DyD,CA4D1D;;;AACAvB,QAAAA,QAAQ,GAAGiB,MAAM,CAACC,IAAP,CAAYxH,MAAvB;AACAuG,QAAAA,QAAQ,GAAGrH,eAAO+G,OAAlB;;AACA,aAAK,IAAIV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgC,MAAM,CAACE,UAAP,CAAkBxE,MAAtC,EAA8CsC,CAAC,EAA/C,EAAmD;AAC/C,gBAAMmC,IAAI,GAAGH,MAAM,CAACE,UAAP,CAAkBlC,CAAlB,CAAb;;AACA,cAAImC,IAAI,CAAC1C,IAAL,KAAchG,sBAAcK,aAAhC,EAA+C;AAC3CkH,YAAAA,QAAQ,GAAGmB,IAAI,CAACjI,MAAhB;AACA;AACH;;AACD6G,UAAAA,QAAQ,IAAI9G,oBAAYkI,IAAI,CAACjI,MAAjB,EAAyBC,IAArC;AACH;;AACD,YAAI6G,QAAJ,EAAc;AACV,iCAAUU,QAAV,EAAoB,CAACqB,GAAD,EAAMpG,GAAN,KAAc;AAC9BoG,YAAAA,GAAG,GAAG5J,MAAM,CAAC4J,GAAD,CAAZ,CAD8B,CACX;;AACnB,kBAAMhI,IAAI,GAAG4B,GAAG,KAAK,CAAR,GAAY,GAAZ,GAAkB,GAA/B;AACA,mBAAOoG,GAAG,GAAG5I,IAAI,CAACY,IAAD,CAAV,GAAmBN,MAAM,CAACM,IAAD,CAAhC;AACH,WAJD,EAIGiG,QAJH,EAIaD,QAJb,EAIuBiB,MAAM,CAACC,IAAP,CAAYvE,MAJnC,EAI2CsE,MAAM,CAACC,IAAP,CAAYK,MAJvD,EAI+DZ,QAJ/D;AAKH,SA7EyD,CA8E1D;;;AACA,cAAM/B,MAAM,GAAGwB,aAAa,CAAC3D,CAAD,CAA5B;;AACA,YAAI,CAACmC,MAAL,EAAa;AAAE;AAAW;;AAC1BsB,QAAAA,WAAW,GAAGe,MAAM,CAACC,IAAP,CAAYxH,MAA1B;AACAyG,QAAAA,WAAW,GAAGvH,eAAO+G,OAArB;;AACA,aAAK,IAAIV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgC,MAAM,CAACE,UAAP,CAAkBxE,MAAtC,EAA8CsC,CAAC,EAA/C,EAAmD;AAC/C,gBAAMmC,IAAI,GAAGH,MAAM,CAACE,UAAP,CAAkBlC,CAAlB,CAAb;;AACA,cAAImC,IAAI,CAAC1C,IAAL,KAAchG,sBAAcuJ,WAAhC,EAA6C;AACzC9B,YAAAA,WAAW,GAAGiB,IAAI,CAACjI,MAAnB;AACA;AACH;;AACD+G,UAAAA,WAAW,IAAIhH,oBAAYkI,IAAI,CAACjI,MAAjB,EAAyBC,IAAxC;AACH;;AACD,YAAI+G,WAAJ,EAAiB;AACb,iCAAUQ,QAAV,EAAqBqB,GAAD,IAASpD,MAAM,CAACoD,GAAD,CAAnC,EAA0C7B,WAA1C,EAAuDD,WAAvD,EAAoEe,MAAM,CAACC,IAAP,CAAYvE,MAAhF,EAAwFsE,MAAM,CAACC,IAAP,CAAYK,MAApG,EAA4GZ,QAA5G;AACH;AACJ;;AACD,WAAKjF,KAAL,CAAWwG,KAAX,CAAiBzB,OAAjB;AACH;;AAED,SAAK0B,cAAL,CAAoB,KAAKzG,KAAzB;;AACA,SAAK0G,aAAL;AACH;;AAES/E,EAAAA,YAAY,CAAEgF,MAAF,EAAqBvF,IAArB,EAAmCwF,OAAnC,EAAoD;AACtE,UAAMC,SAA2B,GAAG,EAApC;AACA,UAAMC,eAAoC,GAAG,EAA7C;AACA,UAAMC,UAA6B,GAAG,EAAtC;AACA,UAAMC,gBAAqC,GAAG,EAA9C;;AACA,SAAK,IAAIlF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKF,KAAL,CAAWX,MAA/B,EAAuCa,CAAC,EAAxC,EAA4C;AACxC,YAAMI,IAAI,GAAG,KAAKN,KAAL,CAAWE,CAAX,CAAb;;AACA,UAAI,CAACI,IAAI,CAACzD,QAAV,EAAoB;AAAE;AAAW;;AACjC,YAAM+D,OAAO,GAAGN,IAAI,CAACzD,QAAL,CAAcsD,WAAd,CAA0BX,IAA1B,EAAgCwF,OAAhC,CAAhB;;AACA,UAAIpE,OAAO,IAAIA,OAAO,CAACyE,KAAnB,IAA4BzE,OAAO,CAACyE,KAAR,CAAcnC,IAA9C,EAAoD;AAChD,cAAMoC,MAAM,GAAG,IAAIC,yBAAJ,EAAf;AACAD,QAAAA,MAAM,CAACE,SAAP,CAAiBC,CAAjB,GAAqBnF,IAAI,CAAClE,MAAL,CAAYqJ,CAAZ,GAAgB,KAAKC,SAA1C;AACAJ,QAAAA,MAAM,CAACE,SAAP,CAAiBG,CAAjB,GAAqBrF,IAAI,CAAClE,MAAL,CAAYuJ,CAAZ,GAAgB,KAAKD,SAA1C;AACAJ,QAAAA,MAAM,CAACM,SAAP,CAAiBC,KAAjB,GAAyBvF,IAAI,CAACxE,IAAL,CAAU2J,CAAV,GAAc,KAAKC,SAA5C;AACAJ,QAAAA,MAAM,CAACM,SAAP,CAAiBE,MAAjB,GAA0BxF,IAAI,CAACxE,IAAL,CAAU6J,CAAV,GAAc,KAAKD,SAA7C;AACA,cAAM;AAAExC,UAAAA;AAAF,YAAWtC,OAAO,CAACyE,KAAzB;;AACA,YAAI,CAACU,WAAW,CAACC,MAAZ,CAAmB9C,IAAnB,CAAL,EAA+B;AAC3B+B,UAAAA,SAAS,CAAC1E,IAAV,CAAe2C,IAAf;AACAgC,UAAAA,eAAe,CAAC3E,IAAhB,CAAqB+E,MAArB;AACH,SAHD,MAGO;AACHH,UAAAA,UAAU,CAAC5E,IAAX,CAAgB2C,IAAhB;AACAkC,UAAAA,gBAAgB,CAAC7E,IAAjB,CAAsB+E,MAAtB;AACH;AACJ;AACJ;;AACD,UAAMW,MAAM,GAAGlB,MAAM,CAACmB,aAAP,EAAf;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAaC,wBAASC,QAAT,CAAkBC,IAArC;;AACA,QAAInB,UAAU,CAAC9F,MAAX,GAAoB,CAAxB,EAA2B;AAAE8G,MAAAA,MAAM,CAACI,oBAAP,CAA4BpB,UAA5B,EAAwCc,MAAxC,EAAgDb,gBAAhD;AAAoE;;AACjG,QAAIH,SAAS,CAAC5F,MAAV,GAAmB,CAAvB,EAA0B;AAAE8G,MAAAA,MAAM,CAACK,sBAAP,CAA8BvB,SAA9B,EAAyCgB,MAAzC,EAAiDf,eAAjD;AAAoE;AACnG;;AAESpF,EAAAA,aAAa,CAAEN,IAAF,EAAgB;AACnC,UAAMtB,GAAG,GAAG,IAAIuI,oBAAJ,EAAZ;AACAvI,IAAAA,GAAG,CAACwI,UAAJ,CAAeC,kBAAOC,MAAtB,EAA8BD,kBAAOC,MAArC;AACA1I,IAAAA,GAAG,CAAC2I,YAAJ,CAAiBF,kBAAOG,OAAxB;AACA5I,IAAAA,GAAG,CAAC6I,KAAJ,CAAU;AACNlB,MAAAA,KAAK,EAAE,KAAKH,SADN;AAENI,MAAAA,MAAM,EAAE,KAAKJ,SAFP;AAGN7J,MAAAA,MAAM,EAAEmL,uBAAYC;AAHd,KAAV;AAKA/I,IAAAA,GAAG,CAACgJ,MAAJ,GAAa,IAAb;AACA,SAAKtJ,SAAL,CAAe4B,IAAf,IAAuBtB,GAAvB;AACA,WAAOA,GAAP;AACH;;AAESa,EAAAA,aAAa,GAAI;AACvB,SAAK,MAAMS,IAAX,IAAmB,KAAK5B,SAAxB,EAAmC;AAC/B,YAAMM,GAAG,GAAG,KAAKN,SAAL,CAAe4B,IAAf,CAAZ;AACAtB,MAAAA,GAAG,CAAC6I,KAAJ,CAAU;AACNlB,QAAAA,KAAK,EAAE,KAAKH,SADN;AAENI,QAAAA,MAAM,EAAE,KAAKJ,SAFP;AAGN7J,QAAAA,MAAM,EAAEmL,uBAAYC;AAHd,OAAV;AAKH;AACJ;;AAEO7D,EAAAA,eAAe,CAAE+D,OAAF,EAAmBxK,IAAnB,EAA+B;AAClD;AACA;AACA,UAAMyK,aAA2B,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe5K,IAAI,CAAC8G,MAApB,CAAX,CAApC;AACA,UAAM+D,eAAiD,GAAG,EAA1D;;AACA,SAAK,IAAIxG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrE,IAAI,CAAC8G,MAAL,CAAYgE,UAAZ,CAAuBpI,MAA3C,EAAmD2B,CAAC,EAApD,EAAwD;AACpD,YAAM0G,SAAS,GAAG/K,IAAI,CAAC8G,MAAL,CAAYgE,UAAZ,CAAuBzG,CAAvB,CAAlB;AACA,UAAI0B,QAAQ,GAAG,CAAf;AACA,UAAIC,QAAQ,GAAGrH,eAAO+G,OAAtB;AACA,UAAIsF,SAAS,GAAG,CAAhB;;AACA,aAAOA,SAAS,GAAGD,SAAS,CAACE,mBAAV,CAA8BvI,MAAjD,EAAyDsI,SAAS,EAAlE,EAAsE;AAClE,cAAMhE,MAAM,GAAGhH,IAAI,CAAC8G,MAAL,CAAYC,aAAZ,CAA0BgE,SAAS,CAACE,mBAAV,CAA8BD,SAA9B,CAA1B,CAAf;AACAjF,QAAAA,QAAQ,GAAGiB,MAAM,CAACC,IAAP,CAAYxH,MAAvB;AACAuG,QAAAA,QAAQ,GAAGrH,eAAO+G,OAAlB;;AACA,aAAK,IAAIV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgC,MAAM,CAACE,UAAP,CAAkBxE,MAAtC,EAA8CsC,CAAC,EAA/C,EAAmD;AAC/C,gBAAMmC,IAAI,GAAGH,MAAM,CAACE,UAAP,CAAkBlC,CAAlB,CAAb;;AACA,cAAImC,IAAI,CAAC1C,IAAL,KAAchG,sBAAcyM,cAAhC,EAAgD;AAC5ClF,YAAAA,QAAQ,GAAGmB,IAAI,CAACjI,MAAhB;AACA;AACH;;AACD6G,UAAAA,QAAQ,IAAI9G,oBAAYkI,IAAI,CAACjI,MAAjB,EAAyBC,IAArC;AACH;;AACD,YAAI6G,QAAJ,EAAc;AAAE;AAAQ;AAC3B;;AACD,UAAI6E,eAAe,CAACG,SAAD,CAAf,KAA+BG,SAAnC,EAA8C;AAAE;AAAW;;AAC3DN,MAAAA,eAAe,CAACG,SAAD,CAAf,GAA6B,CAAChF,QAAD,EAAWD,QAAX,CAA7B;AACA,YAAMqF,SAAS,GAAGX,aAAa,CAAC1D,aAAd,CAA4BiE,SAA5B,CAAlB,CArBoD,CAqBM;;AAC1DI,MAAAA,SAAS,CAAClE,UAAV,CAAqBtD,IAArB,CAA0BrF,QAA1B;AACA6M,MAAAA,SAAS,CAAClE,UAAV,CAAqBtD,IAArB,CAA0B/E,QAA1B;AACAuM,MAAAA,SAAS,CAACnE,IAAV,CAAexH,MAAf,GAAwB,CAAxB;AACA2L,MAAAA,SAAS,CAACnE,IAAV,CAAevE,MAAf,IAAyB0I,SAAS,CAACnE,IAAV,CAAeoE,KAAf,GAAuBrM,iBAAhD;AACAoM,MAAAA,SAAS,CAACnE,IAAV,CAAeK,MAAf,IAAyBtI,iBAAzB;AACH;;AACD,QAAIsM,WAAW,GAAG,CAAlB;;AACA,SAAK,IAAIrG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwF,aAAa,CAAC1D,aAAd,CAA4BrE,MAAhD,EAAwDuC,CAAC,EAAzD,EAA6D;AACzDqG,MAAAA,WAAW,IAAIb,aAAa,CAAC1D,aAAd,CAA4B9B,CAA5B,EAA+BgC,IAA/B,CAAoCvE,MAAnD;AACH;;AACD,SAAK,IAAI2B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoG,aAAa,CAACK,UAAd,CAAyBpI,MAA7C,EAAqD2B,CAAC,EAAtD,EAA0D;AACtD,YAAMkH,EAAE,GAAGd,aAAa,CAACK,UAAd,CAAyBzG,CAAzB,CAAX;;AACA,UAAIkH,EAAE,CAACC,SAAP,EAAkB;AACdD,QAAAA,EAAE,CAACC,SAAH,CAAa/L,MAAb,GAAsB6L,WAAtB;AACAA,QAAAA,WAAW,IAAIC,EAAE,CAACC,SAAH,CAAa9I,MAA5B;AACH;AACJ,KA3CiD,CA4ClD;;;AACA,UAAM+I,WAAW,GAAG,IAAIC,UAAJ,CAAeJ,WAAf,CAApB;AACA,UAAMK,WAAW,GAAG3L,IAAI,CAACuG,IAAzB;AACA,UAAMqF,WAAW,GAAG,IAAIjF,QAAJ,CAAa8E,WAAW,CAAC7E,MAAzB,CAApB;AACA,UAAMiF,WAAW,GAAG,IAAIlF,QAAJ,CAAagF,WAAW,CAAC/E,MAAzB,CAApB;AACA,UAAM;AAAEkF,MAAAA;AAAF,QAAqBrC,wBAASsC,GAApC;;AACA,SAAK,MAAM9G,CAAX,IAAgB4F,eAAhB,EAAiC;AAC7B,YAAMO,SAAS,GAAGX,aAAa,CAAC1D,aAAd,CAA4B9B,CAA5B,CAAlB;AACA,YAAM+G,SAAS,GAAGhM,IAAI,CAAC8G,MAAL,CAAYC,aAAZ,CAA0B9B,CAA1B,CAAlB;AACA,YAAM,CAACe,QAAD,EAAWD,QAAX,IAAuB8E,eAAe,CAAC5F,CAAD,CAA5C;AACA,YAAMgH,GAAG,GAAG,wBAAWJ,WAAX,EAAwB7F,QAAxB,EAAkCD,QAAlC,EAA4CiG,SAAS,CAAC/E,IAAV,CAAevE,MAA3D,EAAmEsJ,SAAS,CAAC/E,IAAV,CAAeK,MAAlF,CAAZ;AACA,YAAM4E,OAAO,GAAGF,SAAS,CAAC/E,IAA1B;AACA,YAAMkF,OAAO,GAAGf,SAAS,CAACnE,IAA1B;AACA,YAAMmF,SAAS,GAAGF,OAAO,CAAC5E,MAA1B;AACA,YAAM+E,SAAS,GAAGF,OAAO,CAAC7E,MAA1B;AACA,UAAIgF,SAAS,GAAGJ,OAAO,CAACzM,MAAxB;AACA,UAAI8M,SAAS,GAAGJ,OAAO,CAAC1M,MAAxB;;AACA,WAAK,IAAI4G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8F,OAAO,CAACd,KAA5B,EAAmChF,CAAC,EAApC,EAAwC;AACpC,cAAMmG,SAAS,GAAGb,WAAW,CAACc,QAAZ,CAAqBH,SAArB,EAAgCA,SAAS,GAAGF,SAA5C,CAAlB;AACAX,QAAAA,WAAW,CAACiB,GAAZ,CAAgBF,SAAhB,EAA2BD,SAA3B,EAFoC,CAGpC;;AACAX,QAAAA,WAAW,CAACe,UAAZ,CAAuBJ,SAAS,GAAGH,SAAnC,EAA8C5B,OAA9C,EAJoC,CAKpC;;AACAoB,QAAAA,WAAW,CAACe,UAAZ,CAAuBJ,SAAS,GAAGH,SAAZ,GAAwB,CAA/C,EAAkDH,GAAG,CAAC5F,CAAC,GAAG,CAAL,CAArD,EAA8DyF,cAA9D;AACAF,QAAAA,WAAW,CAACe,UAAZ,CAAuBJ,SAAS,GAAGH,SAAZ,GAAwB,CAA/C,EAAkDH,GAAG,CAAC5F,CAAC,GAAG,CAAJ,GAAQ,CAAT,CAArD,EAAkEyF,cAAlE;AACAS,QAAAA,SAAS,IAAIF,SAAb;AACAC,QAAAA,SAAS,IAAIF,SAAb;AACH;AACJ;;AACD,SAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnC,aAAa,CAACK,UAAd,CAAyBpI,MAA7C,EAAqDkK,CAAC,EAAtD,EAA0D;AACtD,YAAMC,YAAY,GAAG7M,IAAI,CAAC8G,MAAL,CAAYgE,UAAZ,CAAuB8B,CAAvB,CAArB;AACA,YAAME,YAAY,GAAGrC,aAAa,CAACK,UAAd,CAAyB8B,CAAzB,CAArB;;AACA,UAAIC,YAAY,CAACrB,SAAb,IAA0BsB,YAAY,CAACtB,SAA3C,EAAsD;AAClD,cAAMY,SAAS,GAAGS,YAAY,CAACrB,SAAb,CAAuBlE,MAAzC;AACA,cAAM+E,SAAS,GAAGS,YAAY,CAACtB,SAAb,CAAuBlE,MAAzC;AACA,YAAIgF,SAAS,GAAGO,YAAY,CAACrB,SAAb,CAAuB/L,MAAvC;AACA,YAAI8M,SAAS,GAAGO,YAAY,CAACtB,SAAb,CAAuB/L,MAAvC;;AACA,aAAK,IAAI4G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyG,YAAY,CAACtB,SAAb,CAAuBH,KAA3C,EAAkDhF,CAAC,EAAnD,EAAuD;AACnD,gBAAM0G,UAAU,GAAGpB,WAAW,CAACc,QAAZ,CAAqBH,SAArB,EAAgCA,SAAS,GAAGF,SAA5C,CAAnB;AACAX,UAAAA,WAAW,CAACiB,GAAZ,CAAgBK,UAAhB,EAA4BR,SAA5B;AACAA,UAAAA,SAAS,IAAIF,SAAb;AACAC,UAAAA,SAAS,IAAIF,SAAb;AACH;AACJ;AACJ;;AACD,UAAM5F,OAAO,GAAG,IAAInH,UAAJ,EAAhB;AACAmH,IAAAA,OAAO,CAAC4D,KAAR,CAAc;AACVtD,MAAAA,MAAM,EAAE2D,aADE;AAEVlE,MAAAA,IAAI,EAAEkF;AAFI,KAAd;AAIA,WAAOjF,OAAP;AACH;;AA7c6D,C,sFAK7DjG,mB;;;;;WAEkB,I;;kGAUlBA,mB;;;;;WAEwC,E;;kFAOxCA,mB;;;;;WAEiC,E;;0DAMjCyM,e,qJAUAA,e"}