{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/2d/framework/renderable-2d.ts"],"names":["BlendFactor","InstanceMaterialType","_matInsInfo","parent","owner","subModelIdx","Renderable2D","UITransform","Material","disallowMultiple","executeInEditMode","RenderableComponent","stencilStage","Stage","DISABLED","_assembler","_postAssembler","_renderData","_renderDataFlag","_renderFlag","_delegateSrc","_instanceMaterialType","ADD_COLOR_AND_TEXTURE","_blendState","BlendState","_blendHash","_colorDirty","_cacheAlpha","_lastParent","sharedMaterials","EDITOR","_materials","slice","val","i","length","setMaterial","splice","customMaterial","_customMaterial","updateMaterial","mat","_updateBuiltinMaterial","_updateBlendFunc","srcBlendFactor","_srcBlendFactor","value","dstBlendFactor","_dstBlendFactor","color","_color","equals","set","clone","node","emit","SystemEventType","COLOR_CHANGED","renderData","delegateSrc","blendHash","updateBlendHash","dst","targets","blendDst","blendSrc","__preload","_uiProps","uiComp","_flushAssembler","onEnable","on","ANCHOR_CHANGED","_nodeStateChange","SIZE_CHANGED","_canRender","onRestore","onDisable","off","onDestroy","destroyRenderData","_materialInstances","destroy","markForUpdateRenderData","enable","vertDirty","requestRenderData","data","RenderData","add","remove","updateAssembler","render","_updateColor","_checkAndUpdateRenderData","_render","postUpdateAssembler","_postRender","updateRenderData","isValid","getMaterial","enabled","activeInHierarchy","enabledInHierarchy","opacity","_postCanRender","_updateWorldAlpha","updateColor","localAlpha","a","localOpacity","alpha","target","BlendTarget","setTarget","blend","blendDstAlpha","ONE_MINUS_SRC_ALPHA","getBlendState","transformType","children","child","renderComp","getComponent","ADD_COLOR","builtinResMgr","get","GRAYSCALE","USE_ALPHA_SEPARATED","USE_ALPHA_SEPARATED_AND_GRAY","_setCacheAlpha","Assembler","PostAssembler","override","serializable","SRC_ALPHA","Color","WHITE","legacyCC","internal"],"mappings":"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"}