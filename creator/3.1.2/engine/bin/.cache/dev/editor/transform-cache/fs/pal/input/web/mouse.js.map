{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/pal/input/web/mouse.ts"],"names":["MouseInputSource","constructor","support","_canvas","_eventTarget","EventTarget","_pointLocked","_isPressed","_preMousePos","Vec2","EDITOR","document","documentElement","onmouseup","undefined","getElementById","TEST","console","warn","_registerEvent","_getCanvasRect","canvas","box","getBoundingClientRect","Rect","x","y","width","height","_getLocation","event","clientX","clientY","window","addEventListener","_createCallback","SystemEventType","MOUSE_DOWN","MOUSE_MOVE","MOUSE_UP","canvasRect","location","wheelSensitivityFactor","inputEvent","type","MOUSE_WHEEL","button","deltaX","deltaY","timestamp","performance","now","movementX","movementY","stopPropagation","preventDefault","emit","_registerPointerLockEvent","lockChangeAlert","pointerLockElement","mozPointerLockElement","eventType","focus","set","target","onDown","cb","on","onMove","onUp","onWheel"],"mappings":"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"}