{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/utils/prefab/utils.ts"],"names":["createNodeWithPrefab","node","prefabInfo","_prefab","prefabInstance","instance","asset","EDITOR","name","undefined","_objFlags","_parent","_id","legacyCC","game","_isCloning","SUPPORT_JIT","_doInstantiate","prefabRoot","data","_iN$t","instantiate","_clone","generateTargetMap","targetMap","isRoot","curTargetMap","fileId","components","i","length","comp","__prefab","children","childNode","getTarget","localID","target","targetIter","applyMountedChildren","mountedChildren","childInfo","targetInfo","nodes","_children","push","editorExtrasTag","mountedRoot","_siblingIndex","_onBatchCreated","applyMountedComponents","mountedComponents","componentsInfo","_components","applyRemovedComponents","removedComponents","index","indexOf","splice","applyPropertyOverrides","propertyOverrides","propOverride","targetPropOwner","propertyPath","slice","targetPropName","pop","propName","Array","isArray","value","Number","parseInt","isInteger","applyTargetOverrides","targetOverrides","targetOverride","source","sourceInfo","sourceInstance","targetInstance"],"mappings":"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"}