{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/pipeline/deferred/postprocess-stage.ts"],"names":["colors","Color","POSTPROCESSPASS_INDEX","PostprocessStage","Material","RenderStage","material","val","_postprocessMaterial","constructor","_renderArea","Rect","_uiPhase","UIPhase","initialize","info","activate","pipeline","flow","destroy","render","camera","_pipeline","device","cmdBuff","commandBuffers","pipelineUBO","updateCameraUBO","vp","viewport","x","width","y","height","pipelineSceneData","shadingScale","framebuffer","window","renderPass","colorTextures","getRenderPass","clearFlag","ClearFlagBit","COLOR","clearColor","z","w","beginRenderPass","clearDepth","clearStencil","bindDescriptorSet","SetIndex","GLOBAL","descriptorSet","pass","shader","builtinPostProcess","builtinResMgr","get","passes","ShaderPool","getShaderVariant","inputAssembler","hasOffScreenAttachments","quadIAOffscreen","quadIAOnscreen","pso","PipelineStateManager","getOrCreatePipelineState","renderObjects","length","bindPipelineState","bindInputAssembler","draw","endRenderPass","initInfo","name","priority","DeferredStagePriority","POSTPROCESS","tag","serializable"],"mappings":"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"}