{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/asset-manager/asset-manager.ts"],"names":["AssetManager","pipeline","append","preprocess","load","fetchPipeline","fetch","transformPipeline","parse","combine","bundles","assets","generalImportBase","generalNativeBase","dependUtil","force","EDITOR","PREVIEW","allowImageBitmap","sys","isMobile","utils","helper","downloader","parser","packManager","cacheAsset","cacheManager","presets","factory","preprocessPipe","fetchPipe","loadPipe","references","_releaseManager","releaseManager","_files","files","_parsed","parsed","_parsePipeline","BUILD","Pipeline","main","get","BuiltinBundleName","MAIN","resources","RESOURCES","init","options","clear","server","bundleVers","remoteBundles","importBase","endsWith","substr","length","nativeBase","getBundle","name","removeBundle","bundle","_destroy","remove","loadAny","requests","onProgress","onComplete","opts","onProg","onComp","preset","Array","isArray","slice","task","Task","create","input","async","preloadAny","postLoadNative","asset","undefined","_native","__nativeDepend__","depend","getNativeDep","_uuid","has","find","b","getAssetInfo","err","native","isValid","_nativeAsset","message","stack","loadRemote","url","reloadAsset","__isNative__","data","ext","p1","p2","loadBundle","nameOrUrl","bundleName","releaseAsset","tryRelease","releaseUnusedAssets","forEach","releaseAll","loadWithJson","json","Error","item","RequestItem","isNative","uuid","assetId","Date","getTime","Math","random","file","Cache","Bundle","legacyCC","assetManager"],"mappings":"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"}