{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/2d/assembler/label/bmfontUtils.ts"],"names":["LetterInfo","char","valid","x","y","line","hash","_tmpRect","Rect","_comp","_uiTrans","_horizontalKerning","_lettersInfo","_linesWidth","_linesOffsetX","_labelDimensions","Size","_lineBreakWithoutSpaces","_contentSize","letterPosition","Vec2","_lineSpacing","_fntConfig","_numberOfLines","_textDesiredHeight","_letterOffsetY","_tailoredTopY","_tailoredBottomY","_bmfontScale","_spriteFrame","_string","_fontSize","_originFontSize","_hAlign","_vAlign","_spacingX","_lineHeight","_overflow","_isWrapText","_labelWidth","_labelHeight","_maxLineWidth","bmfontUtils","updateRenderData","comp","renderData","vertDirty","node","_uiProps","uiTransformComp","_updateFontFamily","_updateProperties","_updateLabelInfo","_updateContent","actualFontSize","setContentSize","uvDirty","markForUpdateRenderData","_resetProperties","_updateFontScale","fontAsset","font","spriteFrame","fntConfig","shareLabelInfo","fontAtlas","fontDefDictionary","dynamicAtlasManager","packToDynamicAtlas","margin","string","toString","fontSize","horizontalAlign","verticalAlign","spacingX","overflow","contentSize","width","height","Overflow","NONE","RESIZE_HEIGHT","enableWrapText","lineHeight","_setupBMFontOverflowMetrics","_computeHorizontalKerningForText","_alignText","stringLen","length","kerningDict","horizontalKerning","prev","i","key","charCodeAt","kerningAmount","_multilineTextWrap","nextTokenFunc","textLen","lineIndex","nextTokenX","nextTokenY","longestLine","letterRight","highestY","lowestY","letterDef","index","character","charAt","push","_getFontScale","_recordPlaceholderInfo","tokenLen","tokenHighestY","tokenLowestY","tokenRight","nextLetterX","newLine","tmp","letterIndex","getLetterDefinitionForChar","console","log","atlasName","letterX","offsetX","w","offsetY","_recordLetterInfo","xAdvance","h","parseFloat","toFixed","_getFirstCharLen","SHRINK","_getFirstWordLen","text","startIndex","len","_multilineTextWrapByWord","_multilineTextWrapByChar","tmpInfo","getLetter","_computeAlignmentOffset","_isVerticalClamp","_shrinkLabelToContentSize","_updateQuads","_isHorizontalClamp","_scaleFontSizeDown","shouldUpdateContent","lambda","left","right","mid","newFontSize","letterClamp","ctr","l","letterInfo","px","wordWidth","_isHorizontalClamped","letterOverClamp","texture","getTexture","dataLength","vertexCount","indicesCount","anchorPoint","appX","appY","ret","warn","u","v","py","clipTop","CLAMP","isRotated","_determineRect","letterPositionX","appendQuad","rect","rotated","scale","originalSize","getOriginalSize","getRect","offset","getOffset","trimmedLeft","trimmedTop","originalX","HorizontalTextAlignment","LEFT","CENTER","RIGHT","VerticalTextAlignment","TOP","blank","BOTTOM","newWidth","newHeight"],"mappings":"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"}