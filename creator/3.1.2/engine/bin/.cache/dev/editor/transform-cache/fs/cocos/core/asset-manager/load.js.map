{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/asset-manager/load.ts"],"names":["load","task","done","firstTask","progress","finish","total","input","length","canInvoke","options","__exclude__","Object","create","output","item","cb","subTask","Task","onProgress","onComplete","err","result","isFinish","legacyCC","assetManager","force","BUILD","message","stack","dispatch","push","recycle","loadOneAssetPipeline","async","Pipeline","fetch","isNative","uuid","file","reloadAsset","assets","has","packManager","data","parse","exclude","id","parser","ext","asset","content","files","remove","parsed","callbacks","addRef","get","__uuid__","loadDepends","config","cacheAsset","depends","repeatItem","onError","prototype","decRef","Array","isArray","map","dependAsset","Asset","_uuid","onLoaded","__onLoadedInvoked__","__nativeDepend__","e","EDITOR","PREVIEW","initDefault","SceneAsset","call","validate","i","l","pipeline"],"mappings":"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"}