{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/physics/cannon/cannon-shared-body.ts"],"names":["v3_0","Vec3","quat_0","Quat","contactsPool","CollisionEventObject","type","selfCollider","otherCollider","contacts","impl","CannonSharedBody","getSharedBody","node","wrappedWorld","wrappedBody","key","uuid","newSB","sharedBodesMap","has","get","g","PhysicsGroup","DEFAULT","m","PhysicsSystem","instance","collisionMatrix","body","collisionFilterGroup","collisionFilterMask","set","rigidBody","_group","enabled","v","index","bodies","length","addSharedBody","syncInitial","isRemove","wrappedShapes","isEnabled","sleep","removeSharedBody","reference","ref","destroy","constructor","wrappedJoints0","wrappedJoints1","onCollidedListener","onCollided","bind","CANNON","Body","sleepSpeedLimit","sleepThreshold","material","defaultMaterial","addEventListener","addShape","indexOf","shapes","push","setIndex","offset","shapeOffsets","orient","shapeOrientations","setOffsetAndOrient","isSleeping","wakeUp","removeShape","addJoint","i","removeJoint","syncSceneToPhysics","hasChangedFlags","copy","position","worldPosition","quaternion","worldRotation","aabbNeedsUpdate","TransformBit","SCALE","syncScale","syncPhysicsToScene","n","b","ERigidBodyType","DYNAMIC","previousPosition","previousQuaternion","setScale","worldScale","updateScale0","updateScale1","removeEventListener","delete","World","idToBodyMap","id","event","self","selfShape","other","otherShape","collider","needCollisionEvent","apply","cq","c","pop","CannonContactEquation","shape","emit","Map"],"mappings":"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"}