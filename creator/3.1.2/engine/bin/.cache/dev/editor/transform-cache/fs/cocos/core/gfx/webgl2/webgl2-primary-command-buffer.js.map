{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/gfx/webgl2/webgl2-primary-command-buffer.ts"],"names":["WebGL2PrimaryCommandBuffer","WebGL2CommandBuffer","beginRenderPass","renderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","_device","gpuRenderPass","gpuFramebuffer","_isInRenderPass","draw","info","_isStateInvalied","bindStates","_numDrawCalls","_numInstances","instanceCount","indexCount","vertexCount","_curGPUPipelineState","glPrimitive","_numTris","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","buffSize","undefined","usage","BufferUsageBit","INDIRECT","byteLength","copyBuffersToTexture","buffers","texture","regions","gpuTexture","execute","cmdBuffs","count","i","webGL2CmdBuff","cmdPackage","_curGPUInputAssembler","_curGPUDescriptorSets","_curDynamicOffsets","_curDynamicStates"],"mappings":"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"}