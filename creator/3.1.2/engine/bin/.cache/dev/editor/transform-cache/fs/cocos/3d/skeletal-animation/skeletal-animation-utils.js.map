{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/3d/skeletal-animation/skeletal-animation-utils.ts"],"names":["uploadJointData","uploadJointDataLBS","MINIMUM_JOINT_TEXTURE_SIZE","EDITOR","selectJointsMediumFormat","device","hasFeature","Feature","TEXTURE_FLOAT","Format","RGBA32F","RGBA8","out","base","mat","firstBone","m00","m01","m02","m12","m04","m05","m06","m13","m08","m09","m10","m14","dq_0","Quat","dq_1","v3_1","Vec3","qt_1","v3_2","uploadJointDataDQS","Mat4","toRTS","copy","dot","multiplyScalar","set","x","y","z","multiply","w","roundUpTextureSize","targetLength","formatSize","formatScale","Math","sqrt","ceil","max","jointTextureSamplerHash","Filter","POINT","NONE","Address","CLAMP","v3_3","v3_4","v3_min","v3_max","m4_1","m4_2","ab_1","AABB","Inf","Number","MAX_SAFE_INTEGER","JointTexturePool","pixelsPerJoint","_pixelsPerJoint","constructor","_device","_pool","_textureBuffers","Map","_formatSize","_customPool","_chunkIdxMap","format","FormatInfos","size","TextureBufferPool","initialize","roundUpFn","clear","destroy","registerCustomTextureLayouts","layouts","i","length","layout","chunkIdx","createChunk","textureLength","j","contents","content","skeleton","k","clips","clip","getDefaultPoseTexture","mesh","skinningRoot","hash","texture","get","bounds","has","refCount","joints","bindposes","textureBuffer","buildTexture","jointCount","bufSize","customChunkIdx","handle","undefined","alloc","Float32Array","BYTES_PER_ELEMENT","pixelOffset","start","skeletonHash","clipHash","readyToBeDeleted","boneSpaceBounds","getBoneSpaceBounds","offset","node","getChildByPath","inverseBindposes","bound","transform","getBoundary","min","IDENTITY","fromPoints","update","buffer","getSequencePoseTexture","clipData","SkelAnimDataHub","getOrExtract","frames","info","animInfos","_createAnimInfos","f","push","curveData","downstream","bindposeIdx","bindposeCorrection","transformValid","boneSpaceBound","center","halfExtents","releaseHandle","free","delete","releaseSkeleton","it","values","res","next","done","value","releaseAnimationClip","animPath","source","data","animNode","correctionPath","idx","lastIndexOf","substring","fromRTS","rotation","position","scale","parent","t","worldMatrix","JointAnimationInfo","getData","nodeID","createBuffer","BufferInfo","BufferUsageBit","UNIFORM","TRANSFER_DST","MemoryUsageBit","HOST","DEVICE","UBOSkinningAnimation","SIZE","dirty","switchClip"],"mappings":"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"}