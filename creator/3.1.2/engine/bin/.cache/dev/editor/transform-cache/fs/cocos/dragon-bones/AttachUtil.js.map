{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/dragon-bones/AttachUtil.ts"],"names":["_tempMat4","Mat4","AttachUtil","constructor","_inited","_armature","_armatureNode","_armatureDisplay","init","armatureDisplay","node","reset","_syncAttachedNode","rootMatrix","worldMatrix","boneInfos","isCached","isAnimationCached","_curFrame","sockets","socketNodes","scale","Vec3","matrixHandle","boneMat","tm","m00","a","m01","b","m04","c","m05","d","m12","tx","m13","ty","_oldScale","clone","set","matrix","multiply","bones","getBones","l","length","sock","boneNode","target","isValid","delete","path","splice","bone","boneIndex","globalTransformMatrix"],"mappings":"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"}