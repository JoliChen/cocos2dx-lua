{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/2d/utils/dynamic-atlas/atlas.ts"],"names":["space","Atlas","constructor","width","height","_texture","_width","_height","_x","_y","_nexty","_innerTextureInfos","_innerSpriteFrames","_count","texture","DynamicAtlasTexture","initWithSize","insertSpriteFrame","spriteFrame","rect","info","getId","sx","x","sy","y","legacyCC","internal","dynamicAtlasManager","textureBleeding","drawTextureAt","image","frame","push","deleteInnerTexture","isEmpty","reset","frames","i","l","length","isValid","_resetDynamicAtlasFrame","destroy","Texture2D","format","PixelFormat","RGBA8888","loaded","emit","gfxTexture","getGFXTexture","gfxDevice","_getGFXDevice","console","warn","region","BufferTextureCopy","texOffset","texExtent","copyTexImagesToTexture","data"],"mappings":"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"}