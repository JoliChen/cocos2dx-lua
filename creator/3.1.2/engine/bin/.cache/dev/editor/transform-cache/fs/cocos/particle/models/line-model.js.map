{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/particle/models/line-model.ts"],"names":["_vertex_attrs","Attribute","AttributeName","ATTR_POSITION","Format","RGB32F","ATTR_TEX_COORD","RGBA32F","ATTR_TEX_COORD1","ATTR_COLOR","RGBA8","_temp_v1","Vec3","_temp_v2","LineModel","scene","Model","constructor","_capacity","_vertSize","_vBuffer","_vertAttrsFloatCount","_vdataF32","_vdataUint32","_iaInfo","_iaInfoBuffer","_subMeshData","_vertCount","_indexCount","_material","type","ModelType","LINE","IndirectBuffer","DrawInfo","_device","createBuffer","BufferInfo","BufferUsageBit","INDIRECT","MemoryUsageBit","HOST","DEVICE","DRAW_INFO_SIZE","setCapacity","capacity","a","offset","FormatInfos","format","size","createSubMeshData","Float32Array","Uint32Array","updateMaterial","mat","setSubModelMaterial","destroySubMeshData","vertexBuffer","VERTEX","TRANSFER_DST","vBuffer","ArrayBuffer","update","indices","Uint16Array","dst","i","baseIdx","indexBuffer","INDEX","BYTES_PER_ELEMENT","drawInfos","vertexCount","indexCount","RenderingSubMesh","PrimitiveMode","TRIANGLE_LIST","initSubModel","addLineVertexData","positions","width","color","length","subtract","x","y","z","evaluate","_val","seg","updateIA","Math","max","count","ia","_subModels","inputAssembler","vertexBuffers","firstIndex","destroy"],"mappings":";;;;;;;AA8BA;;AACA;;AAEA;;AACA;;AAlCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAWA,MAAMA,aAAa,GAAG,CAClB,IAAIC,gBAAJ,CAAcC,qBAAcC,aAA5B,EAA2CC,cAAOC,MAAlD,CADkB,EACyC;AAC3D,IAAIJ,gBAAJ,CAAcC,qBAAcI,cAA5B,EAA4CF,cAAOG,OAAnD,CAFkB,EAE2C;AAC7D,IAAIN,gBAAJ,CAAcC,qBAAcM,eAA5B,EAA6CJ,cAAOC,MAApD,CAHkB,EAG2C;AAC7D,IAAIJ,gBAAJ,CAAcC,qBAAcO,UAA5B,EAAwCL,cAAOM,KAA/C,EAAsD,IAAtD,CAJkB,CAAtB;;AAOA,MAAMC,QAAQ,GAAG,IAAIC,YAAJ,EAAjB;;AACA,MAAMC,QAAQ,GAAG,IAAID,YAAJ,EAAjB;;AAEO,MAAME,SAAN,SAAwBC,cAAMC,KAA9B,CAAoC;AAcvCC,EAAAA,WAAW,GAAI;AACX;AADW,SAbPC,SAaO;AAAA,SAZPC,SAYO,GAZK,CAYL;AAAA,SAXPC,QAWO,GAXwB,IAWxB;AAAA,SAVPC,oBAUO,GAVgB,CAUhB;AAAA,SATPC,SASO,GAT0B,IAS1B;AAAA,SARPC,YAQO,GAR4B,IAQ5B;AAAA,SAPPC,OAOO;AAAA,SANPC,aAMO;AAAA,SALPC,YAKO,GALiC,IAKjC;AAAA,SAJPC,UAIO,GAJM,CAIN;AAAA,SAHPC,WAGO,GAHO,CAGP;AAAA,SAFPC,SAEO,GAFsB,IAEtB;AAEX,SAAKC,IAAL,GAAYf,cAAMgB,SAAN,CAAgBC,IAA5B;AACA,SAAKd,SAAL,GAAiB,GAAjB;AACA,SAAKM,OAAL,GAAe,IAAIS,qBAAJ,CAAmB,CAAC,IAAIC,eAAJ,EAAD,CAAnB,CAAf;AACA,SAAKT,aAAL,GAAqB,KAAKU,OAAL,CAAaC,YAAb,CAA0B,IAAIC,iBAAJ,CAC3CC,sBAAeC,QAD4B,EAE3CC,sBAAeC,IAAf,GAAsBD,sBAAeE,MAFM,EAG3CC,qBAH2C,EAI3CA,qBAJ2C,CAA1B,CAArB;AAMH;;AAEMC,EAAAA,WAAW,CAAEC,QAAF,EAAoB;AAClC,SAAK3B,SAAL,GAAiB2B,QAAjB;AACA,SAAKT,YAAL;AACH;;AAEMA,EAAAA,YAAY,GAAI;AACnB,SAAKjB,SAAL,GAAiB,CAAjB;;AACA,SAAK,MAAM2B,CAAX,IAAgB9C,aAAhB,EAA+B;AAC1B8C,MAAAA,CAAD,CAAWC,MAAX,GAAoB,KAAK5B,SAAzB;AACA,WAAKA,SAAL,IAAkB6B,mBAAYF,CAAC,CAACG,MAAd,EAAsBC,IAAxC;AACH;;AACD,SAAK7B,oBAAL,GAA4B,KAAKF,SAAL,GAAiB,CAA7C,CANmB,CAM6B;;AAChD,SAAKC,QAAL,GAAgB,KAAK+B,iBAAL,EAAhB;AACA,SAAK7B,SAAL,GAAiB,IAAI8B,YAAJ,CAAiB,KAAKhC,QAAtB,CAAjB;AACA,SAAKG,YAAL,GAAoB,IAAI8B,WAAJ,CAAgB,KAAKjC,QAArB,CAApB;AACH;;AAEMkC,EAAAA,cAAc,CAAEC,GAAF,EAAiB;AAClC,SAAK1B,SAAL,GAAiB0B,GAAjB;AACA,UAAMC,mBAAN,CAA0B,CAA1B,EAA6BD,GAA7B;AACH;;AAEOJ,EAAAA,iBAAiB,GAAiB;AACtC,QAAI,KAAKzB,YAAT,EAAuB;AACnB,WAAK+B,kBAAL;AACH;;AACD,SAAK9B,UAAL,GAAkB,CAAlB;AACA,SAAKC,WAAL,GAAmB,CAAnB;;AACA,UAAM8B,YAAY,GAAG,KAAKvB,OAAL,CAAaC,YAAb,CAA0B,IAAIC,iBAAJ,CAC3CC,sBAAeqB,MAAf,GAAwBrB,sBAAesB,YADI,EAE3CpB,sBAAeC,IAAf,GAAsBD,sBAAeE,MAFM,EAG3C,KAAKvB,SAAL,GAAiB,KAAKD,SAAtB,GAAkC,KAAKS,UAHI,EAI3C,KAAKR,SAJsC,CAA1B,CAArB;;AAMA,UAAM0C,OAAoB,GAAG,IAAIC,WAAJ,CAAgB,KAAK3C,SAAL,GAAiB,KAAKD,SAAtB,GAAkC,KAAKS,UAAvD,CAA7B;AACA+B,IAAAA,YAAY,CAACK,MAAb,CAAoBF,OAApB;AAEA,UAAMG,OAAoB,GAAG,IAAIC,WAAJ,CAAgB,CAAC,KAAK/C,SAAL,GAAiB,CAAlB,IAAuB,KAAKU,WAA5C,CAA7B;AACA,QAAIsC,GAAG,GAAG,CAAV;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKjD,SAAL,GAAiB,CAArC,EAAwC,EAAEiD,CAA1C,EAA6C;AACzC,YAAMC,OAAO,GAAG,IAAID,CAApB;AACAH,MAAAA,OAAO,CAACE,GAAG,EAAJ,CAAP,GAAiBE,OAAjB;AACAJ,MAAAA,OAAO,CAACE,GAAG,EAAJ,CAAP,GAAiBE,OAAO,GAAG,CAA3B;AACAJ,MAAAA,OAAO,CAACE,GAAG,EAAJ,CAAP,GAAiBE,OAAO,GAAG,CAA3B;AACAJ,MAAAA,OAAO,CAACE,GAAG,EAAJ,CAAP,GAAiBE,OAAO,GAAG,CAA3B;AACAJ,MAAAA,OAAO,CAACE,GAAG,EAAJ,CAAP,GAAiBE,OAAO,GAAG,CAA3B;AACAJ,MAAAA,OAAO,CAACE,GAAG,EAAJ,CAAP,GAAiBE,OAAO,GAAG,CAA3B;AACH;;AAED,UAAMC,WAAW,GAAG,KAAKlC,OAAL,CAAaC,YAAb,CAA0B,IAAIC,iBAAJ,CAC1CC,sBAAegC,KAAf,GAAuBhC,sBAAesB,YADI,EAE1CpB,sBAAeC,IAAf,GAAsBD,sBAAeE,MAFK,EAG1C,CAAC,KAAKxB,SAAL,GAAiB,CAAlB,IAAuB,KAAKU,WAA5B,GAA0CqC,WAAW,CAACM,iBAHZ,EAI1CN,WAAW,CAACM,iBAJ8B,CAA1B,CAApB;;AAOAF,IAAAA,WAAW,CAACN,MAAZ,CAAmBC,OAAnB;AAEA,SAAKxC,OAAL,CAAagD,SAAb,CAAuB,CAAvB,EAA0BC,WAA1B,GAAwC,KAAKvD,SAAL,GAAiB,KAAKS,UAA9D;AACA,SAAKH,OAAL,CAAagD,SAAb,CAAuB,CAAvB,EAA0BE,UAA1B,GAAuC,CAAC,KAAKxD,SAAL,GAAiB,CAAlB,IAAuB,KAAKU,WAAnE;;AACA,SAAKH,aAAL,CAAmBsC,MAAnB,CAA0B,KAAKvC,OAA/B;;AAEA,SAAKE,YAAL,GAAoB,IAAIiD,kCAAJ,CAAqB,CAACjB,YAAD,CAArB,EAAqC1D,aAArC,EAAoD4E,qBAAcC,aAAlE,EAAiFR,WAAjF,EAA8F,KAAK5C,aAAnG,CAApB;AACA,SAAKqD,YAAL,CAAkB,CAAlB,EAAqB,KAAKpD,YAA1B,EAAwC,KAAKG,SAA7C;AACA,WAAOgC,OAAP;AACH;;AAEMkB,EAAAA,iBAAiB,CAAEC,SAAF,EAAqBC,KAArB,EAAwCC,KAAxC,EAA8D;AAClF,QAAIF,SAAS,CAACG,MAAV,GAAmB,CAAvB,EAA0B;AACtB,UAAIpC,MAAM,GAAG,CAAb;;AACAnC,mBAAKwE,QAAL,CAAczE,QAAd,EAAwBqE,SAAS,CAAC,CAAD,CAAjC,EAAsCA,SAAS,CAAC,CAAD,CAA/C;;AACA,WAAK1D,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAAC,CAAD,CAAT,CAAaK,CAAzC;AACA,WAAK/D,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAAC,CAAD,CAAT,CAAaM,CAAzC;AACA,WAAKhE,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAAC,CAAD,CAAT,CAAaO,CAAzC;AACA,WAAKjE,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,WAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4BkC,KAAK,CAACO,QAAN,CAAe,CAAf,EAAkB,CAAlB,CAA5B;AACA,WAAKlE,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,WAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,WAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4BpC,QAAQ,CAAC0E,CAArC;AACA,WAAK/D,SAAL,CAAgByB,MAAM,EAAtB,IAA4BpC,QAAQ,CAAC2E,CAArC;AACA,WAAKhE,SAAL,CAAgByB,MAAM,EAAtB,IAA4BpC,QAAQ,CAAC4E,CAArC;AACA,WAAKhE,YAAL,CAAmBwB,MAAM,EAAzB,IAA+BmC,KAAK,CAACM,QAAN,CAAe,CAAf,EAAkB,CAAlB,EAAqBC,IAApD;AACA,WAAKnE,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAAC,CAAD,CAAT,CAAaK,CAAzC;AACA,WAAK/D,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAAC,CAAD,CAAT,CAAaM,CAAzC;AACA,WAAKhE,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAAC,CAAD,CAAT,CAAaO,CAAzC;AACA,WAAKjE,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,WAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4BkC,KAAK,CAACO,QAAN,CAAe,CAAf,EAAkB,CAAlB,CAA5B;AACA,WAAKlE,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,WAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,WAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4BpC,QAAQ,CAAC0E,CAArC;AACA,WAAK/D,SAAL,CAAgByB,MAAM,EAAtB,IAA4BpC,QAAQ,CAAC2E,CAArC;AACA,WAAKhE,SAAL,CAAgByB,MAAM,EAAtB,IAA4BpC,QAAQ,CAAC4E,CAArC;AACA,WAAKhE,YAAL,CAAmBwB,MAAM,EAAzB,IAA+BmC,KAAK,CAACM,QAAN,CAAe,CAAf,EAAkB,CAAlB,EAAqBC,IAApD;;AACA,WAAK,IAAItB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGa,SAAS,CAACG,MAAV,GAAmB,CAAvC,EAA0ChB,CAAC,EAA3C,EAA+C;AAC3CvD,qBAAKwE,QAAL,CAAczE,QAAd,EAAwBqE,SAAS,CAACb,CAAC,GAAG,CAAL,CAAjC,EAA0Ca,SAAS,CAACb,CAAD,CAAnD;;AACAvD,qBAAKwE,QAAL,CAAcvE,QAAd,EAAwBmE,SAAS,CAACb,CAAC,GAAG,CAAL,CAAjC,EAA0Ca,SAAS,CAACb,CAAD,CAAnD;;AACAvD,qBAAKwE,QAAL,CAAcvE,QAAd,EAAwBA,QAAxB,EAAkCF,QAAlC;;AACA,cAAM+E,GAAG,GAAGvB,CAAC,GAAGa,SAAS,CAACG,MAA1B;AACA,aAAK7D,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAACb,CAAD,CAAT,CAAakB,CAAzC;AACA,aAAK/D,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAACb,CAAD,CAAT,CAAamB,CAAzC;AACA,aAAKhE,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAACb,CAAD,CAAT,CAAaoB,CAAzC;AACA,aAAKjE,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,aAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4BkC,KAAK,CAACO,QAAN,CAAeE,GAAf,EAAoB,CAApB,CAA5B;AACA,aAAKpE,SAAL,CAAgByB,MAAM,EAAtB,IAA4B2C,GAA5B;AACA,aAAKpE,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,aAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4BlC,QAAQ,CAACwE,CAArC;AACA,aAAK/D,SAAL,CAAgByB,MAAM,EAAtB,IAA4BlC,QAAQ,CAACyE,CAArC;AACA,aAAKhE,SAAL,CAAgByB,MAAM,EAAtB,IAA4BlC,QAAQ,CAAC0E,CAArC;AACA,aAAKhE,YAAL,CAAmBwB,MAAM,EAAzB,IAA+BmC,KAAK,CAACM,QAAN,CAAeE,GAAf,EAAoB,CAApB,EAAuBD,IAAtD;AACA,aAAKnE,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAACb,CAAD,CAAT,CAAakB,CAAzC;AACA,aAAK/D,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAACb,CAAD,CAAT,CAAamB,CAAzC;AACA,aAAKhE,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAACb,CAAD,CAAT,CAAaoB,CAAzC;AACA,aAAKjE,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,aAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4BkC,KAAK,CAACO,QAAN,CAAeE,GAAf,EAAoB,CAApB,CAA5B;AACA,aAAKpE,SAAL,CAAgByB,MAAM,EAAtB,IAA4B2C,GAA5B;AACA,aAAKpE,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,aAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4BlC,QAAQ,CAACwE,CAArC;AACA,aAAK/D,SAAL,CAAgByB,MAAM,EAAtB,IAA4BlC,QAAQ,CAACyE,CAArC;AACA,aAAKhE,SAAL,CAAgByB,MAAM,EAAtB,IAA4BlC,QAAQ,CAAC0E,CAArC;AACA,aAAKhE,YAAL,CAAmBwB,MAAM,EAAzB,IAA+BmC,KAAK,CAACM,QAAN,CAAeE,GAAf,EAAoB,CAApB,EAAuBD,IAAtD;AACH;;AACD7E,mBAAKwE,QAAL,CAAczE,QAAd,EAAwBqE,SAAS,CAACA,SAAS,CAACG,MAAV,GAAmB,CAApB,CAAjC,EAAyDH,SAAS,CAACA,SAAS,CAACG,MAAV,GAAmB,CAApB,CAAlE;;AACA,WAAK7D,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAACA,SAAS,CAACG,MAAV,GAAmB,CAApB,CAAT,CAAgCE,CAA5D;AACA,WAAK/D,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAACA,SAAS,CAACG,MAAV,GAAmB,CAApB,CAAT,CAAgCG,CAA5D;AACA,WAAKhE,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAACA,SAAS,CAACG,MAAV,GAAmB,CAApB,CAAT,CAAgCI,CAA5D;AACA,WAAKjE,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,WAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4BkC,KAAK,CAACO,QAAN,CAAe,CAAf,EAAkB,CAAlB,CAA5B;AACA,WAAKlE,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,WAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,WAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4BpC,QAAQ,CAAC0E,CAArC;AACA,WAAK/D,SAAL,CAAgByB,MAAM,EAAtB,IAA4BpC,QAAQ,CAAC2E,CAArC;AACA,WAAKhE,SAAL,CAAgByB,MAAM,EAAtB,IAA4BpC,QAAQ,CAAC4E,CAArC;AACA,WAAKhE,YAAL,CAAmBwB,MAAM,EAAzB,IAA+BmC,KAAK,CAACM,QAAN,CAAe,CAAf,EAAkB,CAAlB,EAAqBC,IAApD;AACA,WAAKnE,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAACA,SAAS,CAACG,MAAV,GAAmB,CAApB,CAAT,CAAgCE,CAA5D;AACA,WAAK/D,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAACA,SAAS,CAACG,MAAV,GAAmB,CAApB,CAAT,CAAgCG,CAA5D;AACA,WAAKhE,SAAL,CAAgByB,MAAM,EAAtB,IAA4BiC,SAAS,CAACA,SAAS,CAACG,MAAV,GAAmB,CAApB,CAAT,CAAgCI,CAA5D;AACA,WAAKjE,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,WAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4BkC,KAAK,CAACO,QAAN,CAAe,CAAf,EAAkB,CAAlB,CAA5B;AACA,WAAKlE,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,WAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4B,CAA5B;AACA,WAAKzB,SAAL,CAAgByB,MAAM,EAAtB,IAA4BpC,QAAQ,CAAC0E,CAArC;AACA,WAAK/D,SAAL,CAAgByB,MAAM,EAAtB,IAA4BpC,QAAQ,CAAC2E,CAArC;AACA,WAAKhE,SAAL,CAAgByB,MAAM,EAAtB,IAA4BpC,QAAQ,CAAC4E,CAArC;AACA,WAAKhE,YAAL,CAAmBwB,MAAM,EAAzB,IAA+BmC,KAAK,CAACM,QAAN,CAAe,CAAf,EAAkB,CAAlB,EAAqBC,IAApD;AACH;;AACD,SAAKE,QAAL,CAAcC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYb,SAAS,CAACG,MAAV,GAAmB,CAA/B,CAAd;AACH;;AAEMQ,EAAAA,QAAQ,CAAEG,KAAF,EAAiB;AAC5B,UAAMC,EAAE,GAAG,KAAKC,UAAL,CAAgB,CAAhB,EAAmBC,cAA9B;AACAF,IAAAA,EAAE,CAACG,aAAH,CAAiB,CAAjB,EAAoBnC,MAApB,CAA2B,KAAKzC,SAAhC;AACA,SAAKE,OAAL,CAAagD,SAAb,CAAuB,CAAvB,EAA0B2B,UAA1B,GAAuC,CAAvC;AACA,SAAK3E,OAAL,CAAagD,SAAb,CAAuB,CAAvB,EAA0BE,UAA1B,GAAuC,KAAK9C,WAAL,GAAmBkE,KAA1D;;AACA,SAAKrE,aAAL,CAAmBsC,MAAnB,CAA0B,KAAKvC,OAA/B;AACH;;AAEOiC,EAAAA,kBAAkB,GAAI;AAC1B,QAAI,KAAK/B,YAAT,EAAuB;AACnB,WAAKA,YAAL,CAAkB0E,OAAlB;;AACA,WAAK1E,YAAL,GAAoB,IAApB;AACH;AACJ;;AA5LsC"}