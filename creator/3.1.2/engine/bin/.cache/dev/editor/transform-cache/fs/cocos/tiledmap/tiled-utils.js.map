{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/tiledmap/tiled-utils.ts"],"names":["fillTextureGrids","tileset","texGrids","spFrame","spf","sourceImage","tex","texture","collection","imageSize","width","height","imageWidth","imageHeight","tw","_tileSize","th","texWidth","texHeight","spacing","margin","count","cols","Math","floor","rows","max","firstGid","grid","override","get","maxGid","gid","x","y","t","l","r","b","cx","cy","offsetX","offsetY","rotated","spriteFrame","rectForGID","_name","name","lm","unbiasUV","bm","_rect","Rect","_rotated","getRect","set","loadAllTextures","textures","loadedCallback","totalNum","length","curNum","itemCallback","i","loaded","once"],"mappings":"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"}