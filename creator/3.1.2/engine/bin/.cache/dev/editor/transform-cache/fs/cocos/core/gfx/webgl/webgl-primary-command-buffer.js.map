{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/gfx/webgl/webgl-primary-command-buffer.ts"],"names":["WebGLPrimaryCommandBuffer","WebGLCommandBuffer","beginRenderPass","renderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","_device","gpuRenderPass","gpuFramebuffer","_isInRenderPass","draw","info","_isStateInvalied","bindStates","_numDrawCalls","_numInstances","instanceCount","indexCount","vertexCount","_curGPUPipelineState","glPrimitive","_numTris","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","buffSize","undefined","usage","BufferUsageBit","INDIRECT","byteLength","copyBuffersToTexture","buffers","texture","regions","gpuTexture","execute","cmdBuffs","count","i","webGLCmdBuff","cmdPackage","_curGPUInputAssembler","_curGPUDescriptorSets","_curDynamicOffsets","_curDynamicStates"],"mappings":"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"}