{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/root.ts"],"names":["Root","device","_device","mainWindow","_mainWindow","curWindow","window","_curWindow","tempWindow","_tempWindow","windows","_windows","pipeline","_pipeline","batcher2D","_batcher","scenes","_scenes","cumulativeTime","RootPool","get","_poolHandle","RootView","CUMULATIVE_TIME","frameTime","FRAME_TIME","frameCount","_frameCount","fps","_fps","fixedFPS","_fixedFPS","_fixedFPSFrameTime","dataPoolManager","_dataPoolMgr","handle","useDeferredPipeline","_useDeferredPipeline","constructor","_createSceneFun","_createWindowFun","_modelPools","Map","_cameraPool","_lightPools","_fpsTime","NULL_HANDLE","legacyCC","internal","DataPoolManager","RenderScene","registerCreateFunc","RenderWindow","Pool","Camera","initialize","info","alloc","colorAttachment","ColorAttachment","depthStencilAttachment","DepthStencilAttachment","depthStoreOp","StoreOp","DISCARD","stencilStoreOp","renderPassInfo","RenderPassInfo","createWindow","title","width","height","swapchainBufferIndices","Promise","resolve","builtinResMgr","initBuiltinRes","then","view","on","game","canvas","resize","destroy","destroyScenes","clear","free","shouldSyncSizeWithSwapchain","setRenderPipeline","rppl","DeferredPipeline","activate","scene","director","getScene","globals","onGlobalPipelineStateChanged","Batcher2D","i","length","pipelineSceneData","initDeferredPassInfo","activeWindow","resetCumulativeTime","set","frameMove","deltaTime","removeBatches","update","cameraList","extractRenderCameras","acquire","stamp","getTotalFrames","uploadBuffers","emit","Director","EVENT_BEFORE_COMMIT","sort","a","b","priority","render","present","reset","push","destroyWindow","splice","destroyWindows","createScene","destroyScene","createModel","ModelCtor","p","model","destroyModel","m","removeModel","name","createCamera","createLight","LightCtor","l","light","destroyLight","type","LightType","SPHERE","removeSphereLight","SPOT","removeSpotLight"],"mappings":"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"}