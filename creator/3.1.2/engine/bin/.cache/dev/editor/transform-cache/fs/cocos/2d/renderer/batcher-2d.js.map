{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/2d/renderer/batcher-2d.ts"],"names":["_dsInfo","DescriptorSetInfo","m4_1","Mat4","Batcher2D","currBufferBatch","_currMeshBuffer","acquireBufferBatch","buffer","batches","_batches","attributes","VertexFormat","vfmtPosUvColor","strideBytes","getAttributeStride","vertexFormatBytes","_requireBufferBatch","registerCustomBuffer","callback","batch","MeshBuffer","_bufferBatchPool","add","initialize","_recreateMeshBuffer","bind","buffers","_customMeshBuffers","get","set","push","unRegisterCustomBuffer","i","length","splice","currStaticRoot","value","_currStaticRoot","currIsStatic","_currIsStatic","constructor","_root","device","_screens","RecyclePool","_drawBatchPool","_meshBuffers","Map","_meshBufferUseCount","_doUploadBuffersCall","_emptyMaterial","Material","_currScene","_currMaterial","_currTexture","_currSampler","_currComponent","_currTransform","_currTextureHash","_currSamplerHash","_currBlendTargetHash","_currLayer","_currDepthStencilStateStage","_descriptorSetCache","DescriptorSetCache","CachedArray","Pool","DrawBatch2D","destroy","array","size","keys","forEach","obj","clear","StencilManager","sharedManager","addScreen","comp","sort","_screenSort","getFirstRenderCamera","node","scene","renderScene","cameras","camera","visibility","layer","removeScreen","idx","indexOf","sortScreens","addUploadBuffersFunc","target","func","removeUploadBuffersFunc","delete","update","screens","screen","enabledInHierarchy","_recursiveScreenNode","batchPriority","model","subModels","j","priority","hDescriptorSet","getDescriptorSet","addBatch","uploadBuffers","calls","key","call","bb","reset","customs","isStatic","free","commitComp","frame","assembler","transform","renderComp","texture","samp","textureHash","samplerHash","getGFXTexture","getGFXSampler","getHash","getSamplerHash","_getRenderScene","mat","getRenderMaterial","stencilStage","stage","blendTargetHash","blendHash","depthStencilStateStage","autoMergeBatches","fillBuffers","commitModel","depthStencil","dssHash","Stage","ENABLED","DISABLED","getStencilStage","getStencilHash","stamp","legacyCC","director","getTotalFrames","updateTransform","updateUBOs","curDrawBatch","alloc","subModel","visFlags","bufferBatch","sampler","useLocalData","fillPasses","patches","SubModelPool","handle","SubModelView","DESCRIPTOR_SET","hInputAssembler","INPUT_ASSEMBLER","commitStaticBatch","concat","drawBatchList","finishMergeBatches","hIA","recordBatch","blendState","bsHash","getBlendState","customMaterial","_requireDrawBatch","vertexStart","vertexOffset","indicesStart","indicesOffset","byteStart","byteOffset","sys","__isWebIOS14OrIPadOS14Env","forceMergeBatches","material","flushMaterial","walk","level","len","children","_preProcess","_static","child","_postProcess","render","_uiProps","uiComp","localAlpha","localOpacity","opacity","parent","uiTransformComp","updateAssembler","postUpdateAssembler","_createMeshBuffer","vertexCount","indexCount","meshBufferUseCount","request","a","b","getSiblingIndex","_releaseDescriptorSetCache","releaseDescriptorSetCache","LocalDescriptorSet","_handle","_transform","_textureHash","_samplerHash","_localBuffer","_transformUpdate","root","_localData","Float32Array","UBOLocal","COUNT","createBuffer","BufferInfo","BufferUsageBit","UNIFORM","TRANSFER_DST","MemoryUsageBit","HOST","DEVICE","SIZE","layout","passes","localSetLayout","DSPool","_descriptorSet","bindBuffer","BINDING","binding","ModelLocalBindings","SAMPLER_SPRITE","bindTexture","bindSampler","uploadLocalData","updateLocal","equals","hasChangedFlags","_dirtyFlags","updateWorldTransform","worldMatrix","_mat","toArray","MAT_WORLD_OFFSET","inverseTranspose","MAT_WORLD_IT_OFFSET","_localDescriptorSetCache","_localCachePool","caches","cache","localDs","descriptorSetTextureMap","has","descriptorSet","map","internal"],"mappings":"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"}