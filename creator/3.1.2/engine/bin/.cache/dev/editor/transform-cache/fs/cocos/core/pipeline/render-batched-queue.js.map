{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/pipeline/render-batched-queue.ts"],"names":["RenderBatchedQueue","queue","Set","clear","it","values","res","next","done","value","uploadBuffers","cmdBuff","b","batches","length","batch","mergeCount","v","vbs","update","vbDatas","updateBuffer","vbIdx","vbIdxData","buffer","ubo","uboData","recordCommandBuffer","device","renderPass","boundPSO","shader","ShaderPool","get","hShader","pso","PipelineStateManager","getOrCreatePipelineState","pass","ia","bindPipelineState","bindDescriptorSet","SetIndex","MATERIAL","descriptorSet","LOCAL","dynamicOffsets","bindInputAssembler","draw"],"mappings":"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"}