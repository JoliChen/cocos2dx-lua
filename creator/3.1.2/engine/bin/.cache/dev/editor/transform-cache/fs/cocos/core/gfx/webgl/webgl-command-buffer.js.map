{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/gfx/webgl/webgl-command-buffer.ts"],"names":["WebGLCommandBuffer","CommandBuffer","cmdPackage","WebGLCmdPackage","_webGLAllocator","_isInRenderPass","_curGPUPipelineState","_curGPUInputAssembler","_curGPUDescriptorSets","_curDynamicOffsets","Array","fill","_curDynamicStates","DynamicStates","_isStateInvalied","initialize","info","_type","type","_queue","queue","_device","cmdAllocator","setCount","bindingMappingInfo","bufferOffsets","length","i","push","destroy","clearCmds","begin","renderPass","subpass","frameBuffer","_numDrawCalls","_numInstances","_numTris","end","bindStates","beginRenderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","cmd","beginRenderPassCmdPool","alloc","WebGLCmdBeginRenderPass","gpuRenderPass","gpuFramebuffer","beginRenderPassCmds","cmds","WebGLCmd","BEGIN_RENDER_PASS","endRenderPass","bindPipelineState","pipelineState","gpuPipelineState","bindDescriptorSet","set","descriptorSet","dynamicOffsets","gpuDescriptorSet","gpuPipelineLayout","offsets","idx","dynamicOffsetOffsets","bindInputAssembler","inputAssembler","gpuInputAssembler","setViewport","viewport","cache","left","top","width","height","minDepth","maxDepth","setScissor","scissor","x","y","setLineWidth","lineWidth","setDepthBias","depthBiasConstantFactor","depthBiasClamp","depthBiasSlopeFactor","depthBiasConstant","depthBiasSlope","setBlendConstants","blendConstants","blendConstant","z","w","copy","setDepthBound","minDepthBounds","maxDepthBounds","depthMinBounds","depthMaxBounds","setStencilWriteMask","face","writeMask","front","stencilStatesFront","back","stencilStatesBack","StencilFace","FRONT","BACK","setStencilCompareMask","reference","compareMask","draw","CommandBufferType","PRIMARY","SECONDARY","drawCmdPool","WebGLCmdDraw","drawInfo","vertexCount","firstVertex","indexCount","firstIndex","vertexOffset","instanceCount","firstInstance","drawCmds","DRAW","glPrimitive","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","updateBufferCmdPool","WebGLCmdUpdateBuffer","buffSize","buff","usage","BufferUsageBit","INDIRECT","undefined","byteLength","offset","updateBufferCmds","UPDATE_BUFFER","copyBuffersToTexture","buffers","texture","regions","gpuTexture","copyBufferToTextureCmdPool","WebGLCmdCopyBufferToTexture","copyBufferToTextureCmds","COPY_BUFFER_TO_TEXTURE","execute","cmdBuffs","count","webGLCmdBuff","c","array","refCount","bindStatesCmds","concat","pipelineBarrier","globalBarrier","textureBarriers","webGLDevice","bindStatesCmd","bindStatesCmdPool","WebGLCmdBindStates","prototype","apply","gpuDescriptorSets","dynamicStates","BIND_STATES"],"mappings":"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"}