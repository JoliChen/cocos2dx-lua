{"version":3,"sources":["file:///Users/mac/jenkins/workspace/Creator_3D/daily_build_mac/resources/3d/engine/cocos/core/renderer/core/program-lib.ts"],"names":["_dsLayoutInfo","DescriptorSetLayoutInfo","getBitCount","cnt","Math","ceil","log2","max","mapDefine","info","def","type","toString","undefined","options","range","console","warn","prepareDefines","defs","tDefs","macros","i","length","tmpl","name","v","value","isDefault","push","getShaderInstanceName","reduce","acc","cur","insertBuiltinBindings","tmplInfo","source","outBindings","target","builtins","tempBlocks","blocks","b","layouts","binding","bindings","find","bd","descriptorType","DESCRIPTOR_BUFFER_TYPE","includes","Array","prototype","unshift","apply","gfxBlocks","tempSamplerTextures","samplerTextures","s","DESCRIPTOR_SAMPLER_TYPE","gfxSamplerTextures","sort","a","getSize","block","members","m","count","genHandles","handleMap","offset","j","uniform","PropertyType","BUFFER","SetIndex","MATERIAL","samplerTexture","TEXTURE","dependencyCheck","dependencies","defines","d","slice","getActiveAttributes","out","attributes","gfxAttributes","ProgramLib","_templates","_cache","_templateInfos","register","effect","shaders","define","effectName","shader","curTmpl","hash","_map","findIndex","_offset","uber","constantMacros","key","statistics","samplerStartBinding","blockSizes","DescriptorSetLayoutBinding","DescriptorType","UNIFORM_BUFFER","stageFlags","UniformBlock","map","Uniform","SAMPLER_TEXTURE","UniformSamplerTexture","attr","Attribute","format","isNormalized","isInstanced","location","localDescriptorSetLayout","gfxStages","ShaderStage","ShaderStageFlagBit","VERTEX","FRAGMENT","hPipelineLayout","NULL_HANDLE","setLayouts","getTemplate","getTemplateInfo","getDescriptorSetLayout","device","isLocal","createDescriptorSetLayout","LOCAL","hasProgram","getKey","tmplDefs","tmplDef","mapped","destroyShaderByDefines","names","Object","keys","regexes","val","RegExp","filter","k","every","re","test","ShaderPool","get","prog","log","destroy","getGFXShader","pipeline","assign","res","globalDescriptorSetLayout","GLOBAL","descriptorSetLayout","PipelineLayoutPool","alloc","PipelineLayoutInfo","macroArray","prefix","src","glsl3","deviceShaderVersion","getDeviceShaderVersion","error","vert","frag","instanceName","shaderInfo","ShaderInfo","gfxAPI","API","GLES2","WEBGL","GLES3","WEBGL2","programLib","legacyCC"],"mappings":"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"}