{"version":3,"sources":["../../../../../../../../../../cocos/core/gfx/webgl/webgl-primary-command-buffer.ts"],"names":["BufferUsageBit","WebGLCommandBuffer","WebGLCmdFuncBeginRenderPass","WebGLCmdFuncBindStates","WebGLCmdFuncCopyBuffersToTexture","WebGLCmdFuncDraw","WebGLCmdFuncExecuteCmds","WebGLCmdFuncUpdateBuffer","WebGLPrimaryCommandBuffer","beginRenderPass","renderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","_device","gpuRenderPass","gpuFramebuffer","_isInRenderPass","draw","info","_isStateInvalied","bindStates","_numDrawCalls","_numInstances","instanceCount","indexCount","vertexCount","_curGPUPipelineState","glPrimitive","_numTris","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","buffSize","undefined","usage","INDIRECT","byteLength","copyBuffersToTexture","buffers","texture","regions","gpuTexture","execute","cmdBuffs","count","i","webGLCmdBuff","cmdPackage","_curGPUInputAssembler","_curGPUDescriptorSets","_curDynamicOffsets","_curDynamicStates"],"mappings":"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"}