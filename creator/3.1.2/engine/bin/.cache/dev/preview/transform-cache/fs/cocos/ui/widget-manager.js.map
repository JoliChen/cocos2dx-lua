{"version":3,"sources":["../../../../../../../../cocos/ui/widget-manager.ts"],"names":["align","node","widget","_hadAlignOnce","EDITOR","alignMode","AlignMode","ONCE","hasTarget","target","inverseTranslate","tInverseTranslate","inverseScale","tInverseScale","computeInverseTransForTarget","parent","targetSize","getReadonlyNodeSize","useGlobal","Scene","getComponent","UITransform","targetAnchor","_defaultAnchor","anchorPoint","isRoot","getPosition","_tempPos","uiTrans","_uiProps","uiTransformComp","x","y","anchor","scale","getScale","alignFlags","AlignFlags","HORIZONTAL","localLeft","localRight","targetWidth","width","visibleRect","left","right","isAbsoluteLeft","isAbsoluteRight","anchorX","scaleX","isStretchWidth","isAlignHorizontalCenter","localHorizontalCenter","isAbsoluteHorizontalCenter","horizontalCenter","targetCenter","isAlignLeft","_lastSize","VERTICAL","localTop","localBottom","targetHeight","height","bottom","top","isAbsoluteBottom","isAbsoluteTop","anchorY","scaleY","isStretchHeight","isAlignVerticalCenter","localVerticalCenter","isAbsoluteVerticalCenter","verticalCenter","targetMiddle","isAlignBottom","setPosition","z","Vec3","set","_lastPos","visitNode","Widget","enabled","DEV","_validateTargetInDEV","legacyCC","isValid","activeWidgets","push","children","child","active","refreshScene","scene","director","getScene","widgetManager","isAligning","_nodesOrderDirty","length","i","iterator","_activeWidgetsIterator","_dirty","animationState","animatedSinceLastFrame","updateAlignment","Node","isNode","system","Director","Vec2","View","array","_tempVec2_1","_tempVec2_2","_widgetManager","MutableForwardIterator","previewing","time","init","on","EVENT_AFTER_UPDATE","instance","onResized","thisOnResized","bind","onOrientationChange","add","remove","refreshWidgetOnResized","ON_WINDOW_RESIZE","ALWAYS","setDirty","updateOffsetsToStayPut","e","t","c","Math","abs","widgetNode","widgetParent","zero","one","parentTrans","parentAP","trans","matchSize","myAP","pos","widgetNodeScale","temp","LEFT","l","RIGHT","r","TOP","BOT","b","EVENT_INIT"],"mappings":"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"}