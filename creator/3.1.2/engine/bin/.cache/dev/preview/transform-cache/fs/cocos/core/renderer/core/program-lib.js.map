{"version":3,"sources":["../../../../../../../../../../cocos/core/renderer/core/program-lib.ts"],"names":["getBitCount","cnt","Math","ceil","log2","max","mapDefine","info","def","type","toString","undefined","options","range","console","warn","prepareDefines","defs","tDefs","macros","i","length","tmpl","name","v","value","isDefault","push","getShaderInstanceName","reduce","acc","cur","insertBuiltinBindings","tmplInfo","source","outBindings","target","builtins","tempBlocks","b","blocks","layouts","binding","bindings","find","bd","descriptorType","DESCRIPTOR_BUFFER_TYPE","includes","Array","prototype","unshift","apply","gfxBlocks","tempSamplerTextures","s","samplerTextures","DESCRIPTOR_SAMPLER_TYPE","gfxSamplerTextures","sort","a","getSize","block","members","m","GetTypeSize","count","genHandles","handleMap","offset","j","uniform","genHandle","PropertyType","BUFFER","SetIndex","MATERIAL","samplerTexture","TEXTURE","dependencyCheck","dependencies","defines","d","slice","getActiveAttributes","out","attributes","gfxAttributes","getDeviceShaderVersion","device","gfxAPI","API","GLES2","WEBGL","GLES3","WEBGL2","globalDescriptorSetLayout","localDescriptorSetLayout","legacyCC","ShaderPool","PipelineLayoutPool","NULL_HANDLE","PipelineLayoutInfo","Attribute","UniformBlock","ShaderInfo","Uniform","ShaderStage","DescriptorSetLayoutBinding","DescriptorSetLayoutInfo","DescriptorType","ShaderStageFlagBit","UniformSamplerTexture","_dsLayoutInfo","ProgramLib","_templates","_cache","_templateInfos","register","effect","shaders","define","effectName","shader","curTmpl","hash","_map","findIndex","_offset","uber","constantMacros","key","statistics","samplerStartBinding","blockSizes","UNIFORM_BUFFER","stageFlags","map","SAMPLER_TEXTURE","attr","format","isNormalized","isInstanced","location","gfxStages","VERTEX","FRAGMENT","hPipelineLayout","setLayouts","getTemplate","getTemplateInfo","getDescriptorSetLayout","isLocal","createDescriptorSetLayout","LOCAL","hasProgram","getKey","tmplDefs","tmplDef","mapped","destroyShaderByDefines","names","Object","keys","regexes","val","RegExp","filter","k","every","re","test","get","prog","log","destroy","getGFXShader","pipeline","assign","res","GLOBAL","descriptorSetLayout","alloc","macroArray","prefix","src","glsl3","deviceShaderVersion","error","vert","frag","instanceName","shaderInfo","programLib"],"mappings":"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"}