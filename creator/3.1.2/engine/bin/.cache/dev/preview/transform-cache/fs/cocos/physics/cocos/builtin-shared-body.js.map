{"version":3,"sources":["../../../../../../../../../cocos/physics/cocos/builtin-shared-body.ts"],"names":["Mat4","Quat","Vec3","intersect","BuiltinObject","PhysicsSystem","PhysicsGroup","fastRemoveAt","m4_0","v3_0","v3_1","quat_0","BuiltinSharedBody","getSharedBody","node","wrappedWorld","wrappedBody","key","uuid","newSB","sharedBodesMap","has","get","g","DEFAULT","m","instance","collisionMatrix","collisionFilterGroup","collisionFilterMask","set","rigidBody","_group","world","_id","index","ref","shapes","idCounter","intersects","body","i","length","shapeA","j","shapeB","collider","needTriggerEvent","resolve","worldShape","shapeArr","push","addShape","shape","indexOf","removeShape","syncSceneToPhysics","hasChangedFlags","getWorldMatrix","worldPosition","worldRotation","worldScale","transform","syncInitial","destroy","v","bodies","addSharedBody","isRemove","removeSharedBody","Map"],"mappings":"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"}