{"version":3,"sources":["../../../../../../../../../cocos/2d/framework/renderable-2d.ts"],"names":["EDITOR","ccclass","executeInEditMode","requireComponent","disallowMultiple","tooltip","type","displayOrder","serializable","override","visible","displayName","Color","SystemEventType","ccenum","builtinResMgr","Material","BlendFactor","BlendState","BlendTarget","RenderData","UITransform","RenderableComponent","Stage","warnID","legacyCC","InstanceMaterialType","_matInsInfo","parent","owner","subModelIdx","Renderable2D","stencilStage","DISABLED","_assembler","_postAssembler","_renderData","_renderDataFlag","_renderFlag","_delegateSrc","_instanceMaterialType","ADD_COLOR_AND_TEXTURE","_blendState","_blendHash","_colorDirty","_cacheAlpha","_lastParent","updateMaterial","_customMaterial","setMaterial","mat","_updateBuiltinMaterial","_updateBlendFunc","updateBlendHash","dst","targets","blendDst","blendSrc","__preload","node","_uiProps","uiComp","_flushAssembler","onEnable","on","ANCHOR_CHANGED","_nodeStateChange","SIZE_CHANGED","_canRender","onRestore","onDisable","off","onDestroy","destroyRenderData","_materialInstances","i","length","destroy","markForUpdateRenderData","enable","renderData","vertDirty","requestRenderData","data","add","remove","updateAssembler","render","_updateColor","_checkAndUpdateRenderData","_render","postUpdateAssembler","_postRender","updateRenderData","isValid","getMaterial","enabled","activeInHierarchy","enabledInHierarchy","opacity","_postCanRender","_updateWorldAlpha","updateColor","localAlpha","color","a","localOpacity","alpha","target","setTarget","_dstBlendFactor","_srcBlendFactor","blend","blendDstAlpha","ONE_MINUS_SRC_ALPHA","getBlendState","transformType","children","child","renderComp","getComponent","ADD_COLOR","get","GRAYSCALE","USE_ALPHA_SEPARATED","USE_ALPHA_SEPARATED_AND_GRAY","_setCacheAlpha","value","_materials","slice","val","splice","_color","equals","set","clone","emit","COLOR_CHANGED","Assembler","PostAssembler","SRC_ALPHA","WHITE","internal"],"mappings":"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"}