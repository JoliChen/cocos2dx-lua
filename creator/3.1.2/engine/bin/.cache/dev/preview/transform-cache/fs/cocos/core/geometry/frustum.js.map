{"version":3,"sources":["../../../../../../../../../cocos/core/geometry/frustum.ts"],"names":["recordFrustumToSharedMemory","handle","frstm","NULL_HANDLE","vertices","vertexOffset","FrustumView","VERTICES","i","FrustumPool","setVec3","planes","planeOffset","PLANES","setVec4","Vec3","enums","Plane","_v","Array","Frustum","create","clone","f","copy","out","_type","SHAPE_FRUSTUM","update","m","inv","set","n","m03","m00","m07","m04","m11","m08","d","m15","m12","m01","m05","m09","m13","m02","m06","m10","m14","SHAPE_FRUSTUM_ACCURATE","pl","invDist","length","multiplyScalar","transformMat4","transform","mat","fromPoints","b","createOrtho","_temp_v3","width","height","near","far","halfWidth","halfHeight"],"mappings":"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"}