{"version":3,"sources":["../../../../../../../../../cocos/physics-2d/builtin/builtin-world.ts"],"names":["EDITOR","Graphics","Node","CCObject","find","director","Vec3","Color","Canvas","BuiltinBoxShape","BuiltinCircleShape","BuiltinPolygonShape","EPhysics2DDrawFlags","Contact2DType","PhysicsSystem2D","BuiltinContact","contactResults","testIntersectResults","BuiltinPhysicsWorld","_contacts","_shapes","_debugGraphics","_debugDrawFlags","shouldCollide","c1","c2","collider1","collider","collider2","collisionMatrix","instance","node","group","addShape","shape","shapes","index","indexOf","i","l","length","other","contact","push","removeShape","splice","contacts","shape1","shape2","touching","_emitCollide","END_CONTACT","updateShapeGroup","step","deltaTime","velocityIterations","positionIterations","update","collisionType","updateState","None","result","drawDebug","_checkDebugDrawValid","debugDrawer","clear","strokeColor","WHITE","ps","worldPoints","moveTo","x","y","j","lineTo","close","stroke","circle","worldPosition","worldRadius","Aabb","aabb","worldAABB","BLUE","xMin","yMin","yMax","xMax","type","emit","isValid","canvas","scene","getScene","addComponent","parent","hideFlags","Flags","DontSave","ZERO","lineWidth","setSiblingIndex","children","testPoint","p","containsPoint","testAABB","rect","intersectsRect","impl","setGravity","setAllowSleep","syncPhysicsToScene","syncSceneToPhysics","raycast","p1","p2","v"],"mappings":"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"}