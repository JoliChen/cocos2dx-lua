{"version":3,"sources":["../../../../../../../../../cocos/core/pipeline/global-descriptor-set-manager.ts"],"names":["BufferUsageBit","MemoryUsageBit","BufferInfo","Filter","Address","DescriptorSetInfo","DescriptorSetLayoutInfo","UBOShadow","globalDescriptorSetLayout","PipelineGlobalBindings","genSamplerHash","samplerLib","_samplerLinearInfo","LINEAR","NONE","CLAMP","_samplerPointInfo","POINT","GlobalDSManager","pipeline","_device","_descriptorSetMap","Map","_globalDescriptorSet","_descriptorSetLayout","_linearSampler","_pointSampler","device","linearSamplerHash","getSampler","pointSamplerHash","layoutInfo","bindings","createDescriptorSetLayout","createDescriptorSet","bindBuffer","binding","buffer","it","values","res","next","done","descriptorSet","value","bindSampler","sampler","bindTexture","texture","update","getOrCreateDescriptorSet","idx","has","globalDescriptorSet","set","i","UBO_GLOBAL","COUNT","getBuffer","getTexture","shadowBUO","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","SIZE","BINDING","get","destroy"],"mappings":"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"}