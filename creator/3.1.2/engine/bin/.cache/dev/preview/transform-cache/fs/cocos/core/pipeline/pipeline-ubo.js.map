{"version":3,"sources":["../../../../../../../../../cocos/core/pipeline/pipeline-ubo.ts"],"names":["UBOGlobal","UBOShadow","UBOCamera","UNIFORM_SHADOWMAP_BINDING","supportsHalfFloatTexture","BufferInfo","BufferUsageBit","MemoryUsageBit","Mat4","Vec3","Vec4","Color","legacyCC","Shadows","ShadowType","getShadowWorldMatrix","updatePlanarPROJ","LightType","matShadowView","matShadowViewProj","vec3_center","vec4ShadowInfo","PipelineUBO","_globalUBO","Float32Array","COUNT","_cameraUBO","_shadowUBO","updateGlobalUBOView","pipeline","bufferView","device","root","director","fv","shadingWidth","Math","floor","width","shadingHeight","height","TIME_OFFSET","cumulativeTime","frameTime","getTotalFrames","SCREEN_SIZE_OFFSET","NATIVE_SIZE_OFFSET","updateCameraUBOView","camera","scene","getScene","renderScene","mainLight","sceneData","pipelineSceneData","ambient","fog","cv","exposure","isHDR","shadingScale","fpScale","SCREEN_SCALE_OFFSET","EXPOSURE_OFFSET","toArray","direction","MAIN_LIT_DIR_OFFSET","color","MAIN_LIT_COLOR_OFFSET","useColorTemperature","colorTempRGB","colorTemperatureRGB","x","y","z","illuminance","UNIT_Z","ZERO","skyColor","colorArray","skyIllum","set","AMBIENT_SKY_OFFSET","albedoArray","AMBIENT_GROUND_OFFSET","matView","MAT_VIEW_OFFSET","node","worldMatrix","MAT_VIEW_INV_OFFSET","position","CAMERA_POS_OFFSET","matProj","MAT_PROJ_OFFSET","matProjInv","MAT_PROJ_INV_OFFSET","matViewProj","MAT_VIEW_PROJ_OFFSET","matViewProjInv","MAT_VIEW_PROJ_INV_OFFSET","getCombineSignY","GLOBAL_FOG_COLOR_OFFSET","GLOBAL_FOG_BASE_OFFSET","fogStart","fogEnd","fogDensity","GLOBAL_FOG_ADD_OFFSET","fogTop","fogRange","fogAtten","updateShadowUBOView","shadowInfo","shadows","sv","enabled","type","ShadowMap","shadowCameraView","far","autoAdapt","getWorldRotation","radius","sphere","aspect","halfFar","distance","center","min","COEFFICIENT_OF_EXPANSION","MAX_FAR","getWorldMatrix","orthoSize","MAT_LIGHT_VIEW_OFFSET","invert","ortho","near","capabilities","clipSpaceMinZ","clipSpaceSignY","multiply","MAT_LIGHT_VIEW_PROJ_OFFSET","isSupportHalfFloat","linear","SHADOW_NEAR_FAR_LINEAR_SELF_INFO_OFFSET","selfShadow","SHADOW_WIDTH_HEIGHT_PCF_BIAS_INFO_OFFSET","size","pcf","bias","packing","SHADOW_LIGHT_PACKING_NBIAS_NULL_INFO_OFFSET","normalBias","Planar","shadowColor","SHADOW_COLOR_OFFSET","updateShadowUBOLightView","light","_x","_y","_far","DIRECTIONAL","update","SPOT","range","perspective","spotAngle","_combineSignY","_initCombineSignY","_device","screenSpaceSignY","activate","_pipeline","ds","descriptorSet","globalUBO","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","SIZE","bindBuffer","BINDING","cameraUBO","shadowUBO","updateGlobalUBO","globalDSManager","cmdBuffer","commandBuffers","updateBuffer","getBuffer","updateCameraUBO","updateShadowUBO","shadowFrameBufferMap","has","bindTexture","get","colorTextures","updateShadowUBOLight","updateShadowUBORange","offset","data","destroy"],"mappings":"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"}