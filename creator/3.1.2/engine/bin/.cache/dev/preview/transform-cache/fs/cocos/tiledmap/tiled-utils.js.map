{"version":3,"sources":["../../../../../../../../cocos/tiledmap/tiled-utils.ts"],"names":["fillTextureGrids","tileset","texGrids","spFrame","spf","sourceImage","tex","texture","collection","imageSize","width","height","imageWidth","imageHeight","tw","_tileSize","th","texWidth","texHeight","spacing","margin","count","cols","Math","floor","rows","max","firstGid","grid","override","get","maxGid","gid","x","y","t","l","r","b","cx","cy","offsetX","offsetY","rotated","spriteFrame","rectForGID","_name","name","lm","unbiasUV","bm","_rect","Rect","_rotated","getRect","set","loadAllTextures","textures","loadedCallback","totalNum","length","curNum","itemCallback","i","loaded","once"],"mappings":"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"}