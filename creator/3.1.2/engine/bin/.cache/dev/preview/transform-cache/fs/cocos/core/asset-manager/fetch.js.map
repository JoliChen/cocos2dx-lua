{"version":3,"sources":["../../../../../../../../../cocos/core/asset-manager/fetch.ts"],"names":["fetch","task","done","firstTask","progress","finish","total","input","length","canInvoke","options","depends","exclude","__exclude__","Object","create","output","forEach","item","cb","isNative","assets","has","uuid","asset","get","content","addRef","push","dispatch","packManager","load","err","data","isFinish","legacyCC","assetManager","force","error","message","stack","file","getDepends","config","clear","subTask","Task","onProgress","onError","prototype","recycle","onComplete","decreaseRef","fetchPipeline","async","i","l","decRef"],"mappings":"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"}