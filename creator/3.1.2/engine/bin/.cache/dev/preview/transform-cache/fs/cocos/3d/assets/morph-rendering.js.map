{"version":3,"sources":["../../../../../../../../../cocos/3d/assets/morph-rendering.ts"],"names":["createVec4TextureFactory","gfxDevice","vec4Capacity","hasFeatureFloatTexture","hasFeature","Feature","TEXTURE_FLOAT","pixelRequired","pixelFormat","pixelBytes","UpdateViewConstructor","Texture2D","PixelFormat","RGBA32F","Float32Array","RGBA8888","Uint8Array","bestSizeToHavePixels","width","height","assertIsTrue","create","arrayBuffer","ArrayBuffer","valueView","updateView","image","ImageAsset","_data","_compressed","format","textureAsset","setFilters","Filter","NEAREST","setMipFilter","NONE","setWrapMode","WrapMode","CLAMP_TO_EDGE","getGFXTexture","warn","sampler","samplerLib","getSampler","getSamplerHash","texture","destroy","updatePixels","uploadData","enableVertexId","mesh","subMeshIndex","renderingSubMeshes","enableVertexIdChannel","nPixels","aligned","nextPow2","epxSum","log2","h","w","AttributeName","BufferUsageBit","MemoryUsageBit","BufferInfo","UBOMorph","UNIFORM_NORMAL_MORPH_TEXTURE_BINDING","UNIFORM_POSITION_MORPH_TEXTURE_BINDING","UNIFORM_TANGENT_MORPH_TEXTURE_BINDING","assertIsNonNullable","legacyCC","preferCpuComputing","StdMorphRendering","_mesh","_subMeshRenderings","struct","morph","nSubMeshes","primitives","length","Array","fill","iSubMesh","subMeshMorph","subMeshMorphs","targets","MAX_MORPH_TARGET_COUNT","CpuComputing","GpuComputing","createInstance","subMeshInstances","setWeights","weights","requiredPatches","subMeshRenderingInstance","patches","name","value","attributes","includes","ATTR_POSITION","push","ATTR_NORMAL","ATTR_TANGENT","adaptPipelineState","descriptorSet","subMeshInstance","_gfxDevice","_subMeshMorph","_textureInfo","_attributes","_verticesCount","nVertices","vertexBundles","vertexBundelIndices","view","count","nTargets","vec4Required","vec4TextureFactory","map","attributeName","attributeIndex","vec4Tex","forEach","morphTarget","morphTargetIndex","displacementsView","displacements","data","buffer","byteOffset","offset","displacementsOffset","iVertex","morphTexture","attribute","morphUniforms","MorphUniforms","setMorphTextureInfo","setVerticesCount","commit","binding","undefined","bindSampler","bindTexture","bindBuffer","BINDING","update","attributeDisplacement","CpuComputingRenderingInstance","owner","_owner","_morphUniforms","attributeMorph","iAttribute","myAttribute","iTarget","targetDisplacements","weight","targetCount","_targetCount","_localBuffer","_remoteBuffer","DataView","SIZE","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","iWeight","setFloat32","OFFSET_OF_WEIGHTS","sys","isLittleEndian","OFFSET_OF_DISPLACEMENT_TEXTURE_WIDTH","OFFSET_OF_DISPLACEMENT_TEXTURE_HEIGHT","OFFSET_OF_VERTICES_COUNT"],"mappings":"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"}