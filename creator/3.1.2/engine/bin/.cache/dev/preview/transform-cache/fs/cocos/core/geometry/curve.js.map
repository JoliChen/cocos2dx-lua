{"version":3,"sources":["../../../../../../../../../cocos/core/geometry/curve.ts"],"names":["evalOptCurve","t","coefs","CCClass","clamp","inverseLerp","pingPong","repeat","Enum","WrapModeMask","LOOK_FORWARD","WrapMode","Default","Normal","Clamp","Loop","PingPong","Keyframe","time","value","inTangent","outTangent","fastDefine","OptimizedKey","index","endTime","coefficient","Float32Array","evaluate","T","AnimationCurve","keyFrames","preWrapMode","postWrapMode","cachedKey","concat","defaultKF","addKey","keyFrame","push","evaluate_slow","wrappedTime","wrapMode","startTime","length","preKFIndex","i","keyframe0","keyframe1","dt","m0","m1","t2","t3","a","b","c","d","leftIndex","findIndex","rightIndex","Math","min","calcOptimizedKey","optKey","lhs","rhs","dx","dy","d1","d2","cachedIndex","cachedTime","currIndex","left","right","mid","floor"],"mappings":"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"}