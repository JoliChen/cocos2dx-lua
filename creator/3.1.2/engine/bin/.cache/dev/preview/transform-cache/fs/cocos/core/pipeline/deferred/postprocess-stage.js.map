{"version":3,"sources":["../../../../../../../../../../cocos/core/pipeline/deferred/postprocess-stage.ts"],"names":["ccclass","displayOrder","type","serializable","builtinResMgr","SetIndex","Color","Rect","ClearFlagBit","RenderStage","DeferredStagePriority","Material","ShaderPool","PipelineStateManager","UIPhase","colors","POSTPROCESSPASS_INDEX","PostprocessStage","_renderArea","_uiPhase","initialize","info","activate","pipeline","flow","destroy","render","camera","_pipeline","device","cmdBuff","commandBuffers","pipelineUBO","updateCameraUBO","vp","viewport","x","width","y","height","pipelineSceneData","shadingScale","framebuffer","window","renderPass","colorTextures","getRenderPass","clearFlag","COLOR","clearColor","z","w","beginRenderPass","clearDepth","clearStencil","bindDescriptorSet","GLOBAL","descriptorSet","pass","shader","builtinPostProcess","get","passes","getShaderVariant","_postprocessMaterial","inputAssembler","hasOffScreenAttachments","quadIAOffscreen","quadIAOnscreen","pso","getOrCreatePipelineState","renderObjects","length","bindPipelineState","bindInputAssembler","draw","endRenderPass","val","initInfo","name","priority","POSTPROCESS","tag"],"mappings":"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"}