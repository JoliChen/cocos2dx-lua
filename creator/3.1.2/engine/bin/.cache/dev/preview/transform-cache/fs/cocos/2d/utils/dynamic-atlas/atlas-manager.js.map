{"version":3,"sources":["../../../../../../../../../../cocos/2d/utils/dynamic-atlas/atlas-manager.ts"],"names":["EDITOR","legacyCC","Atlas","DynamicAtlasManager","_atlases","_atlasIndex","_maxAtlasCount","_textureSize","_maxFrameSize","_textureBleeding","_enabled","newAtlas","atlas","push","beforeSceneLoad","reset","insertSpriteFrame","spriteFrame","_original","packable","frame","i","l","length","destroy","deleteAtlasSpriteFrame","texture","_texture","deleteAtlasTexture","deleteInnerTexture","isEmpty","splice","packToDynamicAtlas","comp","packedFrame","_setDynamicAtlasFrame","value","director","on","Director","EVENT_BEFORE_SCENE_LAUNCH","off","enable","instance","dynamicAtlasManager","internal"],"mappings":"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"}