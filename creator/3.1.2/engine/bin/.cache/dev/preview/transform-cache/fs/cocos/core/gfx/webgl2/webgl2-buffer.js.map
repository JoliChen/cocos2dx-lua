{"version":3,"sources":["../../../../../../../../../../cocos/core/gfx/webgl2/webgl2-buffer.ts"],"names":["Buffer","BufferUsageBit","IndirectBuffer","WebGL2CmdFuncCreateBuffer","WebGL2CmdFuncDestroyBuffer","WebGL2CmdFuncResizeBuffer","WebGL2CmdFuncUpdateBuffer","WebGL2Buffer","_gpuBuffer","initialize","info","_isBufferView","buffer","_usage","usage","_memUsage","memUsage","_size","_stride","range","_count","_flags","flags","size","stride","indirects","gpuBuffer","glTarget","glBuffer","glOffset","offset","Math","max","INDIRECT","_indirectBuffer","drawInfos","_device","memoryStatus","bufferSize","destroy","resize","console","warn","oldSize","update","buffSize","undefined","byteLength"],"mappings":"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"}