{"version":3,"sources":["../../../../../../../../../cocos/core/animation/skeletal-animation-utils.ts"],"names":["getWorldMatrix","transform","stamp","i","res","Mat4","IDENTITY","node","hasChangedFlags","world","stack","parent","fromRTS","local","rotation","position","scale","multiply","getTransform","root","joint","id","uuid","pool","has","get","set","child","deleteTransform","Map"],"mappings":"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"}