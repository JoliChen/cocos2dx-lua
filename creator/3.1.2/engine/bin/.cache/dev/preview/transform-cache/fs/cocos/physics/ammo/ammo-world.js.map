{"version":3,"sources":["../../../../../../../../../cocos/physics/ammo/ammo-world.ts"],"names":["Ammo","Vec3","AmmoSharedBody","ArrayCollisionMatrix","TupleDictionary","TriggerEventObject","CollisionEventObject","CC_V3_0","CC_V3_1","AmmoConstant","ammo2CocosVec3","cocos2AmmoVec3","error","AmmoInstance","AmmoContactEquation","fastRemoveAt","contactsPool","v3_0","v3_1","AmmoWorld","setAllowSleep","v","setDefaultMaterial","setGravity","gravity","TMP","instance","VECTOR3_0","_btWorld","options","_btBroadphase","_btSolver","_btDispatcher","_btCollisionConfiguration","bodies","ghosts","constraints","triggerArrayMat","collisionArrayMat","contactsDic","oldContactsDic","btDefaultCollisionConfiguration","btCollisionDispatcher","btDbvtBroadphase","btSequentialImpulseConstraintSolver","btDiscreteDynamicsWorld","getPairCache","setOverlapFilterCallback","ccOverlapFilterCallback","setValue","closeHitCB","ClosestRayResultCallback","allHitsCB","AllHitsRayResultCallback","setUseCC","destroy","length","step","deltaTime","timeSinceLastCalled","maxSubStep","undefined","stepSimulation","i","syncPhysicsToScene","syncSceneToPhysics","updateDirty","syncSceneToGhost","syncAfterEvents","raycast","worldRay","pool","results","from","m_rayFromWorld","o","computeHit","maxDistance","to","m_rayToWorld","m_collisionFilterGroup","m_collisionFilterMask","mask","m_closestHitFraction","m_shapePart","m_collisionObject","m_shapeParts","clear","m_hitFractions","m_collisionObjects","hp","m_hitPointWorld","hn","m_hitNormalWorld","rayTest","hasHit","n","size","btObj","at","btCs","getCollisionShape","shape","isCompound","shapeIndex","index","getUserIndex","shared","bodyAndGhosts","wrappedShapes","wrapped","distance","r","add","_assign","collider","push","raycastClosest","result","getSharedBody","node","wrappedBody","addSharedBody","sharedBody","indexOf","addRigidBody","body","collisionFilterGroup","collisionFilterMask","removeSharedBody","removeRigidBody","addGhostObject","addCollisionObject","ghost","removeGhostObject","removeCollisionObject","addConstraint","constraint","impl","enableCollision","removeConstraint","splice","emitEvents","numManifolds","getNumManifolds","manifold","getManifoldByIndexInternal","body0","getBody0","body1","getBody1","useCharacter","numContacts","getNumContacts","j","manifoldPoint","getContactPoint","s0","getShape0","s1","getShape1","shape0","shape1","com","castObject","btCompoundShape","getChildShape","m_index0","m_index1","needTriggerEvent","needCollisionEvent","item","get","id","set","contacts","dicL","getLength","apply","key","getKeyByIndex","data","getDataByKey","collider0","collider1","isTrigger","type","selfCollider","otherCollider","emit","attachedRigidBody","isSleeping","cq","c","pop","oldDicL","reset"],"mappings":";;;;;;;;;;;AA+BOA,MAAAA,I;;AACEC,MAAAA,I,oBAAAA,I;;AACAC,MAAAA,c,qBAAAA,c;;AAGAC,MAAAA,oB,gCAAAA,oB;;AACAC,MAAAA,e,2BAAAA,e;;AACAC,MAAAA,kB,gBAAAA,kB;AAAoBC,MAAAA,oB,gBAAAA,oB;AAAsBC,MAAAA,O,gBAAAA,O;AAASC,MAAAA,O,gBAAAA,O;AAASC,MAAAA,Y,gBAAAA,Y;;AAC5DC,MAAAA,c,eAAAA,c;AAAgBC,MAAAA,c,eAAAA,c;;AAIhBC,MAAAA,K,gBAAAA,K;;AACAC,MAAAA,Y,mBAAAA,Y;;AAEAC,MAAAA,mB,0BAAAA,mB;;AAEAC,MAAAA,Y,qBAAAA,Y;;;AAEHC,MAAAA,Y,GAAsC,E;AACtCC,MAAAA,I,GAAOV,O;AACPW,MAAAA,I,GAAOV,O;;2BAEAW,S;;;eACTC,a,GAAA,uBAAeC,CAAf,EAA2B,CAAG,C;;eAC9BC,kB,GAAA,4BAAoBD,CAApB,EAAwC,CAAG,C;;eAE3CE,U,GAAA,oBAAYC,OAAZ,EAAgC;AAC5B,cAAMC,GAAG,GAAGhB,YAAY,CAACiB,QAAb,CAAsBC,SAAlC;AACAhB,UAAAA,cAAc,CAACc,GAAD,EAAMD,OAAN,CAAd;;AACA,eAAKI,QAAL,CAAcL,UAAd,CAAyBE,GAAzB;AACH,S;;AAuBD,2BAAaI,OAAb,EAA4B;AAAA,eAjBXD,QAiBW;AAAA,eAhBXE,aAgBW;AAAA,eAfXC,SAeW;AAAA,eAdXC,aAcW;AAAA,eAbXC,yBAaW;AAAA,eAXnBC,MAWmB,GAXQ,EAWR;AAAA,eAVnBC,MAUmB,GAVQ,EAUR;AAAA,eATnBC,WASmB,GATa,EASb;AAAA,eARnBC,eAQmB,GARD,IAAIlC,oBAAJ,EAQC;AAAA,eAPnBmC,iBAOmB,GAPC,IAAInC,oBAAJ,EAOD;AAAA,eANnBoC,WAMmB,GANL,IAAInC,eAAJ,EAMK;AAAA,eALnBoC,cAKmB,GALF,IAAIpC,eAAJ,EAKE;AACxB,eAAK6B,yBAAL,GAAiC,IAAIjC,IAAI,CAACyC,+BAAT,EAAjC;AACA,eAAKT,aAAL,GAAqB,IAAIhC,IAAI,CAAC0C,qBAAT,CAA+B,KAAKT,yBAApC,CAArB,CAFwB,CAGxB;;AACA,eAAKH,aAAL,GAAqB,IAAI9B,IAAI,CAAC2C,gBAAT,EAArB;AACA,eAAKZ,SAAL,GAAiB,IAAI/B,IAAI,CAAC4C,mCAAT,EAAjB;AACA,eAAKhB,QAAL,GAAgB,IAAI5B,IAAI,CAAC6C,uBAAT,CAAiC,KAAKb,aAAtC,EAAqD,KAAKF,aAA1D,EAAyE,KAAKC,SAA9E,EAAyF,KAAKE,yBAA9F,CAAhB;;AACA,eAAKL,QAAL,CAAckB,YAAd,GAA6BC,wBAA7B,CAAsD,IAAI/C,IAAI,CAACgD,uBAAT,EAAtD,EAPwB,CAQxB;;;AACA,cAAMvB,GAAG,GAAGhB,YAAY,CAACiB,QAAb,CAAsBC,SAAlC;AACAF,UAAAA,GAAG,CAACwB,QAAJ,CAAa,CAAb,EAAgB,CAAC,EAAjB,EAAqB,CAArB;;AACA,eAAKrB,QAAL,CAAcL,UAAd,CAAyBE,GAAzB;;AACA,cAAI,CAACN,SAAS,CAAC+B,UAAf,EAA2B/B,SAAS,CAAC+B,UAAV,GAAuB,IAAIlD,IAAI,CAACmD,wBAAT,CAAkC1B,GAAlC,EAAuCA,GAAvC,CAAvB;AAC3B,cAAI,CAACN,SAAS,CAACiC,SAAf,EAA0BjC,SAAS,CAACiC,SAAV,GAAsB,IAAIpD,IAAI,CAACqD,wBAAT,CAAkC5B,GAAlC,EAAuCA,GAAvC,CAAtB;AAC1BN,UAAAA,SAAS,CAAC+B,UAAV,CAAqBI,QAArB,CAA8B,IAA9B;AACAnC,UAAAA,SAAS,CAACiC,SAAV,CAAoBE,QAApB,CAA6B,IAA7B;AACH;;eAEDC,O,GAAA,mBAAiB;AACb,cAAI,KAAKnB,WAAL,CAAiBoB,MAAjB,IAA2B,KAAKtB,MAAL,CAAYsB,MAA3C,EAAmD5C,KAAK,CAAC,iDAAD,CAAL;AACnDZ,UAAAA,IAAI,CAACuD,OAAL,CAAa,KAAK3B,QAAlB;AACA5B,UAAAA,IAAI,CAACuD,OAAL,CAAa,KAAKxB,SAAlB;AACA/B,UAAAA,IAAI,CAACuD,OAAL,CAAa,KAAKzB,aAAlB;AACA9B,UAAAA,IAAI,CAACuD,OAAL,CAAa,KAAKvB,aAAlB;AACAhC,UAAAA,IAAI,CAACuD,OAAL,CAAa,KAAKtB,yBAAlB;AACC,cAAD,CAAcA,yBAAd,GAA0C,IAA1C;AACC,cAAD,CAAcD,aAAd,GAA8B,IAA9B;AACC,cAAD,CAAcF,aAAd,GAA8B,IAA9B;AACC,cAAD,CAAcC,SAAd,GAA0B,IAA1B;AACC,cAAD,CAAcH,QAAd,GAAyB,IAAzB;AACC,cAAD,CAAcM,MAAd,GAAuB,IAAvB;AACC,cAAD,CAAcC,MAAd,GAAuB,IAAvB;AACC,cAAD,CAAcC,WAAd,GAA4B,IAA5B;AACC,cAAD,CAAcC,eAAd,GAAgC,IAAhC;AACC,cAAD,CAAcC,iBAAd,GAAkC,IAAlC;AACC,cAAD,CAAcC,WAAd,GAA4B,IAA5B;AACC,cAAD,CAAcC,cAAd,GAA+B,IAA/B;AACAxB,UAAAA,YAAY,CAACwC,MAAb,GAAsB,CAAtB;AACH,S;;eAEDC,I,GAAA,cAAMC,SAAN,EAAyBC,mBAAzB,EAAuDC,UAAvD,EAAuE;AAAA,cAAhBA,UAAgB;AAAhBA,YAAAA,UAAgB,GAAH,CAAG;AAAA;;AACnE,cAAI,KAAK1B,MAAL,CAAYsB,MAAZ,KAAuB,CAAvB,IAA4B,KAAKrB,MAAL,CAAYqB,MAAZ,KAAuB,CAAvD,EAA0D;AAC1D,cAAIG,mBAAmB,KAAKE,SAA5B,EAAuCF,mBAAmB,GAAGD,SAAtB;;AACvC,eAAK9B,QAAL,CAAckC,cAAd,CAA6BH,mBAA7B,EAAkDC,UAAlD,EAA8DF,SAA9D;;AAEA,eAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK7B,MAAL,CAAYsB,MAAhC,EAAwCO,CAAC,EAAzC,EAA6C;AACzC,iBAAK7B,MAAL,CAAY6B,CAAZ,EAAeC,kBAAf;AACH;AACJ,S;;eAEDC,kB,GAAA,8BAA4B;AACxB,eAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK5B,MAAL,CAAYqB,MAAhC,EAAwCO,CAAC,EAAzC,EAA6C;AACzC,iBAAK5B,MAAL,CAAY4B,CAAZ,EAAeG,WAAf;AACA,iBAAK/B,MAAL,CAAY4B,CAAZ,EAAeI,gBAAf;AACH;;AAED,eAAK,IAAIJ,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAG,KAAK7B,MAAL,CAAYsB,MAAhC,EAAwCO,EAAC,EAAzC,EAA6C;AACzC,iBAAK7B,MAAL,CAAY6B,EAAZ,EAAeG,WAAf;;AACA,iBAAKhC,MAAL,CAAY6B,EAAZ,EAAeE,kBAAf;AACH;AACJ,S;;eAEDG,e,GAAA,2BAAyB;AACrB,eAAKH,kBAAL;AACH,S;;eAEDI,O,GAAA,iBAASC,QAAT,EAAwBzC,OAAxB,EAAkD0C,IAAlD,EAAuFC,OAAvF,EAA6H;AACzH,cAAMpB,SAAS,GAAGjC,SAAS,CAACiC,SAA5B;AACA,cAAMqB,IAAI,GAAG9D,cAAc,CAACyC,SAAS,CAACsB,cAAX,EAA2BJ,QAAQ,CAACK,CAApC,CAA3B;AACAL,UAAAA,QAAQ,CAACM,UAAT,CAAoB3D,IAApB,EAA0BY,OAAO,CAACgD,WAAlC;AACA,cAAMC,EAAE,GAAGnE,cAAc,CAACyC,SAAS,CAAC2B,YAAX,EAAyB9D,IAAzB,CAAzB;AACAmC,UAAAA,SAAS,CAAC4B,sBAAV,GAAmC,CAAC,CAApC;AACA5B,UAAAA,SAAS,CAAC6B,qBAAV,GAAkCpD,OAAO,CAACqD,IAA1C;AACA9B,UAAAA,SAAS,CAAC+B,oBAAV,GAAiC,CAAjC;AACA/B,UAAAA,SAAS,CAACgC,WAAV,GAAwB,CAAC,CAAzB;AACChC,UAAAA,SAAS,CAACiC,iBAAX,GAAuC,IAAvC;AACAjC,UAAAA,SAAS,CAACkC,YAAV,CAAuBC,KAAvB;AACAnC,UAAAA,SAAS,CAACoC,cAAV,CAAyBD,KAAzB;AACAnC,UAAAA,SAAS,CAACqC,kBAAV,CAA6BF,KAA7B;AACA,cAAMG,EAAE,GAAGtC,SAAS,CAACuC,eAArB;AACA,cAAMC,EAAE,GAAGxC,SAAS,CAACyC,gBAArB;AACAH,UAAAA,EAAE,CAACH,KAAH;AACAK,UAAAA,EAAE,CAACL,KAAH;;AACA,eAAK3D,QAAL,CAAckE,OAAd,CAAsBrB,IAAtB,EAA4BK,EAA5B,EAAgC1B,SAAhC;;AACA,cAAIA,SAAS,CAAC2C,MAAV,EAAJ,EAAwB;AACpB,iBAAK,IAAIhC,CAAC,GAAG,CAAR,EAAWiC,CAAC,GAAG5C,SAAS,CAACqC,kBAAV,CAA6BQ,IAA7B,EAApB,EAAyDlC,CAAC,GAAGiC,CAA7D,EAAgEjC,CAAC,EAAjE,EAAqE;AACjE,kBAAMmC,KAAK,GAAG9C,SAAS,CAACqC,kBAAV,CAA6BU,EAA7B,CAAgCpC,CAAhC,CAAd;AACA,kBAAMqC,IAAI,GAAGF,KAAK,CAACG,iBAAN,EAAb;AACA,kBAAIC,KAAgB,SAApB;;AACA,kBAAIF,IAAI,CAACG,UAAL,EAAJ,EAAuB;AACnB,oBAAMC,UAAU,GAAGpD,SAAS,CAACkC,YAAV,CAAuBa,EAAvB,CAA0BpC,CAA1B,CAAnB;AACA,oBAAM0C,KAAK,GAAGP,KAAK,CAACQ,YAAN,EAAd;AACA,oBAAMC,MAAM,GAAG9F,YAAY,CAAC+F,aAAb,CAA2BH,KAA3B,CAAf;AACAH,gBAAAA,KAAK,GAAGK,MAAM,CAACE,aAAP,CAAqBL,UAArB,CAAR;AACH,eALD,MAKO;AACHF,gBAAAA,KAAK,GAAIF,IAAD,CAAcU,OAAtB;AACH;;AACDpG,cAAAA,cAAc,CAACO,IAAD,EAAOyE,EAAE,CAACS,EAAH,CAAMpC,CAAN,CAAP,CAAd;AACArD,cAAAA,cAAc,CAACQ,IAAD,EAAO0E,EAAE,CAACO,EAAH,CAAMpC,CAAN,CAAP,CAAd;AACA,kBAAMgD,QAAQ,GAAG9G,IAAI,CAAC8G,QAAL,CAAczC,QAAQ,CAACK,CAAvB,EAA0B1D,IAA1B,CAAjB;AACA,kBAAM+F,CAAC,GAAGzC,IAAI,CAAC0C,GAAL,EAAV;;AACAD,cAAAA,CAAC,CAACE,OAAF,CAAUjG,IAAV,EAAgB8F,QAAhB,EAA0BT,KAAK,CAACa,QAAhC,EAA0CjG,IAA1C;;AACAsD,cAAAA,OAAO,CAAC4C,IAAR,CAAaJ,CAAb;AACH;;AACD,mBAAO,IAAP;AACH;;AACD,iBAAO,KAAP;AACH;AAED;AACJ;AACA;AACA;;;eACIK,c,GAAA,wBAAgB/C,QAAhB,EAA+BzC,OAA/B,EAAyDyF,MAAzD,EAA4F;AACxF,cAAMpE,UAAU,GAAG/B,SAAS,CAAC+B,UAA7B;AACA,cAAMuB,IAAI,GAAG9D,cAAc,CAACuC,UAAU,CAACwB,cAAZ,EAA4BJ,QAAQ,CAACK,CAArC,CAA3B;AACAL,UAAAA,QAAQ,CAACM,UAAT,CAAoB3D,IAApB,EAA0BY,OAAO,CAACgD,WAAlC;AACA,cAAMC,EAAE,GAAGnE,cAAc,CAACuC,UAAU,CAAC6B,YAAZ,EAA0B9D,IAA1B,CAAzB;AAEAiC,UAAAA,UAAU,CAAC8B,sBAAX,GAAoC,CAAC,CAArC;AACA9B,UAAAA,UAAU,CAAC+B,qBAAX,GAAmCpD,OAAO,CAACqD,IAA3C;AACAhC,UAAAA,UAAU,CAACiC,oBAAX,GAAkC,CAAlC;AACCjC,UAAAA,UAAU,CAACmC,iBAAZ,GAAwC,IAAxC;;AAEA,eAAKzD,QAAL,CAAckE,OAAd,CAAsBrB,IAAtB,EAA4BK,EAA5B,EAAgC5B,UAAhC;;AACA,cAAIA,UAAU,CAAC6C,MAAX,EAAJ,EAAyB;AACrB,gBAAMG,KAAK,GAAGhD,UAAU,CAACmC,iBAAzB;AACA,gBAAMe,IAAI,GAAGF,KAAK,CAACG,iBAAN,EAAb;AACA,gBAAIC,KAAJ;;AACA,gBAAIF,IAAI,CAACG,UAAL,EAAJ,EAAuB;AACnB,kBAAME,KAAK,GAAGP,KAAK,CAACQ,YAAN,EAAd;AACA,kBAAMC,MAAM,GAAG9F,YAAY,CAAC+F,aAAb,CAA2BH,KAA3B,CAAf;AACA,kBAAMD,UAAU,GAAGtD,UAAU,CAACkC,WAA9B;AACAkB,cAAAA,KAAK,GAAGK,MAAM,CAACE,aAAP,CAAqBL,UAArB,CAAR;AACH,aALD,MAKO;AACHF,cAAAA,KAAK,GAAIF,IAAD,CAAcU,OAAtB;AACH;;AACDpG,YAAAA,cAAc,CAACO,IAAD,EAAOiC,UAAU,CAACyC,eAAlB,CAAd;AACAjF,YAAAA,cAAc,CAACQ,IAAD,EAAOgC,UAAU,CAAC2C,gBAAlB,CAAd;AACA,gBAAMkB,QAAQ,GAAG9G,IAAI,CAAC8G,QAAL,CAAczC,QAAQ,CAACK,CAAvB,EAA0B1D,IAA1B,CAAjB;;AACAqG,YAAAA,MAAM,CAACJ,OAAP,CAAejG,IAAf,EAAqB8F,QAArB,EAA+BT,KAAK,CAACa,QAArC,EAA+CjG,IAA/C;;AACA,mBAAO,IAAP;AACH;;AACD,iBAAO,KAAP;AACH,S;;eAEDqG,a,GAAA,uBAAeC,IAAf,EAA2BC,WAA3B,EAAwD;AACpD,iBAAOvH,cAAc,CAACqH,aAAf,CAA6BC,IAA7B,EAAmC,IAAnC,EAAyCC,WAAzC,CAAP;AACH,S;;eAEDC,a,GAAA,uBAAeC,UAAf,EAA2C;AACvC,cAAM5D,CAAC,GAAG,KAAK7B,MAAL,CAAY0F,OAAZ,CAAoBD,UAApB,CAAV;;AACA,cAAI5D,CAAC,GAAG,CAAR,EAAW;AACP,iBAAK7B,MAAL,CAAYkF,IAAZ,CAAiBO,UAAjB;;AACA,iBAAK/F,QAAL,CAAciG,YAAd,CAA2BF,UAAU,CAACG,IAAtC,EAA4CH,UAAU,CAACI,oBAAvD,EAA6EJ,UAAU,CAACK,mBAAxF;AACH;AACJ,S;;eAEDC,gB,GAAA,0BAAkBN,UAAlB,EAA8C;AAC1C,cAAM5D,CAAC,GAAG,KAAK7B,MAAL,CAAY0F,OAAZ,CAAoBD,UAApB,CAAV;;AACA,cAAI5D,CAAC,IAAI,CAAT,EAAY;AACRhD,YAAAA,YAAY,CAAC,KAAKmB,MAAN,EAAc6B,CAAd,CAAZ;;AACA,iBAAKnC,QAAL,CAAcsG,eAAd,CAA8BP,UAAU,CAACG,IAAzC;AACH;AACJ,S;;eAEDK,c,GAAA,wBAAgBR,UAAhB,EAA4C;AACxC,cAAM5D,CAAC,GAAG,KAAK5B,MAAL,CAAYyF,OAAZ,CAAoBD,UAApB,CAAV;;AACA,cAAI5D,CAAC,GAAG,CAAR,EAAW;AACP,iBAAK5B,MAAL,CAAYiF,IAAZ,CAAiBO,UAAjB;;AACA,iBAAK/F,QAAL,CAAcwG,kBAAd,CAAiCT,UAAU,CAACU,KAA5C,EAAmDV,UAAU,CAACI,oBAA9D,EAAoFJ,UAAU,CAACK,mBAA/F;AACH;AACJ,S;;eAEDM,iB,GAAA,2BAAmBX,UAAnB,EAA+C;AAC3C,cAAM5D,CAAC,GAAG,KAAK5B,MAAL,CAAYyF,OAAZ,CAAoBD,UAApB,CAAV;;AACA,cAAI5D,CAAC,IAAI,CAAT,EAAY;AACRhD,YAAAA,YAAY,CAAC,KAAKoB,MAAN,EAAc4B,CAAd,CAAZ;;AACA,iBAAKnC,QAAL,CAAc2G,qBAAd,CAAoCZ,UAAU,CAACU,KAA/C;AACH;AACJ,S;;eAEDG,a,GAAA,uBAAeC,UAAf,EAA2C;AACvC,cAAM1E,CAAC,GAAG,KAAK3B,WAAL,CAAiBwF,OAAjB,CAAyBa,UAAzB,CAAV;;AACA,cAAI1E,CAAC,GAAG,CAAR,EAAW;AACP,iBAAK3B,WAAL,CAAiBgF,IAAjB,CAAsBqB,UAAtB;;AACA,iBAAK7G,QAAL,CAAc4G,aAAd,CAA4BC,UAAU,CAACC,IAAvC,EAA6C,CAACD,UAAU,CAACA,UAAX,CAAsBE,eAApE;;AACAF,YAAAA,UAAU,CAAChC,KAAX,GAAmB1C,CAAnB;AACH;AACJ,S;;eAED6E,gB,GAAA,0BAAkBH,UAAlB,EAA8C;AAC1C,cAAM1E,CAAC,GAAG,KAAK3B,WAAL,CAAiBwF,OAAjB,CAAyBa,UAAzB,CAAV;;AACA,cAAI1E,CAAC,IAAI,CAAT,EAAY;AACR,iBAAK3B,WAAL,CAAiByG,MAAjB,CAAwB9E,CAAxB,EAA2B,CAA3B;;AACA,iBAAKnC,QAAL,CAAcgH,gBAAd,CAA+BH,UAAU,CAACC,IAA1C;;AACAD,YAAAA,UAAU,CAAChC,KAAX,GAAmB,CAAC,CAApB;AACH;AACJ,S;;eAEDqC,U,GAAA,sBAAc;AACV,cAAMC,YAAY,GAAG,KAAK/G,aAAL,CAAmBgH,eAAnB,EAArB;;AACA,eAAK,IAAIjF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgF,YAApB,EAAkChF,CAAC,EAAnC,EAAuC;AACnC,gBAAMkF,QAAQ,GAAG,KAAKjH,aAAL,CAAmBkH,0BAAnB,CAA8CnF,CAA9C,CAAjB;;AACA,gBAAMoF,KAAK,GAAGF,QAAQ,CAACG,QAAT,EAAd;AACA,gBAAMC,KAAK,GAAGJ,QAAQ,CAACK,QAAT,EAAd,CAHmC,CAKnC;;AACA,gBAAIH,KAAK,CAACI,YAAN,IAAsBF,KAAK,CAACE,YAAhC,EAA8C;AAAE;AAAW;;AAE3D,gBAAMC,WAAW,GAAGP,QAAQ,CAACQ,cAAT,EAApB;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,WAApB,EAAiCE,CAAC,EAAlC,EAAsC;AAClC,kBAAMC,aAAmC,GAAGV,QAAQ,CAACW,eAAT,CAAyBF,CAAzB,CAA5C;AACA,kBAAMG,EAAE,GAAGF,aAAa,CAACG,SAAd,EAAX;AACA,kBAAMC,EAAE,GAAGJ,aAAa,CAACK,SAAd,EAAX;AACA,kBAAIC,MAAiB,SAArB;AACA,kBAAIC,MAAiB,SAArB;;AACA,kBAAIL,EAAE,CAACtD,UAAH,EAAJ,EAAqB;AACjB,oBAAM4D,GAAG,GAAGnK,IAAI,CAACoK,UAAL,CAAgBP,EAAhB,EAAoB7J,IAAI,CAACqK,eAAzB,CAAZ;AACAJ,gBAAAA,MAAM,GAAIE,GAAG,CAACG,aAAJ,CAAkBX,aAAa,CAACY,QAAhC,CAAD,CAAmDzD,OAA5D;AACH,eAHD,MAGO;AACHmD,gBAAAA,MAAM,GAAIJ,EAAD,CAAY/C,OAArB;AACH;;AAED,kBAAIiD,EAAE,CAACxD,UAAH,EAAJ,EAAqB;AACjB,oBAAM4D,IAAG,GAAGnK,IAAI,CAACoK,UAAL,CAAgBL,EAAhB,EAAoB/J,IAAI,CAACqK,eAAzB,CAAZ;;AACAH,gBAAAA,MAAM,GAAIC,IAAG,CAACG,aAAJ,CAAkBX,aAAa,CAACa,QAAhC,CAAD,CAAmD1D,OAA5D;AACH,eAHD,MAGO;AACHoD,gBAAAA,MAAM,GAAIH,EAAD,CAAYjD,OAArB;AACH;;AAED,kBAAI,CAACmD,MAAD,IAAW,CAACC,MAAhB,EAAwB;;AAExB,kBAAID,MAAM,CAAC9C,QAAP,CAAgBsD,gBAAhB,IACGP,MAAM,CAAC/C,QAAP,CAAgBsD,gBADnB,IAEGR,MAAM,CAAC9C,QAAP,CAAgBuD,kBAFnB,IAGGR,MAAM,CAAC/C,QAAP,CAAgBuD,kBAHvB,EAIE;AACE;AACA,oBAAIC,IAAI,GAAG,KAAKpI,WAAL,CAAiBqI,GAAjB,CAA0BX,MAAM,CAACY,EAAjC,EAAqCX,MAAM,CAACW,EAA5C,CAAX;;AACA,oBAAIF,IAAI,IAAI,IAAZ,EAAkB;AACdA,kBAAAA,IAAI,GAAG,KAAKpI,WAAL,CAAiBuI,GAAjB,CAAqBb,MAAM,CAACY,EAA5B,EAAgCX,MAAM,CAACW,EAAvC,EACH;AACIZ,oBAAAA,MAAM,EAANA,MADJ;AAEIC,oBAAAA,MAAM,EAANA,MAFJ;AAGIa,oBAAAA,QAAQ,EAAE,EAHd;AAIIrC,oBAAAA,IAAI,EAAEO;AAJV,mBADG,CAAP;AAOH;;AACD0B,gBAAAA,IAAI,CAACI,QAAL,CAAc3D,IAAd,CAAmBuC,aAAnB;AACH;AACJ;AACJ,WApDS,CAsDV;;;AACA,cAAIqB,IAAI,GAAG,KAAKzI,WAAL,CAAiB0I,SAAjB,EAAX;;AACA,iBAAOD,IAAI,EAAX,EAAe;AACXhK,YAAAA,YAAY,CAACoG,IAAb,CAAkB8D,KAAlB,CAAwBlK,YAAxB,EAAsCV,oBAAoB,CAACyK,QAA3D;AACAzK,YAAAA,oBAAoB,CAACyK,QAArB,CAA8BvH,MAA9B,GAAuC,CAAvC;AACA,gBAAM2H,GAAG,GAAG,KAAK5I,WAAL,CAAiB6I,aAAjB,CAA+BJ,IAA/B,CAAZ;AACA,gBAAMK,IAAI,GAAG,KAAK9I,WAAL,CAAiB+I,YAAjB,CAAmCH,GAAnC,CAAb;AACA,gBAAMlB,MAAiB,GAAGoB,IAAI,CAACpB,MAA/B;AACA,gBAAMC,OAAiB,GAAGmB,IAAI,CAACnB,MAA/B;AACA,iBAAK1H,cAAL,CAAoBsI,GAApB,CAAwBb,MAAM,CAACY,EAA/B,EAAmCX,OAAM,CAACW,EAA1C,EAA8CQ,IAA9C;AACA,gBAAME,SAAS,GAAGtB,MAAM,CAAC9C,QAAzB;AACA,gBAAMqE,SAAS,GAAGtB,OAAM,CAAC/C,QAAzB;;AACA,gBAAIoE,SAAS,IAAIC,SAAjB,EAA4B;AACxB,kBAAMC,SAAS,GAAGF,SAAS,CAACE,SAAV,IAAuBD,SAAS,CAACC,SAAnD;;AACA,kBAAIA,SAAJ,EAAe;AACX,oBAAI,KAAKpJ,eAAL,CAAqBuI,GAArB,CAAyBX,MAAM,CAACY,EAAhC,EAAoCX,OAAM,CAACW,EAA3C,CAAJ,EAAoD;AAChDxK,kBAAAA,kBAAkB,CAACqL,IAAnB,GAA0B,eAA1B;AACH,iBAFD,MAEO;AACHrL,kBAAAA,kBAAkB,CAACqL,IAAnB,GAA0B,gBAA1B;AACA,uBAAKrJ,eAAL,CAAqByI,GAArB,CAAyBb,MAAM,CAACY,EAAhC,EAAoCX,OAAM,CAACW,EAA3C,EAA+C,IAA/C;AACH;;AACDxK,gBAAAA,kBAAkB,CAACqI,IAAnB,GAA0B2C,IAAI,CAAC3C,IAA/B;AACArI,gBAAAA,kBAAkB,CAACsL,YAAnB,GAAkCJ,SAAlC;AACAlL,gBAAAA,kBAAkB,CAACuL,aAAnB,GAAmCJ,SAAnC;AACAD,gBAAAA,SAAS,CAACM,IAAV,CAAexL,kBAAkB,CAACqL,IAAlC,EAAwCrL,kBAAxC;AAEAA,gBAAAA,kBAAkB,CAACsL,YAAnB,GAAkCH,SAAlC;AACAnL,gBAAAA,kBAAkB,CAACuL,aAAnB,GAAmCL,SAAnC;AACAC,gBAAAA,SAAS,CAACK,IAAV,CAAexL,kBAAkB,CAACqL,IAAlC,EAAwCrL,kBAAxC;AACH,eAfD,MAeO;AACH,oBAAM8I,KAAK,GAAGoC,SAAS,CAACO,iBAAxB;AACA,oBAAMzC,MAAK,GAAGmC,SAAS,CAACM,iBAAxB;;AACA,oBAAI3C,KAAK,IAAIE,MAAb,EAAoB;AAChB,sBAAIF,KAAK,CAAC4C,UAAN,IAAoB1C,MAAK,CAAC0C,UAA9B,EAA0C;AAC7C,iBAFD,MAEO,IAAI5C,KAAK,IAAI,IAAT,IAAiBE,MAArB,EAA4B;AAC/B,sBAAIA,MAAK,CAAC0C,UAAV,EAAsB;AACzB,iBAFM,MAEA,IAAI1C,MAAK,IAAI,IAAT,IAAiBF,KAArB,EAA4B;AAC/B,sBAAIA,KAAK,CAAC4C,UAAV,EAAsB;AACzB;;AACD,oBAAI,KAAKzJ,iBAAL,CAAuBsI,GAAvB,CAA2BX,MAAM,CAACY,EAAlC,EAAsCX,OAAM,CAACW,EAA7C,CAAJ,EAAsD;AAClDvK,kBAAAA,oBAAoB,CAACoL,IAArB,GAA4B,iBAA5B;AACH,iBAFD,MAEO;AACHpL,kBAAAA,oBAAoB,CAACoL,IAArB,GAA4B,kBAA5B;AACA,uBAAKpJ,iBAAL,CAAuBwI,GAAvB,CAA2Bb,MAAM,CAACY,EAAlC,EAAsCX,OAAM,CAACW,EAA7C,EAAiD,IAAjD;AACH;;AAED,qBAAK,IAAI9G,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAGsH,IAAI,CAACN,QAAL,CAAcvH,MAAlC,EAA0CO,GAAC,EAA3C,EAA+C;AAC3C,sBAAMiI,EAAE,GAAGX,IAAI,CAACN,QAAL,CAAchH,GAAd,CAAX;;AACA,sBAAI/C,YAAY,CAACwC,MAAb,GAAsB,CAA1B,EAA6B;AACzB,wBAAMyI,CAAC,GAAGjL,YAAY,CAACkL,GAAb,EAAV;AACAD,oBAAAA,CAAC,CAAEvD,IAAH,GAAUsD,EAAV;AACA1L,oBAAAA,oBAAoB,CAACyK,QAArB,CAA8B3D,IAA9B,CAAmC6E,CAAnC;AACH,mBAJD,MAIO;AACH,wBAAMA,EAAC,GAAG,IAAInL,mBAAJ,CAAwBR,oBAAxB,CAAV;;AACA2L,oBAAAA,EAAC,CAACvD,IAAF,GAASsD,EAAT;AACA1L,oBAAAA,oBAAoB,CAACyK,QAArB,CAA8B3D,IAA9B,CAAmC6E,EAAnC;AACH;AACJ;;AACD3L,gBAAAA,oBAAoB,CAACoI,IAArB,GAA4B2C,IAAI,CAAC3C,IAAjC;AACApI,gBAAAA,oBAAoB,CAACqL,YAArB,GAAoCJ,SAApC;AACAjL,gBAAAA,oBAAoB,CAACsL,aAArB,GAAqCJ,SAArC;AACAD,gBAAAA,SAAS,CAACM,IAAV,CAAevL,oBAAoB,CAACoL,IAApC,EAA0CpL,oBAA1C;AAEAA,gBAAAA,oBAAoB,CAACqL,YAArB,GAAoCH,SAApC;AACAlL,gBAAAA,oBAAoB,CAACsL,aAArB,GAAqCL,SAArC;AACAC,gBAAAA,SAAS,CAACK,IAAV,CAAevL,oBAAoB,CAACoL,IAApC,EAA0CpL,oBAA1C;AACH;;AAED,kBAAI,KAAKkC,cAAL,CAAoBoI,GAApB,CAAwBX,MAAM,CAACY,EAA/B,EAAmCX,OAAM,CAACW,EAA1C,KAAiD,IAArD,EAA2D;AACvD,qBAAKrI,cAAL,CAAoBsI,GAApB,CAAwBb,MAAM,CAACY,EAA/B,EAAmCX,OAAM,CAACW,EAA1C,EAA8CQ,IAA9C;AACH;AACJ;AACJ,WA9HS,CAgIV;;;AACA,cAAIc,OAAO,GAAG,KAAK3J,cAAL,CAAoByI,SAApB,EAAd;;AACA,iBAAOkB,OAAO,EAAd,EAAkB;AACd,gBAAMhB,IAAG,GAAG,KAAK3I,cAAL,CAAoB4I,aAApB,CAAkCe,OAAlC,CAAZ;;AACA,gBAAMd,KAAI,GAAG,KAAK7I,cAAL,CAAoB8I,YAApB,CAAsCH,IAAtC,CAAb;;AACA,gBAAMlB,OAAiB,GAAGoB,KAAI,CAACpB,MAA/B;AACA,gBAAMC,OAAiB,GAAGmB,KAAI,CAACnB,MAA/B;AACA,gBAAMqB,SAAS,GAAGtB,OAAM,CAAC9C,QAAzB;AACA,gBAAMqE,UAAS,GAAGtB,OAAM,CAAC/C,QAAzB;;AACA,gBAAIoE,SAAS,IAAIC,UAAjB,EAA4B;AACxB,kBAAMC,UAAS,GAAGF,SAAS,CAACE,SAAV,IAAuBD,UAAS,CAACC,SAAnD;;AACA,kBAAI,KAAKlJ,WAAL,CAAiB+I,YAAjB,CAA8BH,IAA9B,KAAsC,IAA1C,EAAgD;AAC5C,oBAAIM,UAAJ,EAAe;AACX,sBAAI,KAAKpJ,eAAL,CAAqBuI,GAArB,CAAyBX,OAAM,CAACY,EAAhC,EAAoCX,OAAM,CAACW,EAA3C,CAAJ,EAAoD;AAChDxK,oBAAAA,kBAAkB,CAACqL,IAAnB,GAA0B,eAA1B;AACArL,oBAAAA,kBAAkB,CAACsL,YAAnB,GAAkCJ,SAAlC;AACAlL,oBAAAA,kBAAkB,CAACuL,aAAnB,GAAmCJ,UAAnC;;AACAD,oBAAAA,SAAS,CAACM,IAAV,CAAexL,kBAAkB,CAACqL,IAAlC,EAAwCrL,kBAAxC;;AAEAA,oBAAAA,kBAAkB,CAACsL,YAAnB,GAAkCH,UAAlC;AACAnL,oBAAAA,kBAAkB,CAACuL,aAAnB,GAAmCL,SAAnC;;AACAC,oBAAAA,UAAS,CAACK,IAAV,CAAexL,kBAAkB,CAACqL,IAAlC,EAAwCrL,kBAAxC;;AAEA,yBAAKgC,eAAL,CAAqByI,GAArB,CAAyBb,OAAM,CAACY,EAAhC,EAAoCX,OAAM,CAACW,EAA3C,EAA+C,KAA/C;AACA,yBAAKrI,cAAL,CAAoBsI,GAApB,CAAwBb,OAAM,CAACY,EAA/B,EAAmCX,OAAM,CAACW,EAA1C,EAA8C,IAA9C;AACH;AACJ,iBAdD,MAcO,IAAI,KAAKvI,iBAAL,CAAuBsI,GAAvB,CAA2BX,OAAM,CAACY,EAAlC,EAAsCX,OAAM,CAACW,EAA7C,CAAJ,EAAsD;AACzD7J,kBAAAA,YAAY,CAACoG,IAAb,CAAkB8D,KAAlB,CAAwBlK,YAAxB,EAAsCV,oBAAoB,CAACyK,QAA3D;AACAzK,kBAAAA,oBAAoB,CAACyK,QAArB,CAA8BvH,MAA9B,GAAuC,CAAvC;AAEAlD,kBAAAA,oBAAoB,CAACoL,IAArB,GAA4B,iBAA5B;AACApL,kBAAAA,oBAAoB,CAACqL,YAArB,GAAoCJ,SAApC;AACAjL,kBAAAA,oBAAoB,CAACsL,aAArB,GAAqCJ,UAArC;;AACAD,kBAAAA,SAAS,CAACM,IAAV,CAAevL,oBAAoB,CAACoL,IAApC,EAA0CpL,oBAA1C;;AAEAA,kBAAAA,oBAAoB,CAACqL,YAArB,GAAoCH,UAApC;AACAlL,kBAAAA,oBAAoB,CAACsL,aAArB,GAAqCL,SAArC;;AACAC,kBAAAA,UAAS,CAACK,IAAV,CAAevL,oBAAoB,CAACoL,IAApC,EAA0CpL,oBAA1C;;AAEA,uBAAKgC,iBAAL,CAAuBwI,GAAvB,CAA2Bb,OAAM,CAACY,EAAlC,EAAsCX,OAAM,CAACW,EAA7C,EAAiD,KAAjD;AACA,uBAAKrI,cAAL,CAAoBsI,GAApB,CAAwBb,OAAM,CAACY,EAA/B,EAAmCX,OAAM,CAACW,EAA1C,EAA8C,IAA9C;AACH;AACJ;AACJ;AACJ;;AAED,eAAKtI,WAAL,CAAiB6J,KAAjB;AACH,S;;;;eA5YD,eAAY;AACR,mBAAO,KAAKxK,QAAZ;AACH;;;;;;AAZQT,MAAAA,S,CA4BF+B,U;AA5BE/B,MAAAA,S,CA6BFiC,S"}