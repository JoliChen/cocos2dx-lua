{"version":3,"sources":["../../../../../../../../../cocos/core/asset-manager/utilities.ts"],"names":["setDefaultProgressCallback","onProgress","defaultProgressCallback","clear","task","clearRef","i","l","input","length","item","isNative","content","Asset","decRef","recycle","urlAppendTimestamp","url","append","test","Date","now","retry","process","times","wait","onComplete","index","err","result","setTimeout","getDepends","uuid","data","exclude","depends","config","info","dependUtil","parse","deps","dep","push","bundle","name","nativeDep","e","error","message","stack","cache","id","asset","cacheAsset","undefined","legacyCC","assetManager","isScene","isDefault","assets","add","setProperties","assetsMap","missingAsset","__depends__","missingAssetReporter","depend","dependAsset","EDITOR","EditorExtends","MissingReporter","object","stashByOwner","owner","prop","serialize","asAsset","type","placeHolder","initDefault","addRef","reference","references","get","reportByOwner","__nativeDepend__","_nativeAsset","console","gatherAsset","source","options","__outputAsArray__","output","forEach","array","count","errs","cb","parseParameters","optionsOut","onProgressOut","onCompleteOut","isCallback","Object","create","parseLoadResArgs","typeOut","isValidType","js","isChildClassOf","checkCircleReference","map","checked","getDeps","asyncify","p1","p2","refs","Array","isArray","x","callInNextTick"],"mappings":"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"}