{"version":3,"sources":["../../../../../../../../cocos/particle-2d/particle-simulator-2d.ts"],"names":["getWorldRotation","node","rotation","tempNode","eulerAngles","z","parent","Vec2","Color","Pool","clampf","degreesToRadians","radiansToDegrees","vfmtPosUvColor","getComponentPerVertex","PositionType","EmitterMode","START_SIZE_EQUAL_TO_END_SIZE","START_RADIUS_EQUAL_TO_END_RADIUS","ZERO_VEC2","_pos","_tpa","_tpb","_tpc","formatBytes","Particle","pos","startPos","color","deltaColor","r","g","b","a","size","deltaSize","deltaRotation","timeToLive","drawPos","aspectRatio","dir","radialAccel","tangentialAccel","angle","degreesPerSecond","radius","deltaRadius","ParticlePool","get","_get","pool","par","set","_val","Simulator","system","particles","active","uvFilled","finished","readyToPlay","elapsed","emitCounter","_worldRotation","sys","stop","duration","reset","id","length","put","emitParticle","psys","particle","push","life","lifeVar","Math","random","max","x","sourcePos","posVar","y","sr","sg","sb","sa","startColor","startColorVar","endColor","endColorVar","startS","startSize","startSizeVar","endSize","endS","endSizeVar","startA","startSpin","startSpinVar","endA","endSpin","endSpinVar","angleVar","emitterMode","GRAVITY","s","speed","speedVar","cos","sin","multiplyScalar","radialAccelVar","tangentialAccelVar","rotationIsDir","atan2","startRadius","startRadiusVar","endRadius","endRadiusVar","rotatePerS","rotatePerSVar","updateUVs","force","renderData","_renderSpriteFrame","vbuf","vData","uv","start","particleCount","i","offset","updateParticleBuffer","buffer","width","height","halfWidth","halfHeight","x1","y1","x2","y2","rad","cr","toArray","step","dt","assembler","maxParticleDeltaTime","updateWorldTransform","positionType","FREE","m","worldMatrix","m12","m13","RELATIVE","position","emissionRate","rate","totalParticles","stopSystem","requestData","particleIdx","tmp","radial","tangential","normalize","newy","add","gravity","newPos","GROUPED","deadParticle","indicesCount","vertexCount","_finishedSimulation","request","count","iData","vId"],"mappings":"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"}