{"version":3,"sources":["../../../../../../../../../../cocos/core/gfx/webgl2/webgl2-command-buffer.ts"],"names":["CommandBuffer","BufferUsageBit","CommandBufferType","StencilFace","DynamicStates","WebGL2Cmd","WebGL2CmdBeginRenderPass","WebGL2CmdBindStates","WebGL2CmdCopyBufferToTexture","WebGL2CmdDraw","WebGL2CmdPackage","WebGL2CmdUpdateBuffer","WebGL2CommandBuffer","cmdPackage","_webGLAllocator","_isInRenderPass","_curGPUPipelineState","_curGPUDescriptorSets","_curGPUInputAssembler","_curDynamicOffsets","Array","fill","_curDynamicStates","_isStateInvalied","initialize","info","_type","type","_queue","queue","_device","cmdAllocator","setCount","bindingMappingInfo","bufferOffsets","length","i","push","destroy","clearCmds","begin","renderPass","subpass","frameBuffer","_numDrawCalls","_numInstances","_numTris","end","bindStates","beginRenderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","cmd","beginRenderPassCmdPool","alloc","gpuRenderPass","gpuFramebuffer","beginRenderPassCmds","cmds","BEGIN_RENDER_PASS","endRenderPass","bindPipelineState","pipelineState","gpuPipelineState","bindDescriptorSet","set","descriptorSet","dynamicOffsets","gpuDescriptorSets","gpuDescriptorSet","gpuPipelineLayout","offsets","idx","dynamicOffsetOffsets","bindInputAssembler","inputAssembler","gpuInputAssembler","setViewport","viewport","cache","left","top","width","height","minDepth","maxDepth","setScissor","scissor","x","y","setLineWidth","lineWidth","setDepthBias","depthBiasConstantFactor","depthBiasClamp","depthBiasSlopeFactor","depthBiasConstant","depthBiasSlope","setBlendConstants","blendConstants","blendConstant","z","w","copy","setDepthBound","minDepthBounds","maxDepthBounds","depthMinBounds","depthMaxBounds","setStencilWriteMask","face","writeMask","front","stencilStatesFront","back","stencilStatesBack","FRONT","BACK","setStencilCompareMask","reference","compareMask","draw","PRIMARY","SECONDARY","drawCmdPool","drawInfo","vertexCount","firstVertex","indexCount","firstIndex","vertexOffset","instanceCount","firstInstance","drawCmds","DRAW","glPrimitive","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","updateBufferCmdPool","buffSize","buff","usage","INDIRECT","undefined","byteLength","offset","updateBufferCmds","UPDATE_BUFFER","copyBuffersToTexture","buffers","texture","regions","gpuTexture","copyBufferToTextureCmdPool","copyBufferToTextureCmds","COPY_BUFFER_TO_TEXTURE","execute","cmdBuffs","count","webGL2CmdBuff","c","array","refCount","bindStatesCmds","concat","pipelineBarrier","globalBarrier","textureBarriers","bindStatesCmd","bindStatesCmdPool","prototype","apply","dynamicStates","BIND_STATES"],"mappings":"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"}