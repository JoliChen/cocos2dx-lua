{"version":3,"sources":["../../../../../../../../../../cocos/core/utils/prefab/utils.ts"],"names":["createNodeWithPrefab","node","prefabInfo","_prefab","prefabInstance","instance","asset","EDITOR","errorID","name","undefined","_objFlags","_parent","_id","legacyCC","game","_isCloning","SUPPORT_JIT","_doInstantiate","prefabRoot","data","_iN$t","instantiate","_clone","generateTargetMap","targetMap","isRoot","curTargetMap","fileId","components","i","length","comp","__prefab","children","childNode","getTarget","localID","target","targetIter","applyMountedChildren","mountedChildren","childInfo","targetInfo","nodes","_children","push","editorExtrasTag","mountedRoot","_siblingIndex","_onBatchCreated","applyMountedComponents","mountedComponents","componentsInfo","_components","applyRemovedComponents","removedComponents","index","indexOf","splice","applyPropertyOverrides","propertyOverrides","propOverride","targetPropOwner","propertyPath","slice","targetPropName","pop","propName","Array","isArray","value","Number","parseInt","isInteger","warn","applyTargetOverrides","targetOverrides","targetOverride","source","sourceInfo","sourceInstance","targetInstance"],"mappings":"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"}