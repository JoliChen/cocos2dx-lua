{"version":3,"sources":["../../../../../../../../../cocos/core/pipeline/render-queue.ts"],"names":["opaqueCompareFn","a","b","hash","depth","shaderId","transparentCompareFn","convertRenderQueue","desc","phase","j","stages","length","getPhaseID","sortFunc","sortMode","RenderQueueSortMode","BACK_TO_FRONT","FRONT_TO_BACK","RenderQueue","isTransparent","phases","renderQueueClearFunc","rq","clear","renderQueueSortFunc","sort","RecyclePool","CachedArray","SetIndex","PipelineStateManager","SubModelView","SubModelPool","ShaderPool","queue","_passDesc","_passPool","subModel","passIdx","reset","insertRenderPass","renderObj","subModelIdx","model","subModels","pass","passes","blendState","targets","blend","priority","rp","add","get","handle","SHADER_0","push","recordCommandBuffer","device","renderPass","cmdBuff","i","array","inputAssembler","hSubModel","shader","pso","getOrCreatePipelineState","bindPipelineState","bindDescriptorSet","MATERIAL","descriptorSet","LOCAL","bindInputAssembler","draw"],"mappings":"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"}