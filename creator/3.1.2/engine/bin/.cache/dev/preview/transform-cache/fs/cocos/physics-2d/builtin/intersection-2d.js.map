{"version":3,"sources":["../../../../../../../../../cocos/physics-2d/builtin/intersection-2d.ts"],"names":["lineLine","a1","a2","b1","b2","ua_t","x","y","ub_t","u_b","ua","ub","lineRect","b","r0","tempR1","set","r1","tempR2","yMax","r2","tempR3","xMax","r3","tempR4","linePolygon","length","i","rectRect","a","a_min_x","a_min_y","a_max_x","width","a_max_y","height","b_min_x","b_min_y","b_max_x","b_max_y","rectPolygon","l","contains","pointInPolygon","polygonPolygon","circleCircle","c1p","c1r","c2p","c2r","distance","Vec2","polygonCircle","polygon","cp","cr","position","start","end","pointLineDistance","rectCircle","rect","cx","cy","rx","ry","rw","rh","testX","testY","distX","distY","Math","sqrt","point","inside","j","xi","yi","xj","yj","intersect","isSegment","dx","dy","d","t","p","Intersection2D"],"mappings":"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"}