{"version":3,"sources":["../../../../../../../../../cocos/3d/skinned-mesh-renderer/skinned-mesh-batch-renderer.ts"],"names":["EDITOR","ccclass","help","executeInEditMode","executionOrder","menu","tooltip","type","visible","override","serializable","editable","getWorldTransformUntilRoot","Filter","PixelFormat","Material","Mesh","Skeleton","Texture2D","CCString","AttributeName","FormatInfos","Format","Type","Attribute","BufferTextureCopy","Mat4","Vec2","Vec3","mapBuffer","readBuffer","writeBuffer","SkinnedMeshRenderer","legacyCC","repeat","n","Math","floor","batch_id","ATTR_BATCH_ID","R32F","batch_uv","ATTR_BATCH_UV","RG32F","batch_extras_size","format","size","SkinnedMeshUnit","_offset","offset","copy","_size","comp","mesh","skeleton","material","getMaterial","skinningRoot","node","_localTransform","m4_local","m4_1","v3_1","SkinnedMeshBatchRenderer","_textures","_batchMaterial","onLoad","cook","onDestroy","tex","destroy","_mesh","_onMaterialModified","idx","cookMaterials","getMaterialInstance","cookSkeletons","cookMeshes","mat","effectAsset","console","warn","resizeAtlases","tech","techniques","technique","i","pass","passes","properties","prop","SAMPLER1D","batchableTextureNames","find","createTexture","cookTextures","units","some","u","getProperty","setProperty","value","length","unit","push","slice","_skinningRoot","joints","bindposes","partial","invert","path","findIndex","p","multiply","equals","name","IDENTITY","idxMap","Array","from","keys","sort","a","b","map","_","arr","_skeleton","isValid","destroyRenderingMesh","posOffset","posFormat","UNKNOWN","normalOffset","normalFormat","tangentOffset","tangentFormat","uvOffset","uvFormat","jointOffset","jointFormat","jointIndexMap","unitLen","j","ref","data","newMesh","_createUnitMesh","dataView","DataView","buffer","inverseTranspose","bundle","struct","vertexBundles","view","attributes","attr","ATTR_POSITION","pos","stride","fromArray","transformMat4","toArray","ATTR_NORMAL","normal","transformMat4Normal","ATTR_TANGENT","tangent","cur","ATTR_JOINTS","merge","_onMeshChanged","_updateModels","target","passIdx","texImages","texImageRegions","texBuffers","texBufferRegions","image","region","texOffset","x","atlasSize","y","texExtent","width","height","ArrayBuffer","isView","gfxTex","getGFXTexture","director","root","device","copyBuffersToTexture","copyTexImagesToTexture","setFilters","LINEAR","setMipFilter","NEAREST","reset","RGBA8888","loaded","unitIdx","newMeshStruct","JSON","parse","stringify","modifiedBundles","primitives","primitive","bundleIdx","vertexBundelIndices","ATTR_TEX_COORD","undefined","newBundle","count","totalLength","pm","indexView","newMeshData","Uint8Array","oldMeshData","newDataView","oldDataView","isLittleEndian","sys","oldBundle","uvs","oldView","newView","oldStride","newStride","oldOffset","newOffset","srcVertex","subarray","set","setFloat32","k","oldPrimitive","newPrimitive","srcIndices","val"],"mappings":"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"}