{"version":3,"sources":["../../../../../../../../../../cocos/physics/cannon/shapes/cannon-shape.ts"],"names":["CANNON","Vec3","Quat","getWrap","setWrap","commitShapeUpdates","PhysicsSystem","TriggerEventObject","type","selfCollider","otherCollider","impl","cannonQuat_0","Quaternion","cannonVec3_0","cannonVec3_1","CannonShape","_offset","_orient","_index","onTriggerListener","_onTrigger","bind","_isBinding","updateEventListener","setMaterial","mat","_shape","material","idToMaterial","id","Material","smat","friction","restitution","coef","CC_CONFIG","correctInelastic","setAsTrigger","v","collisionResponse","_body","updateHasTrigger","setCenter","_setCenter","setAttachedBody","_sharedBody","wrappedBody","body","reference","instance","physicsWorld","getSharedBody","node","_collider","getAABB","copy","worldRotation","calculateWorldAABB","ZERO","subtract","halfExtents","multiplyScalar","add","center","worldPosition","getBoundingSphere","radius","boundingSphereRadius","initialize","comp","onComponentSet","addEventListener","onLoad","sharedMaterial","isTrigger","onEnable","addShape","enabled","onDisable","removeShape","onDestroy","removeEventListener","World","idToShapeMap","getGroup","collisionFilterGroup","setGroup","isAwake","wakeUp","addGroup","removeGroup","getMask","collisionFilterMask","setMask","addMask","removeMask","setScale","scale","setIndex","index","setOffsetAndOrient","offset","orient","lpos","multiply","worldScale","event","self","selfShape","other","otherShape","collider","needTriggerEvent","emit","rigidBody"],"mappings":"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"}