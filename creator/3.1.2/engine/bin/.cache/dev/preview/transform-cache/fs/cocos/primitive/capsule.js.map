{"version":3,"sources":["../../../../../../../../cocos/primitive/capsule.ts"],"names":["capsule","radiusTop","radiusBottom","height","opts","torsoHeight","sides","heightSegments","bottomProp","torProp","topProp","bottomSegments","Math","floor","topSegments","torSegments","topOffset","torOffset","bottomOffset","arc","PI","positions","normals","uvs","indices","maxRadius","max","minPos","Vec3","maxPos","boundingRadius","index","indexArray","generateBottom","generateTorso","generateTop","slope","y","indexRow","lat","radius","x","u","v","theta","sinTheta","sin","cosTheta","cos","push","normalize","temp1","set","temp2","z","i1","i2","i3","i4","lon","phi","sinPhi","cosPhi","seg1","a","b","c","d"],"mappings":";;;;;AAyDe,WAASA,OAAT,CAAkBC,SAAlB,EAAmCC,YAAnC,EAAuDC,MAAvD,EAAmEC,IAAnE,EAAiH;AAAA,QAA/FH,SAA+F;AAA/FA,MAAAA,SAA+F,GAAnF,GAAmF;AAAA;;AAAA,QAA9EC,YAA8E;AAA9EA,MAAAA,YAA8E,GAA/D,GAA+D;AAAA;;AAAA,QAA1DC,MAA0D;AAA1DA,MAAAA,MAA0D,GAAjD,CAAiD;AAAA;;AAAA,QAA9CC,IAA8C;AAA9CA,MAAAA,IAA8C,GAAJ,EAAI;AAAA;;AAC5H,QAAMC,WAAW,GAAGF,MAAM,GAAGF,SAAT,GAAqBC,YAAzC;AACA,QAAMI,KAAK,GAAGF,IAAI,CAACE,KAAL,IAAc,EAA5B;AACA,QAAMC,cAAc,GAAGH,IAAI,CAACG,cAAL,IAAuB,EAA9C;AACA,QAAMC,UAAU,GAAGN,YAAY,GAAGC,MAAlC;AACA,QAAMM,OAAO,GAAGJ,WAAW,GAAGF,MAA9B;AACA,QAAMO,OAAO,GAAGT,SAAS,GAAGE,MAA5B;AACA,QAAMQ,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWN,cAAc,GAAGC,UAA5B,CAAvB;AACA,QAAMM,WAAW,GAAGF,IAAI,CAACC,KAAL,CAAWN,cAAc,GAAGG,OAA5B,CAApB;AACA,QAAMK,WAAW,GAAGH,IAAI,CAACC,KAAL,CAAWN,cAAc,GAAGE,OAA5B,CAApB;AACA,QAAMO,SAAS,GAAGX,WAAW,GAAGH,YAAd,GAA6BC,MAAM,GAAG,CAAxD;AACA,QAAMc,SAAS,GAAGf,YAAY,GAAGC,MAAM,GAAG,CAA1C;AACA,QAAMe,YAAY,GAAGhB,YAAY,GAAGC,MAAM,GAAG,CAA7C;AAEA,QAAMgB,GAAG,GAAGf,IAAI,CAACe,GAAL,IAAY,MAAMP,IAAI,CAACQ,EAAnC,CAd4H,CAgB5H;;AACA,QAAMC,SAAmB,GAAG,EAA5B;AACA,QAAMC,OAAiB,GAAG,EAA1B;AACA,QAAMC,GAAa,GAAG,EAAtB;AACA,QAAMC,OAAiB,GAAG,EAA1B;AACA,QAAMC,SAAS,GAAGb,IAAI,CAACc,GAAL,CAASzB,SAAT,EAAoBC,YAApB,CAAlB;AACA,QAAMyB,MAAM,GAAG,IAAIC,IAAJ,CAAS,CAACH,SAAV,EAAqB,CAACtB,MAAD,GAAU,CAA/B,EAAkC,CAACsB,SAAnC,CAAf;AACA,QAAMI,MAAM,GAAG,IAAID,IAAJ,CAASH,SAAT,EAAoBtB,MAAM,GAAG,CAA7B,EAAgCsB,SAAhC,CAAf;AACA,QAAMK,cAAc,GAAG3B,MAAM,GAAG,CAAhC;AAEA,QAAI4B,KAAK,GAAG,CAAZ;AACA,QAAMC,UAAsB,GAAG,EAA/B;AAEAC,IAAAA,cAAc;AAEdC,IAAAA,aAAa;AAEbC,IAAAA,WAAW;AAEX,WAAO;AACHd,MAAAA,SAAS,EAATA,SADG;AAEHC,MAAAA,OAAO,EAAPA,OAFG;AAGHC,MAAAA,GAAG,EAAHA,GAHG;AAIHC,MAAAA,OAAO,EAAPA,OAJG;AAKHG,MAAAA,MAAM,EAANA,MALG;AAMHE,MAAAA,MAAM,EAANA,MANG;AAOHC,MAAAA,cAAc,EAAdA;AAPG,KAAP,CAnC4H,CA6C5H;AACA;AACA;;AAEA,aAASI,aAAT,GAA0B;AAC1B;AACI,UAAME,KAAK,GAAG,CAACnC,SAAS,GAAGC,YAAb,IAA6BG,WAA3C,CAFsB,CAItB;;AACA,WAAK,IAAIgC,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAItB,WAArB,EAAkCsB,CAAC,EAAnC,EAAuC;AACnC,YAAMC,QAAkB,GAAG,EAA3B;AACA,YAAMC,GAAG,GAAGF,CAAC,GAAGtB,WAAhB;AACA,YAAMyB,MAAM,GAAGD,GAAG,IAAItC,SAAS,GAAGC,YAAhB,CAAH,GAAmCA,YAAlD;;AAEA,aAAK,IAAIuC,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAInC,KAArB,EAA4B,EAAEmC,CAA9B,EAAiC;AAC7B,cAAMC,CAAC,GAAGD,CAAC,GAAGnC,KAAd;AACA,cAAMqC,CAAC,GAAGJ,GAAG,GAAG9B,OAAN,GAAgBD,UAA1B;AACA,cAAMoC,KAAK,GAAGF,CAAC,GAAGvB,GAAJ,GAAWA,GAAG,GAAG,CAA/B;AAEA,cAAM0B,QAAQ,GAAGjC,IAAI,CAACkC,GAAL,CAASF,KAAT,CAAjB;AACA,cAAMG,QAAQ,GAAGnC,IAAI,CAACoC,GAAL,CAASJ,KAAT,CAAjB,CAN6B,CAQ7B;;AACAvB,UAAAA,SAAS,CAAC4B,IAAV,CAAeT,MAAM,GAAGK,QAAxB;AACAxB,UAAAA,SAAS,CAAC4B,IAAV,CAAeV,GAAG,GAAGlC,WAAN,GAAoBY,SAAnC;AACAI,UAAAA,SAAS,CAAC4B,IAAV,CAAeT,MAAM,GAAGO,QAAxB,EAX6B,CAa7B;;AACAnB,UAAAA,IAAI,CAACsB,SAAL,CAAeC,KAAf,EAAsBvB,IAAI,CAACwB,GAAL,CAASC,KAAT,EAAgBR,QAAhB,EAA0B,CAACT,KAA3B,EAAkCW,QAAlC,CAAtB;AACAzB,UAAAA,OAAO,CAAC2B,IAAR,CAAaE,KAAK,CAACV,CAAnB;AACAnB,UAAAA,OAAO,CAAC2B,IAAR,CAAaE,KAAK,CAACd,CAAnB;AACAf,UAAAA,OAAO,CAAC2B,IAAR,CAAaE,KAAK,CAACG,CAAnB,EAjB6B,CAmB7B;;AACA/B,UAAAA,GAAG,CAAC0B,IAAJ,CAASP,CAAT,EAAYC,CAAZ,EApB6B,CAqB7B;;AACAL,UAAAA,QAAQ,CAACW,IAAT,CAAclB,KAAd,EAtB6B,CAwB7B;;AACA,YAAEA,KAAF;AACH,SA/BkC,CAiCnC;;;AACAC,QAAAA,UAAU,CAACiB,IAAX,CAAgBX,QAAhB;AACH,OAxCqB,CA0CtB;;;AACA,WAAK,IAAID,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGtB,WAApB,EAAiC,EAAEsB,EAAnC,EAAsC;AAClC,aAAK,IAAII,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGnC,KAApB,EAA2B,EAAEmC,EAA7B,EAAgC;AAC5B;AACA,cAAMc,EAAE,GAAGvB,UAAU,CAACK,EAAD,CAAV,CAAcI,EAAd,CAAX;AACA,cAAMe,EAAE,GAAGxB,UAAU,CAACK,EAAC,GAAG,CAAL,CAAV,CAAkBI,EAAlB,CAAX;AACA,cAAMgB,EAAE,GAAGzB,UAAU,CAACK,EAAC,GAAG,CAAL,CAAV,CAAkBI,EAAC,GAAG,CAAtB,CAAX;AACA,cAAMiB,EAAE,GAAG1B,UAAU,CAACK,EAAD,CAAV,CAAcI,EAAC,GAAG,CAAlB,CAAX,CAL4B,CAO5B;;AACAjB,UAAAA,OAAO,CAACyB,IAAR,CAAaM,EAAb;AACA/B,UAAAA,OAAO,CAACyB,IAAR,CAAaS,EAAb;AACAlC,UAAAA,OAAO,CAACyB,IAAR,CAAaO,EAAb,EAV4B,CAY5B;;AACAhC,UAAAA,OAAO,CAACyB,IAAR,CAAaS,EAAb;AACAlC,UAAAA,OAAO,CAACyB,IAAR,CAAaQ,EAAb;AACAjC,UAAAA,OAAO,CAACyB,IAAR,CAAaO,EAAb;AACH;AACJ;AACJ;;AAED,aAASvB,cAAT,GAA2B;AACvB,WAAK,IAAIM,GAAG,GAAG,CAAf,EAAkBA,GAAG,IAAI5B,cAAzB,EAAyC,EAAE4B,GAA3C,EAAgD;AAC5C,YAAMK,KAAK,GAAGL,GAAG,GAAG3B,IAAI,CAACQ,EAAX,GAAgBT,cAAhB,GAAiC,CAA/C;AACA,YAAMkC,QAAQ,GAAGjC,IAAI,CAACkC,GAAL,CAASF,KAAT,CAAjB;AACA,YAAMG,QAAQ,GAAG,CAACnC,IAAI,CAACoC,GAAL,CAASJ,KAAT,CAAlB;;AAEA,aAAK,IAAIe,GAAG,GAAG,CAAf,EAAkBA,GAAG,IAAIrD,KAAzB,EAAgC,EAAEqD,GAAlC,EAAuC;AACnC,cAAMC,GAAG,GAAGD,GAAG,GAAG,CAAN,GAAU/C,IAAI,CAACQ,EAAf,GAAoBd,KAApB,GAA4BM,IAAI,CAACQ,EAAL,GAAU,GAAlD;AACA,cAAMyC,MAAM,GAAGjD,IAAI,CAACkC,GAAL,CAASc,GAAT,CAAf;AACA,cAAME,MAAM,GAAGlD,IAAI,CAACoC,GAAL,CAASY,GAAT,CAAf;AAEA,cAAMnB,CAAC,GAAGoB,MAAM,GAAGhB,QAAnB;AACA,cAAMR,CAAC,GAAGU,QAAV;AACA,cAAMO,CAAC,GAAGQ,MAAM,GAAGjB,QAAnB;AACA,cAAMH,CAAC,GAAGiB,GAAG,GAAGrD,KAAhB;AACA,cAAMqC,CAAC,GAAGJ,GAAG,GAAGhC,cAAhB;AAEAc,UAAAA,SAAS,CAAC4B,IAAV,CAAeR,CAAC,GAAGvC,YAAnB,EAAiCmC,CAAC,GAAGnC,YAAJ,GAAmBgB,YAApD,EAAkEoC,CAAC,GAAGpD,YAAtE;AACAoB,UAAAA,OAAO,CAAC2B,IAAR,CAAaR,CAAb,EAAgBJ,CAAhB,EAAmBiB,CAAnB;AACA/B,UAAAA,GAAG,CAAC0B,IAAJ,CAASP,CAAT,EAAYC,CAAZ;;AAEA,cAAKJ,GAAG,GAAG5B,cAAP,IAA2BgD,GAAG,GAAGrD,KAArC,EAA6C;AACzC,gBAAMyD,IAAI,GAAGzD,KAAK,GAAG,CAArB;AACA,gBAAM0D,CAAC,GAAGD,IAAI,GAAGxB,GAAP,GAAaoB,GAAvB;AACA,gBAAMM,CAAC,GAAGF,IAAI,IAAIxB,GAAG,GAAG,CAAV,CAAJ,GAAmBoB,GAA7B;AACA,gBAAMO,CAAC,GAAGH,IAAI,IAAIxB,GAAG,GAAG,CAAV,CAAJ,GAAmBoB,GAAnB,GAAyB,CAAnC;AACA,gBAAMQ,CAAC,GAAGJ,IAAI,GAAGxB,GAAP,GAAaoB,GAAb,GAAmB,CAA7B;AAEAnC,YAAAA,OAAO,CAACyB,IAAR,CAAae,CAAb,EAAgBG,CAAhB,EAAmBF,CAAnB;AACAzC,YAAAA,OAAO,CAACyB,IAAR,CAAakB,CAAb,EAAgBD,CAAhB,EAAmBD,CAAnB;AACH;;AAED,YAAElC,KAAF;AACH;AACJ;AACJ;;AAED,aAASI,WAAT,GAAwB;AACpB,WAAK,IAAII,GAAG,GAAG,CAAf,EAAkBA,GAAG,IAAIzB,WAAzB,EAAsC,EAAEyB,GAAxC,EAA6C;AACzC,YAAMK,KAAK,GAAGL,GAAG,GAAG3B,IAAI,CAACQ,EAAX,GAAgBN,WAAhB,GAA8B,CAA9B,GAAkCF,IAAI,CAACQ,EAAL,GAAU,CAA1D;AACA,YAAMyB,QAAQ,GAAGjC,IAAI,CAACkC,GAAL,CAASF,KAAT,CAAjB;AACA,YAAMG,QAAQ,GAAG,CAACnC,IAAI,CAACoC,GAAL,CAASJ,KAAT,CAAlB;;AAEA,aAAK,IAAIe,GAAG,GAAG,CAAf,EAAkBA,GAAG,IAAIrD,KAAzB,EAAgC,EAAEqD,GAAlC,EAAuC;AACnC,cAAMC,GAAG,GAAGD,GAAG,GAAG,CAAN,GAAU/C,IAAI,CAACQ,EAAf,GAAoBd,KAApB,GAA4BM,IAAI,CAACQ,EAAL,GAAU,GAAlD;AACA,cAAMyC,MAAM,GAAGjD,IAAI,CAACkC,GAAL,CAASc,GAAT,CAAf;AACA,cAAME,MAAM,GAAGlD,IAAI,CAACoC,GAAL,CAASY,GAAT,CAAf;AAEA,cAAMnB,CAAC,GAAGoB,MAAM,GAAGhB,QAAnB;AACA,cAAMR,CAAC,GAAGU,QAAV;AACA,cAAMO,CAAC,GAAGQ,MAAM,GAAGjB,QAAnB;AACA,cAAMH,CAAC,GAAGiB,GAAG,GAAGrD,KAAhB;AACA,cAAMqC,CAAC,GAAGJ,GAAG,GAAGhC,cAAN,IAAwB,IAAIG,OAA5B,CAAV;AAEAW,UAAAA,SAAS,CAAC4B,IAAV,CAAeR,CAAC,GAAGxC,SAAnB,EAA8BoC,CAAC,GAAGpC,SAAJ,GAAgBe,SAA9C,EAAyDsC,CAAC,GAAGrD,SAA7D;AACAqB,UAAAA,OAAO,CAAC2B,IAAR,CAAaR,CAAb,EAAgBJ,CAAhB,EAAmBiB,CAAnB;AACA/B,UAAAA,GAAG,CAAC0B,IAAJ,CAASP,CAAT,EAAYC,CAAZ;;AAEA,cAAKJ,GAAG,GAAGzB,WAAP,IAAwB6C,GAAG,GAAGrD,KAAlC,EAA0C;AACtC,gBAAMyD,IAAI,GAAGzD,KAAK,GAAG,CAArB;AACA,gBAAM0D,CAAC,GAAGD,IAAI,GAAGxB,GAAP,GAAaoB,GAAb,GAAmB3B,UAAU,CAACjB,WAAD,CAAV,CAAwBT,KAAxB,CAAnB,GAAoD,CAA9D;AACA,gBAAM2D,CAAC,GAAGF,IAAI,IAAIxB,GAAG,GAAG,CAAV,CAAJ,GAAmBoB,GAAnB,GAAyB3B,UAAU,CAACjB,WAAD,CAAV,CAAwBT,KAAxB,CAAzB,GAA0D,CAApE;AACA,gBAAM4D,CAAC,GAAGH,IAAI,IAAIxB,GAAG,GAAG,CAAV,CAAJ,GAAmBoB,GAAnB,GAAyB,CAAzB,GAA6B3B,UAAU,CAACjB,WAAD,CAAV,CAAwBT,KAAxB,CAA7B,GAA8D,CAAxE;AACA,gBAAM6D,CAAC,GAAGJ,IAAI,GAAGxB,GAAP,GAAaoB,GAAb,GAAmB,CAAnB,GAAuB3B,UAAU,CAACjB,WAAD,CAAV,CAAwBT,KAAxB,CAAvB,GAAwD,CAAlE;AAEAkB,YAAAA,OAAO,CAACyB,IAAR,CAAae,CAAb,EAAgBG,CAAhB,EAAmBF,CAAnB;AACAzC,YAAAA,OAAO,CAACyB,IAAR,CAAakB,CAAb,EAAgBD,CAAhB,EAAmBD,CAAnB;AACH;AACJ;AACJ;AACJ;AACJ;;qBAxLuBjE,O;;;;AA3Bf4B,MAAAA,I,oBAAAA,I;;;AA9BT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAiBMuB,MAAAA,K,GAAQ,IAAIvB,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,C;AACRyB,MAAAA,K,GAAQ,IAAIzB,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,C;AAEd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}