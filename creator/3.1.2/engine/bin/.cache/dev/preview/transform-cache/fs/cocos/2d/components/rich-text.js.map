{"version":3,"sources":["../../../../../../../../../cocos/2d/components/rich-text.ts"],"names":["createSegment","type","node","Node","comp","lineCount","styleIndex","imageOffset","clickParam","clickHandler","getSegmentByPool","content","seg","RichTextChildName","labelPool","_get","RichTextChildImageName","imagePool","hideFlags","CCObject","Flags","DontSave","HideInHierarchy","getComponent","Sprite","addComponent","spriteFrame","Type","SLICED","sizeMode","SizeMode","CUSTOM","Label","string","horizontalAlign","HorizontalTextAlignment","LEFT","verticalAlign","VerticalTextAlignment","TOP","setPosition","trans","_uiProps","uiTransformComp","setAnchorPoint","ccclass","executeInEditMode","executionOrder","help","menu","tooltip","multiline","serializable","DEV","EDITOR","Font","SpriteAtlas","TTFFont","assert","SystemEventType","warnID","BASELINE_RATIO","fragmentText","isUnicodeCJK","isUnicodeSpace","HtmlTextParser","Pool","Color","CacheMode","LabelOutline","UIComponent","UITransform","legacyCC","Component","assetManager","_htmlTextParser","parent","isValid","outline","width","RichText","_textArray","_segments","_labelSegmentsCache","_linesWidth","_lineCount","_labelWidth","_labelHeight","_layoutDirty","_lineOffsetX","_updateRichTextStatus","_userDefinedFont","_updateRichText","onLoad","on","LAYER_CHANGED","_applyLayer","onEnable","handleTouchEvent","_addEventListeners","_activateChildren","onDisable","_removeEventListeners","start","_onTTFLoaded","EventType","ANCHOR_CHANGED","_updateRichTextPosition","onRestore","enabledInHierarchy","onDestroy","removeFromParent","put","off","TOUCH_END","_onTouchEnded","_updateLabelSegmentTextAttributes","forEach","item","_applyTextAttribute","_createFontLabel","str","_createImage","_font","_nativeAsset","postLoadNative","err","_measureText","func","s","label","length","push","labelSize","contentSize","event","components","getComponents","_containsTouchLocation","touch","getUILocation","component","call","propagationStopped","point","myRect","getBoundingBoxToWorld","contains","_resetState","children","i","child","name","splice","segment","active","_addLabelSegment","stringToken","labelSegment","pop","layer","addChild","_updateRichTextWithMaxWidth","labelString","labelWidth","fragmentWidth","_maxWidth","checkStartIndex","checkEndIndex","_getFirstWordLen","checkString","substr","checkStringWidth","remainingString","_updateLineInfo","fragments","k","splitString","_isLastComponentCR","lastIndexOf","_needsUpdateTextLayout","newTextArray","oldItem","newItem","text","oldStyle","style","newStyle","size","italic","isImage","src","imageAlign","imageHeight","imageWidth","_addRichTextImageElement","richTextElement","spriteFrameName","_imageAtlas","getSpriteFrame","sprite","spriteRect","rect","clone","scaleFactor","spriteWidth","spriteHeight","height","expectWidth","expectHeight","_lineHeight","setContentSize","click","param","parse","_string","slice","lastEmptyLine","undefined","isNewLine","multilineTexts","split","j","startIndex","textLen","character","charAt","len","index","nextTokenX","nextLineIndex","totalLineCount","anchorX","anchorY","lineOffsetX","_horizontalAlign","CENTER","RIGHT","pos","position","z","lineHeightSet","lineHeightReal","y","offsets","offsetY","parseFloat","Number","isInteger","offsetX","x","_convertLiteralColorValue","color","colorValue","toUpperCase","colorUse","out","fromHEX","labelSeg","textStyle","isBold","bold","isItalic","isUnderline","underline","labelOutline","fontSize","_fontSize","cacheMode","_cacheMode","isAsset","_isSystemFontUsed","font","fontFamily","_fontFamily","useSystemFont","lineHeight","updateRenderData","assembler","_assembler","value","_handleTouchEvent","HorizontalAlign","VerticalAlign","NONE"],"mappings":"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"}