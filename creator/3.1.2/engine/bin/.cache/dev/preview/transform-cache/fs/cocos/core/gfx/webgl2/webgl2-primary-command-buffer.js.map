{"version":3,"sources":["../../../../../../../../../../cocos/core/gfx/webgl2/webgl2-primary-command-buffer.ts"],"names":["BufferUsageBit","WebGL2CommandBuffer","WebGL2CmdFuncBeginRenderPass","WebGL2CmdFuncBindStates","WebGL2CmdFuncCopyBuffersToTexture","WebGL2CmdFuncDraw","WebGL2CmdFuncExecuteCmds","WebGL2CmdFuncUpdateBuffer","WebGL2PrimaryCommandBuffer","beginRenderPass","renderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","_device","gpuRenderPass","gpuFramebuffer","_isInRenderPass","draw","info","_isStateInvalied","bindStates","_numDrawCalls","_numInstances","instanceCount","indexCount","vertexCount","_curGPUPipelineState","glPrimitive","_numTris","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","buffSize","undefined","usage","INDIRECT","byteLength","copyBuffersToTexture","buffers","texture","regions","gpuTexture","execute","cmdBuffs","count","i","webGL2CmdBuff","cmdPackage","_curGPUInputAssembler","_curGPUDescriptorSets","_curDynamicOffsets","_curDynamicStates"],"mappings":"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"}