{"version":3,"sources":["../../../../../../../../../../cocos/core/renderer/scene/light.ts"],"names":["ColorTemperatureToRGB","rgb","kelvin","kSqr","u","v","d","x","y","z","X","Z","Vec3","TransformBit","NULL_HANDLE","LightPool","LightView","LightType","nt2lm","size","Math","PI","Light","_baked","_color","_colorTemp","_colorTempRGB","_scene","_node","_name","_handle","initialize","alloc","setVec3","COLOR","COLOR_TEMPERATURE_RGB","set","TYPE","UNKNOWN","attachToScene","scene","detachFromScene","destroy","free","update","val","color","get","USE_COLOR_TEMPERATURE","enable","n","hasChangedFlags","ROTATION","NODE","handle"],"mappings":"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"}