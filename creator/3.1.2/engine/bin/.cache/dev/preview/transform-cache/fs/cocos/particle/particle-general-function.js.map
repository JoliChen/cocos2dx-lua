{"version":3,"sources":["../../../../../../../../cocos/particle/particle-general-function.ts"],"names":["calculateTransform","systemSpace","moduleSpace","worldTransform","outQuat","Space","World","Mat4","getRotation","invert","Quat","set","fixedAngleUnitVector2","out","theta","Vec2","Math","cos","sin","randomUnitVector2","a","randomRange","PI","x","y","randomUnitVector","z","r","sqrt","Vec3","randomPointInUnitSphere","multiplyScalar","random","randomPointBetweenSphere","minRadius","maxRadius","randomPointInUnitCircle","randomPointBetweenCircle","randomPointBetweenCircleAtFixedAngle","randomPointInCube","extents","randomPointBetweenCube","minBox","maxBox","subscript","edge","randomRangeInt","i","randomSortArray","arr","length","transpose","val","randomSign","sgn","sign","particleEmitZAxis"],"mappings":"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"}