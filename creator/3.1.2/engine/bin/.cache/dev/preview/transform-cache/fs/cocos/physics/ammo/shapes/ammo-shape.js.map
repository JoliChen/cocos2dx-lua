{"version":3,"sources":["../../../../../../../../../../cocos/physics/ammo/shapes/ammo-shape.ts"],"names":["Ammo","Vec3","Quat","PhysicsSystem","AmmoBroadphaseNativeTypes","EAmmoSharedBodyDirty","cocos2AmmoVec3","ammoDeletePtr","cocos2AmmoQuat","AmmoConstant","CC_V3_0","v3_0","AmmoShape","updateEventListener","setMaterial","v","_isTrigger","_isEnabled","_btCompound","_index","friction","restitution","rollingFriction","spinningFriction","_sharedBody","body","setFriction","setRestitution","setRollingFriction","setSpinningFriction","setUserIndex2","setCenter","copy","multiply","_collider","node","worldScale","transform","getOrigin","updateCompoundTransform","setAsTrigger","removeShape","addShape","type","id","_isBinding","quat","scale","idCounter","btQuaternion","btTransform","setIdentity","btVector3","getAABB","TRANS","instance","TRANSFORM","setRotation","QUAT_0","worldRotation","MIN","VECTOR3_0","MAX","VECTOR3_1","_btShape","getAabb","halfExtents","set","x","y","z","add","center","worldPosition","getBoundingSphere","radius","getLocalBoundingSphere","initialize","com","physicsWorld","getSharedBody","reference","onComponentSet","setWrapper","onLoad","isTrigger","onEnable","collider","sharedMaterial","onDisable","onDestroy","shape","castObject","btCollisionShape","wrapped","destroy","EMPTY_SHAPE","updateByReAdd","getGroup","collisionFilterGroup","setGroup","addGroup","removeGroup","getMask","collisionFilterMask","setMask","addMask","removeMask","setCompound","compound","removeChildShape","getNumChildShapes","addChildShape","setScale","updateChildTransform","index","bodyStruct","useCompound","dirty","BODY_RE_ADD","needCompound","TERRAIN_SHAPE_PROXYTYPE","equals","ZERO","debugTransform","n","_debugTransform","wt","ghost","getWorldTransform","lt","op_mul","origin","rotation","getRotation","w","impl","getLocalScaling","wrappedBody","rigidBody"],"mappings":"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"}