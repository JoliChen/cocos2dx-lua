{"version":3,"sources":["../../../../../../../../../cocos/2d/renderer/batcher-2d.ts"],"names":["Material","DescriptorSetInfo","BufferInfo","BufferUsageBit","MemoryUsageBit","Pool","RecyclePool","CachedArray","MeshBuffer","Stage","StencilManager","DrawBatch2D","VertexFormat","legacyCC","DSPool","SubModelPool","SubModelView","ModelLocalBindings","UBOLocal","sys","Mat4","_dsInfo","m4_1","Batcher2D","acquireBufferBatch","attributes","vfmtPosUvColor","strideBytes","getAttributeStride","_currMeshBuffer","vertexFormatBytes","_requireBufferBatch","registerCustomBuffer","callback","batch","_bufferBatchPool","add","initialize","_recreateMeshBuffer","bind","buffers","_customMeshBuffers","get","set","push","unRegisterCustomBuffer","buffer","i","length","splice","_root","device","_screens","_drawBatchPool","_meshBuffers","Map","_meshBufferUseCount","_batches","_doUploadBuffersCall","_emptyMaterial","_currScene","_currMaterial","_currTexture","_currSampler","_currStaticRoot","_currComponent","_currTransform","_currTextureHash","_currSamplerHash","_currBlendTargetHash","_currLayer","_currDepthStencilStateStage","_currIsStatic","_descriptorSetCache","DescriptorSetCache","destroy","array","keys","size","forEach","obj","clear","sharedManager","addScreen","comp","sort","_screenSort","getFirstRenderCamera","node","scene","renderScene","cameras","camera","visibility","layer","removeScreen","idx","indexOf","sortScreens","addUploadBuffersFunc","target","func","removeUploadBuffersFunc","update","screens","screen","enabledInHierarchy","_recursiveScreenNode","batchPriority","model","subModels","j","priority","hDescriptorSet","getDescriptorSet","addBatch","uploadBuffers","calls","value","key","call","bb","reset","customs","isStatic","free","commitComp","frame","assembler","transform","renderComp","texture","samp","textureHash","samplerHash","getGFXTexture","getGFXSampler","getHash","getSamplerHash","_getRenderScene","mat","getRenderMaterial","stencilStage","stage","blendTargetHash","blendHash","depthStencilStateStage","autoMergeBatches","fillBuffers","commitModel","depthStencil","dssHash","ENABLED","DISABLED","getStencilStage","getStencilHash","stamp","director","getTotalFrames","updateTransform","updateUBOs","curDrawBatch","alloc","subModel","visFlags","bufferBatch","sampler","useLocalData","fillPasses","patches","handle","DESCRIPTOR_SET","hInputAssembler","INPUT_ASSEMBLER","commitStaticBatch","concat","drawBatchList","finishMergeBatches","currBufferBatch","hIA","recordBatch","blendState","bsHash","getBlendState","customMaterial","_requireDrawBatch","vertexStart","vertexOffset","indicesStart","indicesOffset","byteStart","byteOffset","__isWebIOS14OrIPadOS14Env","forceMergeBatches","material","flushMaterial","walk","level","len","children","_preProcess","_static","child","_postProcess","render","_uiProps","uiComp","localAlpha","localOpacity","opacity","parent","uiTransformComp","updateAssembler","postUpdateAssembler","_createMeshBuffer","vertexCount","indexCount","meshBufferUseCount","request","a","b","getSiblingIndex","_releaseDescriptorSetCache","releaseDescriptorSetCache","LocalDescriptorSet","_handle","_transform","_textureHash","_samplerHash","_localBuffer","_transformUpdate","root","_localData","Float32Array","COUNT","createBuffer","UNIFORM","TRANSFER_DST","HOST","DEVICE","SIZE","layout","passes","localSetLayout","_descriptorSet","bindBuffer","BINDING","binding","SAMPLER_SPRITE","bindTexture","bindSampler","uploadLocalData","updateLocal","equals","hasChangedFlags","_dirtyFlags","updateWorldTransform","worldMatrix","_mat","toArray","MAT_WORLD_OFFSET","inverseTranspose","MAT_WORLD_IT_OFFSET","_localDescriptorSetCache","_localCachePool","caches","cache","localDs","descriptorSetTextureMap","has","descriptorSet","map","internal"],"mappings":"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"}