{"version":3,"sources":["../../../../../../../../../pal/input/web/mouse.ts"],"names":["EDITOR","TEST","EventTarget","Rect","Vec2","SystemEventType","MouseInputSource","support","_canvas","_eventTarget","_pointLocked","_isPressed","_preMousePos","document","documentElement","onmouseup","undefined","getElementById","console","warn","_registerEvent","_getCanvasRect","canvas","box","getBoundingClientRect","x","y","width","height","_getLocation","event","clientX","clientY","window","addEventListener","_createCallback","MOUSE_DOWN","MOUSE_MOVE","MOUSE_UP","canvasRect","location","wheelSensitivityFactor","inputEvent","type","MOUSE_WHEEL","button","deltaX","deltaY","timestamp","performance","now","movementX","movementY","stopPropagation","preventDefault","emit","_registerPointerLockEvent","lockChangeAlert","pointerLockElement","mozPointerLockElement","eventType","focus","set","target","onDown","cb","on","onMove","onUp","onWheel"],"mappings":"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"}