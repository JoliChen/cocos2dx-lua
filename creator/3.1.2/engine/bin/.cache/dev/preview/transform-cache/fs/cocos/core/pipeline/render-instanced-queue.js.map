{"version":3,"sources":["../../../../../../../../../cocos/core/pipeline/render-instanced-queue.ts"],"names":["PipelineStateManager","DSPool","ShaderPool","SetIndex","RenderInstancedQueue","queue","Set","clear","it","values","res","next","done","value","uploadBuffers","cmdBuff","hasPendingModels","recordCommandBuffer","device","renderPass","instances","pass","bindDescriptorSet","MATERIAL","descriptorSet","lastPSO","b","length","instance","count","shader","get","hShader","pso","getOrCreatePipelineState","ia","bindPipelineState","LOCAL","hDescriptorSet","dynamicOffsets","bindInputAssembler","draw"],"mappings":"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"}