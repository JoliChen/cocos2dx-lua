{"version":3,"sources":["../../../../../../../../../../cocos/2d/assembler/label/ttfUtils.ts"],"names":["SpriteFrame","fragmentText","safeMeasureText","getBaselineOffset","BASELINE_RATIO","Color","Size","Vec2","Rect","HorizontalTextAlignment","Label","LabelOutline","VerticalTextAlignment","LabelShadow","logID","legacyCC","assetManager","dynamicAtlasManager","BlendFactor","Overflow","MAX_SIZE","_BASELINE_OFFSET","_invisibleAlpha","toFixed","_context","_canvas","_texture","_fontDesc","_string","_fontSize","_drawFontsize","_splitStrings","_canvasSize","_lineHeight","_hAlign","_vAlign","_color","_alpha","_fontFamily","_overflow","NONE","_isWrapText","_outlineComp","_outlineColor","BLACK","clone","_shadowComp","_shadowColor","_canvasPadding","_contentSizeExtend","ZERO","_nodeContentSize","_startPosition","_drawUnderlinePos","_drawUnderlineWidth","_underlineThickness","_isBold","_isItalic","_isUnderline","Alignment","ttfUtils","getAssemblerData","sharedLabelData","_canvasPool","get","resetAssemblerData","assemblerData","put","updateRenderData","comp","renderData","vertDirty","trans","node","_uiProps","uiTransformComp","_updateFontFamily","_updateProperties","_calculateLabelFont","_updateLabelDimensions","_resetDynamicAtlas","_updateTexture","updateOpacity","_setCacheAlpha","_calDynamicAtlas","actualFontSize","setContentSize","updateVertexData","updateUvs","markForUpdateRenderData","vData","colorOffset","colorA","opacity","i","useSystemFont","font","_nativeAsset","postLoadNative","err","isValid","fontFamily","context","canvas","spriteFrame","string","toString","fontSize","overflow","width","height","underlineHeight","lineHeight","horizontalAlign","verticalAlign","color","isBold","isItalic","isUnderline","RESIZE_HEIGHT","enableWrapText","getComponent","enabled","set","_updatePaddingRect","top","bottom","left","right","outlineWidth","shadowWidth","blur","offsetX","offset","x","offsetY","y","Math","max","tan","_calculateFillTextStartPosition","labelX","RIGHT","CENTER","_getLineHeight","drawStartY","length","firstLinelabelY","TOP","blank","BOTTOM","clearRect","lineJoin","_srcBlendFactor","SRC_ALPHA","fillStyle","r","g","b","fillRect","drawTextPosX","drawTextPosY","_drawTextEffect","strokeText","fillText","shadowColor","tex","texture","uploadAgain","reset","mipmapLevel","uploadData","rect","_calculateUV","director","root","batcher2D","_releaseDescriptorSetCache","getHash","cacheMode","CacheMode","BITMAP","frame","ttfSpriteFrame","deleteAtlasSpriteFrame","_resetDynamicAtlasFrame","packToDynamicAtlas","uvDirty","_setupOutline","strokeStyle","a","lineWidth","_setupShadow","shadowBlur","shadowOffsetX","shadowOffsetY","startPosition","isMultiple","measureText","_measureText","min","recreate","textAlign","textBaseline","_getFontDesc","fontDesc","nodeSpacingY","_calculateParagraphLength","paragraphedStrings","ctx","paragraphLength","para","push","_calculateShrinkFont","totalHeight","maxLength","canvasWidthNoMargin","canvasHeightNoMargin","textFragment","mid","allWidth","scaleX","scaleY","_calculateWrapText","concat","split","canvasSizeX","canvasSizeY","paraLength","rawWidth","parseFloat","rawHeight","SHRINK","CLAMP"],"mappings":"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"}