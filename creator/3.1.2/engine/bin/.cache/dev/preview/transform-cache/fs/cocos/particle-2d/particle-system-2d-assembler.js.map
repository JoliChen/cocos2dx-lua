{"version":3,"sources":["../../../../../../../../cocos/particle-2d/particle-system-2d-assembler.ts"],"names":["ParticleSystem2D","MeshRenderData","legacyCC","ParticleAssembler","maxParticleDeltaTime","createData","comp","add","updateRenderData","fillBuffers","renderer","renderData","_simulator","vertexCount","indicesCount","buffer","acquireBufferBatch","vertexOffset","byteOffset","indicesOffset","vertexId","isRecreate","request","currBufferBatch","vBuf","vData","iBuf","iData","vLen","i","iLen","ParticleSystem2DAssembler","getAssembler","game","frameTime","Assembler"],"mappings":";;;;;;AAgCSA,MAAAA,gB,uBAAAA,gB;;AACAC,MAAAA,c,0BAAAA,c;;AAGAC,MAAAA,Q,wBAAAA,Q;;;AApCT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;mCASaC,iB,GAAgC;AACzCC,QAAAA,oBAAoB,EAAE,CADmB;AAEzCC,QAAAA,UAFyC,sBAE7BC,IAF6B,EAEL;AAChC,iBAAOL,cAAc,CAACM,GAAf,EAAP;AACH,SAJwC;AAKzCC,QAAAA,gBALyC,8BAKrB,CACnB,CANwC;AAOzCC,QAAAA,WAPyC,uBAO5BH,IAP4B,EAOJI,QAPI,EAOiB;AACtD,cAAIJ,IAAI,KAAK,IAAb,EAAmB;AACf;AACH;;AAED,cAAMK,UAAU,GAAGL,IAAI,CAACM,UAAL,CAAgBD,UAAnC;;AACA,cAAIA,UAAU,CAACE,WAAX,KAA2B,CAA3B,IAAgCF,UAAU,CAACG,YAAX,KAA4B,CAAhE,EAAmE;AAC/D;AACH;;AAED,cAAIC,MAAM,GAAGL,QAAQ,CAACM,kBAAT,EAAb;AACA,cAAIC,YAAY,GAAGF,MAAM,CAACG,UAAP,IAAqB,CAAxC;AACA,cAAIC,aAAa,GAAGJ,MAAM,CAACI,aAA3B;AACA,cAAIC,QAAQ,GAAGL,MAAM,CAACE,YAAtB;AACA,cAAMI,UAAU,GAAGN,MAAM,CAACO,OAAP,CAAeX,UAAU,CAACE,WAA1B,EAAuCF,UAAU,CAACG,YAAlD,CAAnB;;AACA,cAAI,CAACO,UAAL,EAAiB;AACbN,YAAAA,MAAM,GAAGL,QAAQ,CAACa,eAAlB;AACAJ,YAAAA,aAAa,GAAG,CAAhB;AACAC,YAAAA,QAAQ,GAAG,CAAX;AACH,WAnBqD,CAqBtD;;;AACA,cAAMI,IAAI,GAAGT,MAAM,CAACU,KAApB;AACA,cAAMC,IAAI,GAAGX,MAAM,CAACY,KAApB;AAEA,cAAMF,KAAK,GAAGd,UAAU,CAACc,KAAzB;AACA,cAAME,KAAK,GAAGhB,UAAU,CAACgB,KAAzB;AAEA,cAAMC,IAAI,GAAGjB,UAAU,CAACE,WAAX,GAAyB,CAAtC;;AACA,eAAK,IAAIgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAApB,EAA0BC,CAAC,EAA3B,EAA+B;AAC3BL,YAAAA,IAAI,CAACP,YAAY,EAAb,CAAJ,GAAuBQ,KAAK,CAACI,CAAD,CAA5B;AACH;;AAED,cAAMC,IAAI,GAAGnB,UAAU,CAACG,YAAxB;;AACA,eAAK,IAAIe,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGC,IAApB,EAA0BD,EAAC,EAA3B,EAA+B;AAC3BH,YAAAA,IAAI,CAACP,aAAa,EAAd,CAAJ,GAAwBQ,KAAK,CAACE,EAAD,CAAL,GAAWT,QAAnC;AACH;AACJ;AA5CwC,O;;2CA+ChCW,yB,GAA+C;AACxDC,QAAAA,YADwD,wBAC1C1B,IAD0C,EAClB;AAClC,cAAI,CAACH,iBAAiB,CAACC,oBAAvB,EAA6C;AACzCD,YAAAA,iBAAiB,CAACC,oBAAlB,GAAyCF,QAAQ,CAAC+B,IAAT,CAAcC,SAAd,GAA0B,IAA1B,GAAiC,CAA1E;AACH;;AACD,iBAAO/B,iBAAP;AACH;AANuD,O;;AAS5DH,MAAAA,gBAAgB,CAACmC,SAAjB,GAA6BJ,yBAA7B"}