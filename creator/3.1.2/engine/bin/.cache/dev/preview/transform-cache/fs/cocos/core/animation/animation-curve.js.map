{"version":3,"sources":["../../../../../../../../../cocos/core/animation/animation-curve.ts"],"names":["sampleAnimationCurve","curve","sampler","ratio","index","sample","ratios","length","valueBetween","valueAt","computeRatioByType","type","func","easing","errorID","Array","isArray","bezierByTime","quickFindIndex","start","end","eachLength","floorIndex","EPSILON","binarySearch","binarySearchEpsilon","lerp","Quat","ValueType","isLerpable","legacyCC","RatioSampler","_findRatio","currRatioDif","lastRatioDif","canOptimize","i","l","Math","abs","AnimCurve","Bezier","controlPoints","propertyCurveData","duration","types","undefined","_values","_lerp","_duration","_array","values","getCurveType","easingMethod","Linear","easingMethods","map","fill","Object","keys","firstValue","interpolate","selectLerpFx","_arrayLength","hasLerp","value","getNoLerp","from","fromRatio","to","toRatio","dRatio","ratioBetweenFrames","fromVal","toVal","empty","constant","EventInfo","events","add","params","push","makeValueTypeLerpFx","constructor","tempValue","callLerpable","t","dt","makeQuatSlerpFx","slerp","Number"],"mappings":"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"}