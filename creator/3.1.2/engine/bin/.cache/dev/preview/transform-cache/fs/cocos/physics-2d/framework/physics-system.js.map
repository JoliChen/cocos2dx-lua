{"version":3,"sources":["../../../../../../../../../cocos/physics-2d/framework/physics-system.ts"],"names":["initPhysicsSystem","PhysicsSystem2D","PHYSICS_NONE","EDITOR","director","registerSystem","ID","instance","System","Vec2","Director","game","Eventify","createPhysicsWorld","physicsEngineId","CollisionMatrix","ERaycast2DType","PHYSICS_2D_PTM_RATIO","velocityIterations","positionIterations","physicsWorld","collisionMatrix","_enable","_allowSleep","_maxSubSteps","_fixedTimeStep","_autoSimulation","_accumulator","_steping","_gravity","_delayEvents","config","physics","copy","gravity","multiplyScalar","allowSleep","fixedTimeStep","maxSubSteps","autoSimulation","i","bit","parseInt","value","postUpdate","deltaTime","emit","EVENT_BEFORE_PHYSICS","substepIndex","step","events","l","length","event","func","call","target","syncPhysicsToScene","debugDrawFlags","drawDebug","EVENT_AFTER_PHYSICS","_callAfterStep","push","resetAccumulator","time","raycast","p1","p2","type","mask","Closest","testPoint","p","testAABB","rect","v","setAllowSleep","set","setGravity","x","y","once","EVENT_INIT"],"mappings":"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"}