{"version":3,"sources":["../../../../../../../../../cocos/particle/renderer/trail.ts"],"names":["ccclass","tooltip","displayOrder","type","serializable","RenderingSubMesh","director","AttributeName","BufferUsageBit","Format","FormatInfos","MemoryUsageBit","PrimitiveMode","Attribute","IndirectBuffer","BufferInfo","DrawInfo","DRAW_INFO_SIZE","Color","Mat4","Quat","toRadian","Vec3","Pool","scene","CurveRange","GradientRange","Space","TextureMode","TrailMode","legacyCC","PRE_TRIANGLE_INDEX","NEXT_TRIANGLE_INDEX","DIRECTION_THRESHOLD","Math","cos","_temp_trailEle","position","velocity","_temp_quat","_temp_xform","_temp_vec3","_temp_vec3_1","_temp_color","TrailSegment","maxTrailElementNum","start","end","trailElements","push","lifetime","width","direction","color","getElement","idx","length","addElement","splice","newEleLoc","iterateElement","target","f","p","dt","i","count","clear","TrailModule","_minSquaredDistance","_vertSize","_trailNum","_trailLifetime","vbOffset","ibOffset","_trailSegments","_particleTrail","_trailModel","_iaInfo","_iaInfoBuffer","_subMeshData","_vertAttrs","_vbF32","_vbUint32","_iBuffer","_needTransform","_material","ATTR_POSITION","RGB32F","ATTR_TEX_COORD","RGBA32F","ATTR_TEX_COORD1","ATTR_COLOR","RGBA8","a","format","size","Map","onInit","ps","_particleSystem","minParticleDistance","_minParticleDistance","burstCount","psTime","startLifetime","getMax","psRate","rateOverTime","duration","len","bursts","b","getMaxCount","ceil","lifeTime","_enable","enable","onEnable","_attachToScene","onDisable","_detachFromScene","_getRenderScene","addModel","removeModel","destroy","destroySubMeshData","root","destroyModel","obj","play","enabled","trailIter","values","trail","next","done","value","updateRenderData","updateMaterial","getMaterialInstance","processor","_defaultTrailMat","setSubModelMaterial","update","evaluate","_time","space","World","_simulationSpace","Local","node","getWorldMatrix","getWorldRotation","animate","scaledDt","get","alloc","set","lastSeg","transformMat4","copy","_updateTrailElement","squaredDistance","widthFromParticle","x","widthRatio","trailNum","lastSecondTrail","subtract","lastThirdTrail","equals","ZERO","normalize","_checkDirectionReverse","colorFromParticle","colorOvertime","removeParticle","free","keys","trailSeg","indexOffset","textCoordSeg","startSegEle","_fillVertexBuffer","colorOverTrail","segEle","j","y","z","updateIA","subModels","subModel","inputAssembler","vertexBuffers","indexBuffer","drawInfos","firstIndex","indexCount","beforeRender","_createModel","createModel","Model","rebuild","device","vertexBuffer","createBuffer","VERTEX","TRANSFER_DST","HOST","DEVICE","vBuffer","ArrayBuffer","Float32Array","Uint32Array","INDEX","Uint16Array","BYTES_PER_ELEMENT","INDIRECT","vertexCount","TRIANGLE_LIST","trailModel","transform","visFlags","visibility","initSubModel","module","trailEle","multiply","remainingLifetime","colorModifer","xTexCoord","trailEleIdx","indexSet","_val","currElement","prevElement","dot","val","updateTrailMaterial","_space","Particles","Stretch"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AA8BSA,MAAAA,O,8BAAAA,O;AAASC,MAAAA,O,8BAAAA,O;AAASC,MAAAA,Y,8BAAAA,Y;AAAcC,MAAAA,I,8BAAAA,I;AAAMC,MAAAA,Y,8BAAAA,Y;;AAEtCC,MAAAA,gB,iCAAAA,gB;;AACAC,MAAAA,Q,mBAAAA,Q;;AACAC,MAAAA,a,mBAAAA,a;AAAeC,MAAAA,c,mBAAAA,c;AAAgBC,MAAAA,M,mBAAAA,M;AAAQC,MAAAA,W,mBAAAA,W;AAAaC,MAAAA,c,mBAAAA,c;AAAgBC,MAAAA,a,mBAAAA,a;AACjEC,MAAAA,S,mBAAAA,S;AAAmBC,MAAAA,c,mBAAAA,c;AAAgBC,MAAAA,U,mBAAAA,U;AAAYC,MAAAA,Q,mBAAAA,Q;AAAUC,MAAAA,c,mBAAAA,c;;AAC5DC,MAAAA,K,oBAAAA,K;AAAOC,MAAAA,I,oBAAAA,I;AAAMC,MAAAA,I,oBAAAA,I;AAAMC,MAAAA,Q,oBAAAA,Q;AAAUC,MAAAA,I,oBAAAA,I;;AAC7BC,MAAAA,I,qBAAAA,I;;AACAC,MAAAA,K,wBAAAA,K;;AACFC,MAAAA,U;;AACAC,MAAAA,a;;AACEC,MAAAA,K,WAAAA,K;AAAOC,MAAAA,W,WAAAA,W;AAAaC,MAAAA,S,WAAAA,S;;AAEpBC,MAAAA,Q,wBAAAA,Q;;;AAEHC,MAAAA,kB,GAAqB,C;AACrBC,MAAAA,mB,GAAsB,KAAK,C;AAC3BC,MAAAA,mB,GAAsBC,IAAI,CAACC,GAAL,CAASd,QAAQ,CAAC,GAAD,CAAjB,C;AAEtBe,MAAAA,c,GAAiB;AAAEC,QAAAA,QAAQ,EAAE,IAAIf,IAAJ,EAAZ;AAAwBgB,QAAAA,QAAQ,EAAE,IAAIhB,IAAJ;AAAlC,O;AACjBiB,MAAAA,U,GAAa,IAAInB,IAAJ,E;AACboB,MAAAA,W,GAAc,IAAIrB,IAAJ,E;AACdsB,MAAAA,U,GAAa,IAAInB,IAAJ,E;AACboB,MAAAA,Y,GAAe,IAAIpB,IAAJ,E;AACfqB,MAAAA,W,GAAc,IAAIzB,KAAJ,E,EAEpB;AAEA;;AAWA;AACM0B,MAAAA,Y;AAKF,8BAAaC,kBAAb,EAAyC;AAAA,eAJlCC,KAIkC;AAAA,eAHlCC,GAGkC;AAAA,eAFlCC,aAEkC;AACrC,eAAKF,KAAL,GAAa,CAAC,CAAd;AACA,eAAKC,GAAL,GAAW,CAAC,CAAZ;AACA,eAAKC,aAAL,GAAqB,EAArB;;AACA,iBAAOH,kBAAkB,EAAzB,EAA6B;AACzB,iBAAKG,aAAL,CAAmBC,IAAnB,CAAwB;AACpBZ,cAAAA,QAAQ,EAAE,IAAIf,IAAJ,EADU;AAEpB4B,cAAAA,QAAQ,EAAE,CAFU;AAGpBC,cAAAA,KAAK,EAAE,CAHa;AAIpBb,cAAAA,QAAQ,EAAE,IAAIhB,IAAJ,EAJU;AAKpB8B,cAAAA,SAAS,EAAE,CALS;AAMpBC,cAAAA,KAAK,EAAE,IAAInC,KAAJ;AANa,aAAxB;AAQH;AACJ;;;;eAEMoC,U,GAAP,oBAAmBC,GAAnB,EAAgC;AAC5B,cAAI,KAAKT,KAAL,KAAe,CAAC,CAApB,EAAuB;AACnB,mBAAO,IAAP;AACH;;AACD,cAAIS,GAAG,GAAG,CAAV,EAAa;AACTA,YAAAA,GAAG,GAAG,CAACA,GAAG,GAAG,KAAKP,aAAL,CAAmBQ,MAA1B,IAAoC,KAAKR,aAAL,CAAmBQ,MAA7D;AACH;;AACD,cAAID,GAAG,IAAI,KAAKP,aAAL,CAAmBQ,MAA9B,EAAsC;AAClCD,YAAAA,GAAG,IAAI,KAAKP,aAAL,CAAmBQ,MAA1B;AACH;;AACD,iBAAO,KAAKR,aAAL,CAAmBO,GAAnB,CAAP;AACH,S;;eAEME,U,GAAP,sBAA2C;AACvC,cAAI,KAAKT,aAAL,CAAmBQ,MAAnB,KAA8B,CAAlC,EAAqC;AACjC,mBAAO,IAAP;AACH;;AACD,cAAI,KAAKV,KAAL,KAAe,CAAC,CAApB,EAAuB;AACnB,iBAAKA,KAAL,GAAa,CAAb;AACA,iBAAKC,GAAL,GAAW,CAAX;AACA,mBAAO,KAAKC,aAAL,CAAmB,CAAnB,CAAP;AACH;;AACD,cAAI,KAAKF,KAAL,KAAe,KAAKC,GAAxB,EAA6B;AACzB,iBAAKC,aAAL,CAAmBU,MAAnB,CAA0B,KAAKX,GAA/B,EAAoC,CAApC,EAAuC;AACnCV,cAAAA,QAAQ,EAAE,IAAIf,IAAJ,EADyB;AAEnC4B,cAAAA,QAAQ,EAAE,CAFyB;AAGnCC,cAAAA,KAAK,EAAE,CAH4B;AAInCb,cAAAA,QAAQ,EAAE,IAAIhB,IAAJ,EAJyB;AAKnC8B,cAAAA,SAAS,EAAE,CALwB;AAMnCC,cAAAA,KAAK,EAAE,IAAInC,KAAJ;AAN4B,aAAvC;AAQA,iBAAK4B,KAAL;AACA,iBAAKA,KAAL,IAAc,KAAKE,aAAL,CAAmBQ,MAAjC;AACH;;AACD,cAAMG,SAAS,GAAG,KAAKZ,GAAL,EAAlB;AACA,eAAKA,GAAL,IAAY,KAAKC,aAAL,CAAmBQ,MAA/B;AACA,iBAAO,KAAKR,aAAL,CAAmBW,SAAnB,CAAP;AACH,S;;eAEMC,c,GAAP,wBAAuBC,MAAvB,EAA4CC,CAA5C,EAA4HC,CAA5H,EAAyIC,EAAzI,EAAqJ;AACjJ,cAAMjB,GAAG,GAAG,KAAKD,KAAL,IAAc,KAAKC,GAAnB,GAAyB,KAAKA,GAAL,GAAW,KAAKC,aAAL,CAAmBQ,MAAvD,GAAgE,KAAKT,GAAjF;;AACA,eAAK,IAAIkB,CAAC,GAAG,KAAKnB,KAAlB,EAAyBmB,CAAC,GAAGlB,GAA7B,EAAkCkB,CAAC,EAAnC,EAAuC;AACnC,gBAAIH,CAAC,CAACD,MAAD,EAAS,KAAKb,aAAL,CAAmBiB,CAAC,GAAG,KAAKjB,aAAL,CAAmBQ,MAA1C,CAAT,EAA4DO,CAA5D,EAA+DC,EAA/D,CAAL,EAAyE;AACrE,mBAAKlB,KAAL;AACA,mBAAKA,KAAL,IAAc,KAAKE,aAAL,CAAmBQ,MAAjC;AACH;AACJ;;AACD,cAAI,KAAKV,KAAL,KAAeC,GAAnB,EAAwB;AACpB,iBAAKD,KAAL,GAAa,CAAC,CAAd;AACA,iBAAKC,GAAL,GAAW,CAAC,CAAZ;AACH;AACJ,S;;eAEMmB,K,GAAP,iBAAgB;AACZ,cAAI,KAAKpB,KAAL,GAAa,KAAKC,GAAtB,EAA2B;AACvB,mBAAO,KAAKA,GAAL,GAAW,KAAKD,KAAvB;AACH,WAFD,MAEO;AACH,mBAAO,KAAKE,aAAL,CAAmBQ,MAAnB,GAA4B,KAAKT,GAAjC,GAAuC,KAAKD,KAAnD;AACH;AACJ,S;;eAEMqB,K,GAAP,iBAAgB;AACZ,eAAKrB,KAAL,GAAa,CAAC,CAAd;AACA,eAAKC,GAAL,GAAW,CAAC,CAAZ;AACH,S,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;yBAIiBqB,W,WADpBpE,OAAO,CAAC,gBAAD,C,UAKHE,YAAY,CAAC,CAAD,C,UAgCZC,IAAI,CAAC0B,SAAD,C,UAEJ3B,YAAY,CAAC,CAAD,C,UACZD,OAAO,CAAC,wBAAD,C,UAMPE,IAAI,CAACsB,UAAD,C,UAEJvB,YAAY,CAAC,CAAD,C,UACZD,OAAO,CAAC,4BAAD,C,UASPC,YAAY,CAAC,CAAD,C,WACZD,OAAO,CAAC,uCAAD,C,WAUPE,IAAI,CAACwB,KAAD,C,WACJzB,YAAY,CAAC,CAAD,C,WACZD,OAAO,CAAC,yBAAD,C,WAsBPE,IAAI,CAACyB,WAAD,C,WAEJ1B,YAAY,CAAC,CAAD,C,WACZD,OAAO,CAAC,+BAAD,C,WAIPC,YAAY,CAAC,CAAD,C,WACZD,OAAO,CAAC,qCAAD,C,WAMPE,IAAI,CAACsB,UAAD,C,WAEJvB,YAAY,CAAC,EAAD,C,WACZD,OAAO,CAAC,8BAAD,C,WAIPC,YAAY,CAAC,EAAD,C,WACZD,OAAO,CAAC,qCAAD,C,WAGPE,IAAI,CAACuB,aAAD,C,WAEJxB,YAAY,CAAC,EAAD,C,WACZD,OAAO,CAAC,kCAAD,C,WAGPE,IAAI,CAACuB,aAAD,C,WAEJxB,YAAY,CAAC,EAAD,C,WACZD,OAAO,CAAC,iCAAD,C,WAMPE,IAAI,CAACwB,KAAD,C;AAyBL,+BAAe;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAnBP0C,mBAmBO,GAnBe,CAmBf;AAAA,eAlBPC,SAkBO;AAAA,eAjBPC,SAiBO,GAjBK,CAiBL;AAAA,eAhBPC,cAgBO,GAhBU,CAgBV;AAAA,eAfPC,QAeO,GAfI,CAeJ;AAAA,eAdPC,QAcO,GAdI,CAcJ;AAAA,eAbPC,cAaO,GAbqC,IAarC;AAAA,eAZPC,cAYO;AAAA,eAXPC,WAWO,GAX2B,IAW3B;AAAA,eAVPC,OAUO;AAAA,eATPC,aASO,GATwB,IASxB;AAAA,eARPC,YAQO,GARiC,IAQjC;AAAA,eAPPC,UAOO;AAAA,eANPC,MAMO,GANuB,IAMvB;AAAA,eALPC,SAKO,GALyB,IAKzB;AAAA,eAJPC,QAIO,GAJwB,IAIxB;AAAA,eAHPC,cAGO,GAHU,KAGV;AAAA,eAFPC,SAEO,GAFsB,IAEtB;AACX,eAAKR,OAAL,GAAe,IAAIhE,cAAJ,CAAmB,CAAC,IAAIE,QAAJ,EAAD,CAAnB,CAAf;AAEA,eAAKiE,UAAL,GAAkB,CACd,IAAIpE,SAAJ,CAAcN,aAAa,CAACgF,aAA5B,EAA2C9E,MAAM,CAAC+E,MAAlD,CADc,EAC+C;AAC7D,cAAI3E,SAAJ,CAAcN,aAAa,CAACkF,cAA5B,EAA4ChF,MAAM,CAACiF,OAAnD,CAFc,EAE+C;AAC7D;AACA,cAAI7E,SAAJ,CAAcN,aAAa,CAACoF,eAA5B,EAA6ClF,MAAM,CAAC+E,MAApD,CAJc,EAI+C;AAC7D,cAAI3E,SAAJ,CAAcN,aAAa,CAACqF,UAA5B,EAAwCnF,MAAM,CAACoF,KAA/C,EAAsD,IAAtD,CALc,CAAlB;AAOA,eAAKvB,SAAL,GAAiB,CAAjB;;AACA,+DAAgB,KAAKW,UAArB,wCAAiC;AAAA,gBAAtBa,CAAsB;AAC7B,iBAAKxB,SAAL,IAAkB5D,WAAW,CAACoF,CAAC,CAACC,MAAH,CAAX,CAAsBC,IAAxC;AACH;;AAED,eAAKpB,cAAL,GAAsB,IAAIqB,GAAJ,EAAtB;AACH;;;;gBAEMC,M,GAAP,gBAAeC,EAAf,EAAmB;AACf,eAAKC,eAAL,GAAuBD,EAAvB;AACA,eAAKE,mBAAL,GAA2B,KAAKC,oBAAhC;AACA,cAAIC,UAAU,GAAG,CAAjB;AACA,cAAMC,MAAM,GAAGL,EAAE,CAACM,aAAH,CAAiBC,MAAjB,EAAf;AACA,cAAMC,MAAM,GAAGR,EAAE,CAACS,YAAH,CAAgBF,MAAhB,EAAf;AACA,cAAMG,QAAQ,GAAGV,EAAE,CAACU,QAApB;;AACA,eAAK,IAAI5C,CAAC,GAAG,CAAR,EAAW6C,GAAG,GAAGX,EAAE,CAACY,MAAH,CAAUvD,MAAhC,EAAwCS,CAAC,GAAG6C,GAA5C,EAAiD7C,CAAC,EAAlD,EAAsD;AAClD,gBAAM+C,CAAC,GAAGb,EAAE,CAACY,MAAH,CAAU9C,CAAV,CAAV;AACAsC,YAAAA,UAAU,IAAIS,CAAC,CAACC,WAAF,CAAcd,EAAd,IAAoBjE,IAAI,CAACgF,IAAL,CAAUV,MAAM,GAAGK,QAAnB,CAAlC;AACH;;AACD,eAAKtC,SAAL,GAAiBrC,IAAI,CAACgF,IAAL,CAAUV,MAAM,GAAG,KAAKW,QAAL,CAAcT,MAAd,EAAT,GAAkC,EAAlC,IAAwCC,MAAM,GAAGE,QAAT,GAAoBN,UAA5D,CAAV,CAAjB;AACA,eAAK5B,cAAL,GAAsB,IAAIpD,IAAJ,CAAS;AAAA,mBAAM,IAAIqB,YAAJ,CAAiB,EAAjB,CAAN;AAAA,WAAT,EAAqCV,IAAI,CAACgF,IAAL,CAAUP,MAAM,GAAGE,QAAnB,CAArC,CAAtB;;AACA,cAAI,KAAKO,OAAT,EAAkB;AACd,iBAAKC,MAAL,GAAc,KAAKD,OAAnB;AACH;AACJ,S;;gBAEME,Q,GAAP,oBAAmB;AACf,eAAKC,cAAL;AACH,S;;gBAEMC,S,GAAP,qBAAoB;AAChB,eAAK5C,cAAL,CAAoBT,KAApB;;AACA,eAAKsD,gBAAL;AACH,S;;gBAEMF,c,GAAP,0BAAyB;AACrB,cAAI,KAAK1C,WAAT,EAAsB;AAClB,gBAAI,KAAKA,WAAL,CAAiBrD,KAArB,EAA4B;AACxB,mBAAKiG,gBAAL;AACH;;AACD,iBAAKrB,eAAL,CAAqBsB,eAArB,GAAuCC,QAAvC,CAAgD,KAAK9C,WAArD;AACH;AACJ,S;;gBAEM4C,gB,GAAP,4BAA2B;AACvB,cAAI,KAAK5C,WAAL,IAAoB,KAAKA,WAAL,CAAiBrD,KAAzC,EAAgD;AAC5C,iBAAKqD,WAAL,CAAiBrD,KAAjB,CAAuBoG,WAAvB,CAAmC,KAAK/C,WAAxC;AACH;AACJ,S;;gBAEMgD,O,GAAP,mBAAkB;AACd,eAAKC,kBAAL;;AACA,cAAI,KAAKjD,WAAT,EAAsB;AAClBvE,YAAAA,QAAQ,CAACyH,IAAT,CAAeC,YAAf,CAA4B,KAAKnD,WAAjC;AACA,iBAAKA,WAAL,GAAmB,IAAnB;AACH;;AACD,cAAI,KAAKF,cAAT,EAAyB;AACrB,iBAAKA,cAAL,CAAoBkD,OAApB,CAA4B,UAACI,GAAD,EAAuB;AAAEA,cAAAA,GAAG,CAACjF,aAAJ,CAAkBQ,MAAlB,GAA2B,CAA3B;AAA+B,aAApF;;AACA,iBAAKmB,cAAL,GAAsB,IAAtB;AACH;AACJ,S;;gBAEMuD,I,GAAP,gBAAe;AACX,cAAI,KAAKrD,WAAL,IAAoB,KAAKuC,OAA7B,EAAsC;AAClC,iBAAKvC,WAAL,CAAiBsD,OAAjB,GAA2B,IAA3B;AACH;AACJ,S;;gBAEMhE,K,GAAP,iBAAgB;AACZ,cAAI,KAAKkD,MAAT,EAAiB;AACb,gBAAMe,SAAS,GAAG,KAAKxD,cAAL,CAAoByD,MAApB,EAAlB;;AACA,gBAAIC,KAAK,GAAGF,SAAS,CAACG,IAAV,EAAZ;;AACA,mBAAO,CAACD,KAAK,CAACE,IAAd,EAAoB;AAChBF,cAAAA,KAAK,CAACG,KAAN,CAAYtE,KAAZ;AACAmE,cAAAA,KAAK,GAAGF,SAAS,CAACG,IAAV,EAAR;AACH;;AACD,iBAAK3D,cAAL,CAAoBT,KAApB;;AACA,iBAAKuE,gBAAL;AACA,gBAAI,KAAK7D,WAAT,EAAsB,KAAKA,WAAL,CAAiBsD,OAAjB,GAA2B,KAA3B;AACzB;AACJ,S;;gBAEMQ,c,GAAP,0BAAyB;AACrB,cAAI,KAAKvC,eAAT,EAA0B;AACtB,iBAAKd,SAAL,GAAiB,KAAKc,eAAL,CAAqBwC,mBAArB,CAAyC,CAAzC,KAA+C,KAAKxC,eAAL,CAAqByC,SAArB,CAA+BC,gBAA/F;;AACA,gBAAI,KAAKjE,WAAT,EAAsB;AAClB,mBAAKA,WAAL,CAAiBkE,mBAAjB,CAAqC,CAArC,EAAwC,KAAKzD,SAA7C;AACH;AACJ;AACJ,S;;gBAEM0D,M,GAAP,kBAAiB;AACb,eAAKxE,cAAL,GAAsB,KAAK2C,QAAL,CAAc8B,QAAd,CAAuB,KAAK7C,eAAL,CAAqB8C,KAA5C,EAAmD,CAAnD,CAAtB;;AACA,cAAI,KAAKC,KAAL,KAAexH,KAAK,CAACyH,KAArB,IAA8B,KAAKhD,eAAL,CAAqBiD,gBAArB,KAA0C1H,KAAK,CAAC2H,KAAlF,EAAyF;AACrF,iBAAKjE,cAAL,GAAsB,IAAtB;;AACA,iBAAKe,eAAL,CAAqBmD,IAArB,CAA0BC,cAA1B,CAAyChH,WAAzC;;AACA,iBAAK4D,eAAL,CAAqBmD,IAArB,CAA0BE,gBAA1B,CAA2ClH,UAA3C;AACH,WAJD,MAIO;AACH,iBAAK8C,cAAL,GAAsB,KAAtB;AACH;AACJ,S;;gBAEMqE,O,GAAP,iBAAgB3F,CAAhB,EAA6B4F,QAA7B,EAA+C;AAC3C,cAAI,CAAC,KAAKhF,cAAV,EAA0B;AACtB;AACH;;AACD,cAAI2D,KAAK,GAAG,KAAK1D,cAAL,CAAoBgF,GAApB,CAAwB7F,CAAxB,CAAZ;;AACA,cAAI,CAACuE,KAAL,EAAY;AACRA,YAAAA,KAAK,GAAG,KAAK3D,cAAL,CAAoBkF,KAApB,EAAR;;AACA,iBAAKjF,cAAL,CAAoBkF,GAApB,CAAwB/F,CAAxB,EAA2BuE,KAA3B,EAFQ,CAGR;;;AACA;AACH;;AACD,cAAIyB,OAAO,GAAGzB,KAAK,CAAChF,UAAN,CAAiBgF,KAAK,CAACvF,GAAN,GAAY,CAA7B,CAAd;;AACA,cAAI,KAAKsC,cAAT,EAAyB;AACrB/D,YAAAA,IAAI,CAAC0I,aAAL,CAAmBvH,UAAnB,EAA+BsB,CAAC,CAAC1B,QAAjC,EAA2CG,WAA3C;AACH,WAFD,MAEO;AACHlB,YAAAA,IAAI,CAAC2I,IAAL,CAAUxH,UAAV,EAAsBsB,CAAC,CAAC1B,QAAxB;AACH;;AACD,cAAI0H,OAAJ,EAAa;AACTzB,YAAAA,KAAK,CAAC1E,cAAN,CAAqB,IAArB,EAA2B,KAAKsG,mBAAhC,EAAqDnG,CAArD,EAAwD4F,QAAxD;;AACA,gBAAIrI,IAAI,CAAC6I,eAAL,CAAqBJ,OAAO,CAAC1H,QAA7B,EAAuCI,UAAvC,IAAqD,KAAK4B,mBAA9D,EAAmF;AAC/E;AACH;AACJ;;AACD0F,UAAAA,OAAO,GAAGzB,KAAK,CAAC7E,UAAN,EAAV;;AACA,cAAI,CAACsG,OAAL,EAAc;AACV;AACH;;AACDzI,UAAAA,IAAI,CAAC2I,IAAL,CAAUF,OAAO,CAAC1H,QAAlB,EAA4BI,UAA5B;AACAsH,UAAAA,OAAO,CAAC7G,QAAR,GAAmB,CAAnB;;AACA,cAAI,KAAKkH,iBAAT,EAA4B;AACxBL,YAAAA,OAAO,CAAC5G,KAAR,GAAgBY,CAAC,CAACiC,IAAF,CAAOqE,CAAP,GAAW,KAAKC,UAAL,CAAgBrB,QAAhB,CAAyB,CAAzB,EAA4B,CAA5B,CAA3B;AACH,WAFD,MAEO;AACHc,YAAAA,OAAO,CAAC5G,KAAR,GAAgB,KAAKmH,UAAL,CAAgBrB,QAAhB,CAAyB,CAAzB,EAA4B,CAA5B,CAAhB;AACH;;AACD,cAAMsB,QAAQ,GAAGjC,KAAK,CAACpE,KAAN,EAAjB;;AACA,cAAIqG,QAAQ,KAAK,CAAjB,EAAoB;AAChB,gBAAMC,eAAe,GAAGlC,KAAK,CAAChF,UAAN,CAAiBgF,KAAK,CAACvF,GAAN,GAAY,CAA7B,CAAxB;AACAzB,YAAAA,IAAI,CAACmJ,QAAL,CAAcD,eAAe,CAAClI,QAA9B,EAAwCyH,OAAO,CAAC1H,QAAhD,EAA0DmI,eAAe,CAACnI,QAA1E;AACH,WAHD,MAGO,IAAIkI,QAAQ,GAAG,CAAf,EAAkB;AACrB,gBAAMC,gBAAe,GAAGlC,KAAK,CAAChF,UAAN,CAAiBgF,KAAK,CAACvF,GAAN,GAAY,CAA7B,CAAxB;;AACA,gBAAM2H,cAAc,GAAGpC,KAAK,CAAChF,UAAN,CAAiBgF,KAAK,CAACvF,GAAN,GAAY,CAA7B,CAAvB;AACAzB,YAAAA,IAAI,CAACmJ,QAAL,CAAchI,UAAd,EAA0BiI,cAAc,CAACrI,QAAzC,EAAmDmI,gBAAe,CAACnI,QAAnE;AACAf,YAAAA,IAAI,CAACmJ,QAAL,CAAc/H,YAAd,EAA4BqH,OAAO,CAAC1H,QAApC,EAA8CmI,gBAAe,CAACnI,QAA9D;AACAf,YAAAA,IAAI,CAACmJ,QAAL,CAAcD,gBAAe,CAAClI,QAA9B,EAAwCI,YAAxC,EAAsDD,UAAtD;;AACA,gBAAInB,IAAI,CAACqJ,MAAL,CAAYrJ,IAAI,CAACsJ,IAAjB,EAAuBJ,gBAAe,CAAClI,QAAvC,CAAJ,EAAsD;AAClDhB,cAAAA,IAAI,CAAC2I,IAAL,CAAUO,gBAAe,CAAClI,QAA1B,EAAoCG,UAApC;AACH;;AACDnB,YAAAA,IAAI,CAACuJ,SAAL,CAAeL,gBAAe,CAAClI,QAA/B,EAAyCkI,gBAAe,CAAClI,QAAzD;;AACA,iBAAKwI,sBAAL,CAA4BN,gBAA5B,EAA6CE,cAA7C;AACH;;AACD,cAAI,KAAKK,iBAAT,EAA4B;AACxBhB,YAAAA,OAAO,CAAC1G,KAAR,CAAcyG,GAAd,CAAkB/F,CAAC,CAACV,KAApB;AACH,WAFD,MAEO;AACH0G,YAAAA,OAAO,CAAC1G,KAAR,CAAcyG,GAAd,CAAkB,KAAKkB,aAAL,CAAmB/B,QAAnB,CAA4B,CAA5B,EAA+B,CAA/B,CAAlB;AACH;AACJ,S;;gBAEMgC,c,GAAP,wBAAuBlH,CAAvB,EAAoC;AAChC,cAAMuE,KAAK,GAAG,KAAK1D,cAAL,CAAoBgF,GAApB,CAAwB7F,CAAxB,CAAd;;AACA,cAAIuE,KAAK,IAAI,KAAK3D,cAAlB,EAAkC;AAC9B2D,YAAAA,KAAK,CAACnE,KAAN;;AACA,iBAAKQ,cAAL,CAAoBuG,IAApB,CAAyB5C,KAAzB;;AACA,iBAAK1D,cAAL,WAA2Bb,CAA3B;AACH;AACJ,S;;gBAEM2E,gB,GAAP,4BAA2B;AACvB,eAAKjE,QAAL,GAAgB,CAAhB;AACA,eAAKC,QAAL,GAAgB,CAAhB;;AACA,gEAAgB,KAAKE,cAAL,CAAoBuG,IAApB,EAAhB,2CAA4C;AAAA,gBAAjCpH,CAAiC;;AACxC,gBAAMqH,QAAQ,GAAG,KAAKxG,cAAL,CAAoBgF,GAApB,CAAwB7F,CAAxB,CAAjB;;AACA,gBAAIqH,QAAQ,CAACtI,KAAT,KAAmB,CAAC,CAAxB,EAA2B;AACvB;AACH;;AACD,gBAAMuI,WAAW,GAAG,KAAK5G,QAAL,GAAgB,CAAhB,GAAoB,KAAKH,SAA7C;AACA,gBAAMvB,GAAG,GAAGqI,QAAQ,CAACtI,KAAT,IAAkBsI,QAAQ,CAACrI,GAA3B,GAAiCqI,QAAQ,CAACrI,GAAT,GAAeqI,QAAQ,CAACpI,aAAT,CAAuBQ,MAAvE,GAAgF4H,QAAQ,CAACrI,GAArG;AACA,gBAAMwH,QAAQ,GAAGxH,GAAG,GAAGqI,QAAQ,CAACtI,KAAhC,CAPwC,CAQxC;;AACA,gBAAMwI,YAAY,GAAG,IAAKf;AAAS;AAAnC;AACA,gBAAMgB,WAAW,GAAGH,QAAQ,CAACpI,aAAT,CAAuBoI,QAAQ,CAACtI,KAAhC,CAApB;;AACA,iBAAK0I,iBAAL,CAAuBD,WAAvB,EAAoC,KAAKE,cAAL,CAAoBxC,QAApB,CAA6B,CAA7B,EAAgC,CAAhC,CAApC,EAAwEoC,WAAxE,EAAqF,CAArF,EAAwF,CAAxF,EAA2FrJ,mBAA3F;;AACA,iBAAK,IAAIiC,CAAC,GAAGmH,QAAQ,CAACtI,KAAT,GAAiB,CAA9B,EAAiCmB,CAAC,GAAGlB,GAArC,EAA0CkB,CAAC,EAA3C,EAA+C;AAC3C,kBAAMyH,MAAM,GAAGN,QAAQ,CAACpI,aAAT,CAAuBiB,CAAC,GAAGmH,QAAQ,CAACpI,aAAT,CAAuBQ,MAAlD,CAAf;AACA,kBAAMmI,CAAC,GAAG1H,CAAC,GAAGmH,QAAQ,CAACtI,KAAvB;;AACA,mBAAK0I,iBAAL,CAAuBE,MAAvB,EAA+B,KAAKD,cAAL,CAAoBxC,QAApB,CAA6B,IAAI0C,CAAC,GAAGpB,QAArC,EAA+C,CAA/C,CAA/B,EACIc,WADJ,EACiB,IAAIM,CAAC,GAAGL,YADzB,EACuCK,CADvC,EAC0C5J,kBAAkB,GAAGC,mBAD/D;AAEH;;AACD,gBAAI,KAAKqD,cAAT,EAAyB;AACrB/D,cAAAA,IAAI,CAAC0I,aAAL,CAAmB5H,cAAc,CAACC,QAAlC,EAA4C0B,CAAC,CAAC1B,QAA9C,EAAwDG,WAAxD;AACH,aAFD,MAEO;AACHlB,cAAAA,IAAI,CAAC2I,IAAL,CAAU7H,cAAc,CAACC,QAAzB,EAAmC0B,CAAC,CAAC1B,QAArC;AACH;;AACD,gBAAIkI,QAAQ,KAAK,CAAb,IAAkBA,QAAQ,KAAK,CAAnC,EAAsC;AAClC,kBAAMC,eAAe,GAAGY,QAAQ,CAAC9H,UAAT,CAAoB8H,QAAQ,CAACrI,GAAT,GAAe,CAAnC,CAAxB;AACAzB,cAAAA,IAAI,CAACmJ,QAAL,CAAcD,eAAe,CAAClI,QAA9B,EAAwCF,cAAc,CAACC,QAAvD,EAAiEmI,eAAe,CAACnI,QAAjF;AACA,mBAAK6C,MAAL,CAAa,KAAKT,QAAL,GAAgB,KAAKH,SAAL,GAAiB,CAAjC,GAAqC,CAAlD,IAAuDkG,eAAe,CAAClI,QAAhB,CAAyB+H,CAAhF;AACA,mBAAKnF,MAAL,CAAa,KAAKT,QAAL,GAAgB,KAAKH,SAAL,GAAiB,CAAjC,GAAqC,CAAlD,IAAuDkG,eAAe,CAAClI,QAAhB,CAAyBsJ,CAAhF;AACA,mBAAK1G,MAAL,CAAa,KAAKT,QAAL,GAAgB,KAAKH,SAAL,GAAiB,CAAjC,GAAqC,CAAlD,IAAuDkG,eAAe,CAAClI,QAAhB,CAAyBuJ,CAAhF;AACA,mBAAK3G,MAAL,CAAa,KAAKT,QAAL,GAAgB,CAA7B,IAAkC+F,eAAe,CAAClI,QAAhB,CAAyB+H,CAA3D;AACA,mBAAKnF,MAAL,CAAa,KAAKT,QAAL,GAAgB,CAA7B,IAAkC+F,eAAe,CAAClI,QAAhB,CAAyBsJ,CAA3D;AACA,mBAAK1G,MAAL,CAAa,KAAKT,QAAL,GAAgB,CAA7B,IAAkC+F,eAAe,CAAClI,QAAhB,CAAyBuJ,CAA3D;AACAvK,cAAAA,IAAI,CAACmJ,QAAL,CAAcrI,cAAc,CAACE,QAA7B,EAAuCF,cAAc,CAACC,QAAtD,EAAgEmI,eAAe,CAACnI,QAAhF;;AACA,mBAAKyI,sBAAL,CAA4B1I,cAA5B,EAA4CoI,eAA5C;AACH,aAXD,MAWO,IAAID,QAAQ,GAAG,CAAf,EAAkB;AACrB,kBAAMC,iBAAe,GAAGY,QAAQ,CAAC9H,UAAT,CAAoB8H,QAAQ,CAACrI,GAAT,GAAe,CAAnC,CAAxB;;AACA,kBAAM2H,cAAc,GAAGU,QAAQ,CAAC9H,UAAT,CAAoB8H,QAAQ,CAACrI,GAAT,GAAe,CAAnC,CAAvB;AACAzB,cAAAA,IAAI,CAACmJ,QAAL,CAAchI,UAAd,EAA0BiI,cAAc,CAACrI,QAAzC,EAAmDmI,iBAAe,CAACnI,QAAnE;AACAf,cAAAA,IAAI,CAACmJ,QAAL,CAAc/H,YAAd,EAA4BN,cAAc,CAACC,QAA3C,EAAqDmI,iBAAe,CAACnI,QAArE;AACAf,cAAAA,IAAI,CAACuJ,SAAL,CAAepI,UAAf,EAA2BA,UAA3B;AACAnB,cAAAA,IAAI,CAACuJ,SAAL,CAAenI,YAAf,EAA6BA,YAA7B;AACApB,cAAAA,IAAI,CAACmJ,QAAL,CAAcD,iBAAe,CAAClI,QAA9B,EAAwCI,YAAxC,EAAsDD,UAAtD;AACAnB,cAAAA,IAAI,CAACuJ,SAAL,CAAeL,iBAAe,CAAClI,QAA/B,EAAyCkI,iBAAe,CAAClI,QAAzD;;AACA,mBAAKwI,sBAAL,CAA4BN,iBAA5B,EAA6CE,cAA7C,EATqB,CAUrB;;;AACA,mBAAKjG,QAAL,IAAiB,KAAKH,SAAL,GAAiB,CAAjB,GAAqB,CAAtC;AACA,mBAAKI,QAAL,IAAiB,CAAjB,CAZqB,CAarB;;AACA,mBAAK8G,iBAAL,CAAuBhB,iBAAvB,EAAwC,KAAKiB,cAAL,CAAoBxC,QAApB,CAA6BqC,YAA7B,EAA2C,CAA3C,CAAxC,EAAuFD,WAAvF,EACIC,YADJ,EACkBf,QAAQ,GAAG,CAD7B,EACgCxI,kBAAkB,GAAGC,mBADrD;;AAEAV,cAAAA,IAAI,CAACmJ,QAAL,CAAcrI,cAAc,CAACE,QAA7B,EAAuCF,cAAc,CAACC,QAAtD,EAAgEmI,iBAAe,CAACnI,QAAhF;AACAf,cAAAA,IAAI,CAACuJ,SAAL,CAAezI,cAAc,CAACE,QAA9B,EAAwCF,cAAc,CAACE,QAAvD;;AACA,mBAAKwI,sBAAL,CAA4B1I,cAA5B,EAA4CoI,iBAA5C;AACH;;AACD,gBAAI,KAAKJ,iBAAT,EAA4B;AACxBhI,cAAAA,cAAc,CAACe,KAAf,GAAuBY,CAAC,CAACiC,IAAF,CAAOqE,CAAP,GAAW,KAAKC,UAAL,CAAgBrB,QAAhB,CAAyB,CAAzB,EAA4B,CAA5B,CAAlC;AACH,aAFD,MAEO;AACH7G,cAAAA,cAAc,CAACe,KAAf,GAAuB,KAAKmH,UAAL,CAAgBrB,QAAhB,CAAyB,CAAzB,EAA4B,CAA5B,CAAvB;AACH;;AACD7G,YAAAA,cAAc,CAACiB,KAAf,GAAuBU,CAAC,CAACV,KAAzB;;AAEA,gBAAI/B,IAAI,CAACqJ,MAAL,CAAYvI,cAAc,CAACE,QAA3B,EAAqChB,IAAI,CAACsJ,IAA1C,CAAJ,EAAqD;AACjD,mBAAKlG,QAAL,IAAiB,CAAjB;AACH,aAFD,MAEO;AACH,mBAAK8G,iBAAL,CAAuBpJ,cAAvB,EAAuC,KAAKqJ,cAAL,CAAoBxC,QAApB,CAA6B,CAA7B,EAAgC,CAAhC,CAAvC,EAA2EoC,WAA3E,EAAwF,CAAxF,EAA2Fd,QAA3F,EAAqGxI,kBAArG;AACH;AACJ;;AACD,eAAK8C,WAAL,CAAkBsD,OAAlB,GAA4B,KAAKzD,QAAL,GAAgB,CAA5C;AACH,S;;gBAEMoH,Q,GAAP,kBAAiB5H,KAAjB,EAAgC;AAC5B,cAAM6H,SAAS,GAAG,KAAKlH,WAAL,IAAoB,KAAKA,WAAL,CAAiBkH,SAAvD;;AACA,cAAIA,SAAS,IAAIA,SAAS,CAACvI,MAAV,GAAmB,CAApC,EAAuC;AACnC,gBAAMwI,QAAQ,GAAGD,SAAS,CAAC,CAAD,CAA1B;AACAC,YAAAA,QAAQ,CAACC,cAAT,CAAwBC,aAAxB,CAAsC,CAAtC,EAAyClD,MAAzC,CAAgD,KAAK9D,MAArD;AACA8G,YAAAA,QAAQ,CAACC,cAAT,CAAwBE,WAAxB,CAAqCnD,MAArC,CAA4C,KAAK5D,QAAjD;AACA,iBAAKN,OAAL,CAAasH,SAAb,CAAuB,CAAvB,EAA0BC,UAA1B,GAAuC,CAAvC;AACA,iBAAKvH,OAAL,CAAasH,SAAb,CAAuB,CAAvB,EAA0BE,UAA1B,GAAuCpI,KAAvC;;AACA,iBAAKa,aAAL,CAAoBiE,MAApB,CAA2B,KAAKlE,OAAhC;AACH;AACJ,S;;gBAEMyH,Y,GAAP,wBAAuB;AACnB,eAAKT,QAAL,CAAc,KAAKpH,QAAnB;AACH,S;;gBAEO8H,Y,GAAR,wBAAwB;AACpB,cAAI,KAAK3H,WAAT,EAAsB;AAClB;AACH;;AAED,eAAKA,WAAL,GAAmB/C,QAAQ,CAACxB,QAAT,CAAkByH,IAAlB,CAAuB0E,WAAvB,CAAmCjL,KAAK,CAACkL,KAAzC,CAAnB;AACH,S;;gBAEOC,O,GAAR,mBAAmB;AACf,cAAMC,MAAc,GAAGtM,QAAQ,CAACyH,IAAT,CAAe6E,MAAtC;AACA,cAAMC,YAAY,GAAGD,MAAM,CAACE,YAAP,CAAoB,IAAI/L,UAAJ,CACrCP,cAAc,CAACuM,MAAf,GAAwBvM,cAAc,CAACwM,YADF,EAErCrM,cAAc,CAACsM,IAAf,GAAsBtM,cAAc,CAACuM,MAFA,EAGrC,KAAK5I,SAAL,IAAkB,KAAKC,SAAL,GAAiB,CAAnC,IAAwC,CAHH,EAIrC,KAAKD,SAJgC,CAApB,CAArB;AAMA,cAAM6I,OAAoB,GAAG,IAAIC,WAAJ,CAAgB,KAAK9I,SAAL,IAAkB,KAAKC,SAAL,GAAiB,CAAnC,IAAwC,CAAxD,CAA7B;AACA,eAAKW,MAAL,GAAc,IAAImI,YAAJ,CAAiBF,OAAjB,CAAd;AACA,eAAKhI,SAAL,GAAiB,IAAImI,WAAJ,CAAgBH,OAAhB,CAAjB;AACAN,UAAAA,YAAY,CAAC7D,MAAb,CAAoBmE,OAApB;AAEA,cAAMhB,WAAW,GAAGS,MAAM,CAACE,YAAP,CAAoB,IAAI/L,UAAJ,CACpCP,cAAc,CAAC+M,KAAf,GAAuB/M,cAAc,CAACwM,YADF,EAEpCrM,cAAc,CAACsM,IAAf,GAAsBtM,cAAc,CAACuM,MAFD,EAGpC,KAAK3I,SAAL,GAAiB,CAAjB,GAAqBiJ,WAAW,CAACC,iBAHG,EAIpCD,WAAW,CAACC,iBAJwB,CAApB,CAApB;AAMA,eAAKrI,QAAL,GAAgB,IAAIoI,WAAJ,CAAgB,KAAKjJ,SAAL,GAAiB,CAAjC,CAAhB;AACA4H,UAAAA,WAAW,CAACnD,MAAZ,CAAmB,KAAK5D,QAAxB;AAEA,eAAKL,aAAL,GAAqB6H,MAAM,CAACE,YAAP,CAAoB,IAAI/L,UAAJ,CACrCP,cAAc,CAACkN,QADsB,EAErC/M,cAAc,CAACsM,IAAf,GAAsBtM,cAAc,CAACuM,MAFA,EAGrCjM,cAHqC,EAIrCA,cAJqC,CAApB,CAArB;AAMA,eAAK6D,OAAL,CAAasH,SAAb,CAAuB,CAAvB,EAA0BuB,WAA1B,GAAwC,CAAC,KAAKpJ,SAAL,GAAiB,CAAlB,IAAuB,CAA/D;AACA,eAAKO,OAAL,CAAasH,SAAb,CAAuB,CAAvB,EAA0BE,UAA1B,GAAuC,KAAK/H,SAAL,GAAiB,CAAxD;;AACA,eAAKQ,aAAL,CAAmBiE,MAAnB,CAA0B,KAAKlE,OAA/B;;AAEA,eAAKE,YAAL,GAAoB,IAAI3E,gBAAJ,CAAqB,CAACwM,YAAD,CAArB,EAAqC,KAAK5H,UAA1C,EAAsDrE,aAAa,CAACgN,aAApE,EAAmFzB,WAAnF,EAAgG,KAAKpH,aAArG,CAApB;AAEA,cAAM8I,UAAU,GAAG,KAAKhJ,WAAxB;;AACA,cAAIgJ,UAAJ,EAAgB;AACZA,YAAAA,UAAU,CAACtE,IAAX,GAAkBsE,UAAU,CAACC,SAAX,GAAuB,KAAK1H,eAAL,CAAqBmD,IAA9D;AACAsE,YAAAA,UAAU,CAACE,QAAX,GAAsB,KAAK3H,eAAL,CAAqB4H,UAA3C;AACAH,YAAAA,UAAU,CAACI,YAAX,CAAwB,CAAxB,EAA2B,KAAKjJ,YAAhC,EAA8C,KAAKM,SAAnD;AACAuI,YAAAA,UAAU,CAAC1F,OAAX,GAAqB,IAArB;AACH;AACJ,S;;gBAEO+B,mB,GAAR,6BAA6BgE,MAA7B,EAA0CC,QAA1C,EAAmEpK,CAAnE,EAAgFC,EAAhF,EAAqG;AACjGmK,UAAAA,QAAQ,CAACjL,QAAT,IAAqBc,EAArB;;AACA,cAAIkK,MAAM,CAACnD,iBAAX,EAA8B;AAC1BoD,YAAAA,QAAQ,CAAC9K,KAAT,CAAeyG,GAAf,CAAmB/F,CAAC,CAACV,KAArB;AACA8K,YAAAA,QAAQ,CAAC9K,KAAT,CAAe+K,QAAf,CAAwBF,MAAM,CAAClD,aAAP,CAAqB/B,QAArB,CAA8B,MAAMlF,CAAC,CAACsK,iBAAF,GAAsBtK,CAAC,CAAC0C,aAA5D,EAA2E,CAA3E,CAAxB;AACH,WAHD,MAGO;AACH0H,YAAAA,QAAQ,CAAC9K,KAAT,CAAeyG,GAAf,CAAmBoE,MAAM,CAAClD,aAAP,CAAqB/B,QAArB,CAA8B,MAAMlF,CAAC,CAACsK,iBAAF,GAAsBtK,CAAC,CAAC0C,aAA5D,EAA2E,CAA3E,CAAnB;AACH;;AACD,cAAIyH,MAAM,CAAC9D,iBAAX,EAA8B;AAC1B+D,YAAAA,QAAQ,CAAChL,KAAT,GAAiBY,CAAC,CAACiC,IAAF,CAAOqE,CAAP,GAAW6D,MAAM,CAAC5D,UAAP,CAAkBrB,QAAlB,CAA2BkF,QAAQ,CAACjL,QAAT,GAAoBgL,MAAM,CAAC1J,cAAtD,EAAsE,CAAtE,CAA5B;AACH,WAFD,MAEO;AACH2J,YAAAA,QAAQ,CAAChL,KAAT,GAAiB+K,MAAM,CAAC5D,UAAP,CAAkBrB,QAAlB,CAA2BkF,QAAQ,CAACjL,QAAT,GAAoBgL,MAAM,CAAC1J,cAAtD,EAAsE,CAAtE,CAAjB;AACH;;AACD,iBAAO2J,QAAQ,CAACjL,QAAT,GAAoBgL,MAAM,CAAC1J,cAAlC;AACH,S;;gBAEOgH,iB,GAAR,2BAA2BJ,QAA3B,EAAoDkD,YAApD,EAAyEjD,WAAzE,EACIkD,SADJ,EACuBC,WADvB,EAC4CC,QAD5C,EAC8D;AAC1D,eAAKvJ,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC2G,QAAQ,CAAC/I,QAAT,CAAkBgI,CAAlD;AACA,eAAKnF,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC2G,QAAQ,CAAC/I,QAAT,CAAkBuJ,CAAlD;AACA,eAAK1G,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC2G,QAAQ,CAAC/I,QAAT,CAAkBwJ,CAAlD;AACA,eAAK3G,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC2G,QAAQ,CAAChI,SAAzC;AACA,eAAK8B,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC2G,QAAQ,CAACjI,KAAzC;AACA,eAAK+B,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC8J,SAAhC;AACA,eAAKrJ,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC,CAAhC,CAP0D,CAQ1D;AACA;AACA;AACA;;AACA,eAAKS,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC2G,QAAQ,CAAC9I,QAAT,CAAkB+H,CAAlD;AACA,eAAKnF,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC2G,QAAQ,CAAC9I,QAAT,CAAkBsJ,CAAlD;AACA,eAAK1G,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC2G,QAAQ,CAAC9I,QAAT,CAAkBuJ,CAAlD;;AACAlJ,UAAAA,WAAW,CAACmH,GAAZ,CAAgBsB,QAAQ,CAAC/H,KAAzB;;AACAV,UAAAA,WAAW,CAACyL,QAAZ,CAAqBE,YAArB;;AACA,eAAKnJ,SAAL,CAAgB,KAAKV,QAAL,EAAhB,IAAmC9B,WAAW,CAAC+L,IAA/C;AACA,eAAKxJ,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC2G,QAAQ,CAAC/I,QAAT,CAAkBgI,CAAlD;AACA,eAAKnF,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC2G,QAAQ,CAAC/I,QAAT,CAAkBuJ,CAAlD;AACA,eAAK1G,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC2G,QAAQ,CAAC/I,QAAT,CAAkBwJ,CAAlD;AACA,eAAK3G,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC,IAAI2G,QAAQ,CAAChI,SAA7C;AACA,eAAK8B,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC2G,QAAQ,CAACjI,KAAzC;AACA,eAAK+B,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC8J,SAAhC;AACA,eAAKrJ,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC,CAAhC,CAxB0D,CAyB1D;AACA;AACA;AACA;;AACA,eAAKS,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC2G,QAAQ,CAAC9I,QAAT,CAAkB+H,CAAlD;AACA,eAAKnF,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC2G,QAAQ,CAAC9I,QAAT,CAAkBsJ,CAAlD;AACA,eAAK1G,MAAL,CAAa,KAAKT,QAAL,EAAb,IAAgC2G,QAAQ,CAAC9I,QAAT,CAAkBuJ,CAAlD;AACA,eAAK1G,SAAL,CAAgB,KAAKV,QAAL,EAAhB,IAAmC9B,WAAW,CAAC+L,IAA/C;;AACA,cAAID,QAAQ,GAAG1M,kBAAf,EAAmC;AAC/B,iBAAKqD,QAAL,CAAe,KAAKV,QAAL,EAAf,IAAkC2G,WAAW,GAAG,IAAImD,WAApD;AACA,iBAAKpJ,QAAL,CAAe,KAAKV,QAAL,EAAf,IAAkC2G,WAAW,GAAG,IAAImD,WAAlB,GAAgC,CAAlE;AACA,iBAAKpJ,QAAL,CAAe,KAAKV,QAAL,EAAf,IAAkC2G,WAAW,GAAG,IAAImD,WAAlB,GAAgC,CAAlE;AACH;;AACD,cAAIC,QAAQ,GAAGzM,mBAAf,EAAoC;AAChC,iBAAKoD,QAAL,CAAe,KAAKV,QAAL,EAAf,IAAkC2G,WAAW,GAAG,IAAImD,WAApD;AACA,iBAAKpJ,QAAL,CAAe,KAAKV,QAAL,EAAf,IAAkC2G,WAAW,GAAG,IAAImD,WAAlB,GAAgC,CAAlE;AACA,iBAAKpJ,QAAL,CAAe,KAAKV,QAAL,EAAf,IAAkC2G,WAAW,GAAG,IAAImD,WAAlB,GAAgC,CAAlE;AACH;AACJ,S;;gBAEO1D,sB,GAAR,gCAAgC6D,WAAhC,EAA4DC,WAA5D,EAAwF;AACpF,cAAItN,IAAI,CAACuN,GAAL,CAASF,WAAW,CAACrM,QAArB,EAA+BsM,WAAW,CAACtM,QAA3C,IAAuDL,mBAA3D,EAAgF;AAC5E0M,YAAAA,WAAW,CAACvL,SAAZ,GAAwB,IAAIwL,WAAW,CAACxL,SAAxC;AACH,WAFD,MAEO;AACHuL,YAAAA,WAAW,CAACvL,SAAZ,GAAwBwL,WAAW,CAACxL,SAApC;AACH;AACJ,S;;gBAEO0E,kB,GAAR,8BAA8B;AAC1B,cAAI,KAAK9C,YAAT,EAAuB;AACnB,iBAAKA,YAAL,CAAkB6C,OAAlB;;AACA,iBAAK7C,YAAL,GAAoB,IAApB;AACH;AACJ,S,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAnjBA;AACJ;AACA;AACI,yBACqB;AACjB,mBAAO,KAAKoC,OAAZ;AACH,W;eAED,aAAmB0H,GAAnB,EAAwB;AACpB,gBAAIA,GAAG,KAAK,KAAK1H,OAAb,IAAwB,KAAKvC,WAAjC,EAA8C;AAC1C;AACH;;AACD,gBAAIiK,GAAG,IAAI,CAAC,KAAK1H,OAAjB,EAA0B;AACtB,mBAAKA,OAAL,GAAe0H,GAAf;AACA,kBAAI,KAAK1I,eAAL,CAAqByC,SAAzB,EAAoC,KAAKzC,eAAL,CAAqByC,SAArB,CAA+BkG,mBAA/B;AACvC;;AACD,gBAAID,GAAG,IAAI,CAAC,KAAKjK,WAAjB,EAA8B;AAC1B,mBAAK2H,YAAL;;AACA,mBAAKG,OAAL;AACH;;AACD,iBAAKvF,OAAL,GAAe0H,GAAf;;AACA,gBAAI,KAAKjK,WAAT,EAAsB;AAClB,mBAAKA,WAAL,CAAiBsD,OAAjB,GAA2B2G,GAA3B;AACH;;AAED,gBAAIA,GAAJ,EAAS,KAAKxH,QAAL,GAAT,KACK,KAAKE,SAAL;AACR;;;;AA0BD;AACJ;AACA;AACI,yBAEkC;AAC9B,mBAAO,KAAKlB,oBAAZ;AACH,W;eAED,aAAgCwI,GAAhC,EAAqC;AACjC,iBAAKxI,oBAAL,GAA4BwI,GAA5B;AACA,iBAAKzK,mBAAL,GAA2ByK,GAAG,GAAGA,GAAjC;AACH;;;eAED,eAGoB;AAChB,mBAAO,KAAKE,MAAZ;AACH,W;eAED,aAAkBF,GAAlB,EAAuB;AACnB,iBAAKE,MAAL,GAAcF,GAAd;AACA,gBAAM3I,EAAE,GAAG,KAAKC,eAAhB;;AACA,gBAAID,EAAE,IAAIA,EAAE,CAAC0C,SAAb,EAAwB;AACpB1C,cAAAA,EAAE,CAAC0C,SAAH,CAAakG,mBAAb;AACH;AACJ;AAED;AACJ;AACA;;;;;6OAvDK3O,Y;;;;;iBACgB,K;;sFAMhBA,Y;;;;;iBAGayB,SAAS,CAACoN,S;;0FAMvB7O,Y;;;;;iBAGiB,IAAIqB,UAAJ,E;;+FAEjBrB,Y;;;;;iBAC6B,G;;kbAkC7BA,Y;;;;;iBAC2B,I;;8FAM3BA,Y;;;;;iBAGoBwB,WAAW,CAACsN,O;;4FAEhC9O,Y;;;;;iBAG0B,I;;6FAM1BA,Y;;;;;iBAGmB,IAAIqB,UAAJ,E;;4FAEnBrB,Y;;;;;iBAG0B,K;;kGAG1BA,Y;;;;;iBAGuB,IAAIsB,aAAJ,E;;iGAGvBtB,Y;;;;;iBAGsB,IAAIsB,aAAJ,E;;;;;;;iBAMNC,KAAK,CAACyH,K;;2FAEtBhJ,Y;;;;;iBAC8B,I"}