{"version":3,"sources":["../../../../../../../../../cocos/core/pipeline/render-batched-queue.ts"],"names":["PipelineStateManager","ShaderPool","SetIndex","RenderBatchedQueue","queue","Set","clear","it","values","res","next","done","value","uploadBuffers","cmdBuff","b","batches","length","batch","mergeCount","v","vbs","update","vbDatas","updateBuffer","vbIdx","vbIdxData","buffer","ubo","uboData","recordCommandBuffer","device","renderPass","boundPSO","shader","get","hShader","pso","getOrCreatePipelineState","pass","ia","bindPipelineState","bindDescriptorSet","MATERIAL","descriptorSet","LOCAL","dynamicOffsets","bindInputAssembler","draw"],"mappings":"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"}