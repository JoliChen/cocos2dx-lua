{"version":3,"sources":["../../../../../../../../../cocos/2d/renderer/draw-batch.ts"],"names":["NULL_HANDLE","BatchPool2D","BatchView2D","PassPool","Layers","legacyCC","Pass","UI_VIS_FLAG","Enum","NONE","UI_3D","DrawBatch2D","bufferBatch","camera","renderScene","model","texture","sampler","useLocalData","isStatic","textureHash","samplerHash","_handle","_passes","alloc","set","VIS_FLAGS","INPUT_ASSEMBLER","DESCRIPTOR_SET","destroy","ui","length","passes","i","_destroyHandle","free","clear","hInputAssembler","hDescriptorSet","visFlags","fillPasses","mat","dss","dssHash","bs","bsHash","patches","PASS_COUNT","passOffset","PASS_0","shaderOffset","SHADER_0","hashFactor","director","root","mtlPass","passInUse","depthStencilState","blendState","update","_initPassFromTarget","handle","getShaderVariant","get","vis"],"mappings":"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"}