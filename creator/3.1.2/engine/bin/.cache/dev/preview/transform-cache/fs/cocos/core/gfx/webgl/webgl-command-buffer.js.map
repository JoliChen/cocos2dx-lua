{"version":3,"sources":["../../../../../../../../../../cocos/core/gfx/webgl/webgl-command-buffer.ts"],"names":["CommandBuffer","BufferUsageBit","CommandBufferType","StencilFace","DynamicStates","WebGLCmd","WebGLCmdBeginRenderPass","WebGLCmdBindStates","WebGLCmdCopyBufferToTexture","WebGLCmdDraw","WebGLCmdPackage","WebGLCmdUpdateBuffer","WebGLCommandBuffer","cmdPackage","_webGLAllocator","_isInRenderPass","_curGPUPipelineState","_curGPUInputAssembler","_curGPUDescriptorSets","_curDynamicOffsets","Array","fill","_curDynamicStates","_isStateInvalied","initialize","info","_type","type","_queue","queue","_device","cmdAllocator","setCount","bindingMappingInfo","bufferOffsets","length","i","push","destroy","clearCmds","begin","renderPass","subpass","frameBuffer","_numDrawCalls","_numInstances","_numTris","end","bindStates","beginRenderPass","framebuffer","renderArea","clearColors","clearDepth","clearStencil","cmd","beginRenderPassCmdPool","alloc","gpuRenderPass","gpuFramebuffer","beginRenderPassCmds","cmds","BEGIN_RENDER_PASS","endRenderPass","bindPipelineState","pipelineState","gpuPipelineState","bindDescriptorSet","set","descriptorSet","dynamicOffsets","gpuDescriptorSet","gpuPipelineLayout","offsets","idx","dynamicOffsetOffsets","bindInputAssembler","inputAssembler","gpuInputAssembler","setViewport","viewport","cache","left","top","width","height","minDepth","maxDepth","setScissor","scissor","x","y","setLineWidth","lineWidth","setDepthBias","depthBiasConstantFactor","depthBiasClamp","depthBiasSlopeFactor","depthBiasConstant","depthBiasSlope","setBlendConstants","blendConstants","blendConstant","z","w","copy","setDepthBound","minDepthBounds","maxDepthBounds","depthMinBounds","depthMaxBounds","setStencilWriteMask","face","writeMask","front","stencilStatesFront","back","stencilStatesBack","FRONT","BACK","setStencilCompareMask","reference","compareMask","draw","PRIMARY","SECONDARY","drawCmdPool","drawInfo","vertexCount","firstVertex","indexCount","firstIndex","vertexOffset","instanceCount","firstInstance","drawCmds","DRAW","glPrimitive","Math","max","console","error","updateBuffer","buffer","data","size","gpuBuffer","updateBufferCmdPool","buffSize","buff","usage","INDIRECT","undefined","byteLength","offset","updateBufferCmds","UPDATE_BUFFER","copyBuffersToTexture","buffers","texture","regions","gpuTexture","copyBufferToTextureCmdPool","copyBufferToTextureCmds","COPY_BUFFER_TO_TEXTURE","execute","cmdBuffs","count","webGLCmdBuff","c","array","refCount","bindStatesCmds","concat","pipelineBarrier","globalBarrier","textureBarriers","bindStatesCmd","bindStatesCmdPool","prototype","apply","gpuDescriptorSets","dynamicStates","BIND_STATES"],"mappings":"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"}