{"version":3,"sources":["../../../../../../../../../../cocos/core/gfx/webgl/webgl-buffer.ts"],"names":["IndirectBuffer","BufferUsageBit","Buffer","WebGLCmdFuncCreateBuffer","WebGLCmdFuncDestroyBuffer","WebGLCmdFuncResizeBuffer","WebGLCmdFuncUpdateBuffer","WebGLBuffer","_gpuBuffer","_gpuBufferView","_uniformBuffer","initialize","info","_isBufferView","buffer","_usage","usage","_memUsage","memUsage","_size","_stride","range","_count","_flags","flags","gpuBuffer","offset","size","Math","max","stride","INDIRECT","_indirectBuffer","UNIFORM","Uint8Array","vf32","indirects","glTarget","glBuffer","drawInfos","_device","memoryStatus","bufferSize","destroy","resize","console","warn","oldSize","update","buffSize","undefined","byteLength"],"mappings":";;;;;;;;;;;;;;;AAyBmDA,MAAAA,c,iBAAAA,c;AAAgBC,MAAAA,c,iBAAAA,c;;AAC1DC,MAAAA,M,iBAAAA,M;;AAGLC,MAAAA,wB,oBAAAA,wB;AACAC,MAAAA,yB,oBAAAA,yB;AACAC,MAAAA,wB,oBAAAA,wB;AACAC,MAAAA,wB,oBAAAA,wB;;;6BAKSC,W;;;;;;;;;;;gBASDC,U,GAAqC,I;gBACrCC,c,GAA6C,I;gBAC7CC,c,GAAoC,I;;;;;;eAErCC,U,GAAP,oBAAmBC,IAAnB,EAA+D;AAC3D,cAAI,YAAYA,IAAhB,EAAsB;AAAE;AACpB,iBAAKC,aAAL,GAAqB,IAArB;AAEA,gBAAMC,MAAM,GAAGF,IAAI,CAACE,MAApB;AAEA,iBAAKC,MAAL,GAAcD,MAAM,CAACE,KAArB;AACA,iBAAKC,SAAL,GAAiBH,MAAM,CAACI,QAAxB;AACA,iBAAKC,KAAL,GAAa,KAAKC,OAAL,GAAeR,IAAI,CAACS,KAAjC;AACA,iBAAKC,MAAL,GAAc,CAAd;AACA,iBAAKC,MAAL,GAAcT,MAAM,CAACU,KAArB;AAEA,iBAAKf,cAAL,GAAsB;AAClBgB,cAAAA,SAAS,EAAEX,MAAM,CAACW,SADA;AAElBC,cAAAA,MAAM,EAAEd,IAAI,CAACc,MAFK;AAGlBL,cAAAA,KAAK,EAAET,IAAI,CAACS;AAHM,aAAtB;AAKH,WAhBD,MAgBO;AAAE;AACL,iBAAKN,MAAL,GAAcH,IAAI,CAACI,KAAnB;AACA,iBAAKC,SAAL,GAAiBL,IAAI,CAACM,QAAtB;AACA,iBAAKC,KAAL,GAAaP,IAAI,CAACe,IAAlB;AACA,iBAAKP,OAAL,GAAeQ,IAAI,CAACC,GAAL,CAASjB,IAAI,CAACkB,MAAL,IAAe,KAAKX,KAA7B,EAAoC,CAApC,CAAf;AACA,iBAAKG,MAAL,GAAc,KAAKH,KAAL,GAAa,KAAKC,OAAhC;AACA,iBAAKG,MAAL,GAAcX,IAAI,CAACY,KAAnB;;AAEA,gBAAI,KAAKT,MAAL,GAAcd,cAAc,CAAC8B,QAAjC,EAA2C;AACvC,mBAAKC,eAAL,GAAuB,IAAIhC,cAAJ,EAAvB;AACH;;AAED,gBAAK,KAAKe,MAAL,GAAcd,cAAc,CAACgC,OAA9B,IAA0C,KAAKd,KAAL,GAAa,CAA3D,EAA8D;AAC1D,mBAAKT,cAAL,GAAsB,IAAIwB,UAAJ,CAAe,KAAKf,KAApB,CAAtB;AACH;;AAED,iBAAKX,UAAL,GAAkB;AACdQ,cAAAA,KAAK,EAAE,KAAKD,MADE;AAEdG,cAAAA,QAAQ,EAAE,KAAKD,SAFD;AAGdU,cAAAA,IAAI,EAAE,KAAKR,KAHG;AAIdW,cAAAA,MAAM,EAAE,KAAKV,OAJC;AAKdN,cAAAA,MAAM,EAAE,IALM;AAMdqB,cAAAA,IAAI,EAAE,IANQ;AAOdC,cAAAA,SAAS,EAAE,EAPG;AAQdC,cAAAA,QAAQ,EAAE,CARI;AASdC,cAAAA,QAAQ,EAAE;AATI,aAAlB;;AAYA,gBAAI1B,IAAI,CAACI,KAAL,GAAaf,cAAc,CAAC8B,QAAhC,EAA0C;AACtC,mBAAKvB,UAAL,CAAgB4B,SAAhB,GAA4B,KAAKJ,eAAL,CAAsBO,SAAlD;AACH;;AAED,gBAAI,KAAKxB,MAAL,GAAcd,cAAc,CAACgC,OAAjC,EAA0C;AACtC,mBAAKzB,UAAL,CAAgBM,MAAhB,GAAyB,KAAKJ,cAA9B;AACH;;AAEDP,YAAAA,wBAAwB,CAAC,KAAKqC,OAAN,EAA8B,KAAKhC,UAAnC,CAAxB;AAEA,iBAAKgC,OAAL,CAAaC,YAAb,CAA0BC,UAA1B,IAAwC,KAAKvB,KAA7C;AACH;;AAED,iBAAO,IAAP;AACH,S;;eAEMwB,O,GAAP,mBAAkB;AACd,cAAI,KAAKnC,UAAT,EAAqB;AACjBJ,YAAAA,yBAAyB,CAAC,KAAKoC,OAAN,EAA8B,KAAKhC,UAAnC,CAAzB;AACA,iBAAKgC,OAAL,CAAaC,YAAb,CAA0BC,UAA1B,IAAwC,KAAKvB,KAA7C;AACA,iBAAKX,UAAL,GAAkB,IAAlB;AACH;;AAED,cAAI,KAAKC,cAAT,EAAyB;AACrB,iBAAKA,cAAL,GAAsB,IAAtB;AACH;AACJ,S;;eAEMmC,M,GAAP,gBAAejB,IAAf,EAA6B;AACzB,cAAI,KAAKd,aAAT,EAAwB;AACpBgC,YAAAA,OAAO,CAACC,IAAR,CAAa,6BAAb;AACA;AACH;;AAED,cAAMC,OAAO,GAAG,KAAK5B,KAArB;;AACA,cAAI4B,OAAO,KAAKpB,IAAhB,EAAsB;AAAE;AAAS;;AAEjC,eAAKR,KAAL,GAAaQ,IAAb;AACA,eAAKL,MAAL,GAAc,KAAKH,KAAL,GAAa,KAAKC,OAAhC;;AAEA,cAAI,KAAKV,cAAT,EAAyB;AACrB,iBAAKA,cAAL,GAAsB,IAAIwB,UAAJ,CAAeP,IAAf,CAAtB;AACH;;AAED,cAAI,KAAKnB,UAAT,EAAqB;AACjB,gBAAI,KAAKE,cAAT,EAAyB;AACrB,mBAAKF,UAAL,CAAgBM,MAAhB,GAAyB,KAAKJ,cAA9B;AACH;;AAED,iBAAKF,UAAL,CAAgBmB,IAAhB,GAAuBA,IAAvB;;AACA,gBAAIA,IAAI,GAAG,CAAX,EAAc;AACVtB,cAAAA,wBAAwB,CAAC,KAAKmC,OAAN,EAA8B,KAAKhC,UAAnC,CAAxB;AACA,mBAAKgC,OAAL,CAAaC,YAAb,CAA0BC,UAA1B,IAAwCK,OAAxC;AACA,mBAAKP,OAAL,CAAaC,YAAb,CAA0BC,UAA1B,IAAwCf,IAAxC;AACH;AACJ;AACJ,S;;eAEMqB,M,GAAP,gBAAelC,MAAf,EAAqCa,IAArC,EAAoD;AAChD,cAAI,KAAKd,aAAT,EAAwB;AACpBgC,YAAAA,OAAO,CAACC,IAAR,CAAa,qCAAb;AACA;AACH;;AAED,cAAIG,QAAJ;;AACA,cAAItB,IAAI,KAAKuB,SAAb,EAAwB;AACpBD,YAAAA,QAAQ,GAAGtB,IAAX;AACH,WAFD,MAEO,IAAI,KAAKZ,MAAL,GAAcd,cAAc,CAAC8B,QAAjC,EAA2C;AAC9CkB,YAAAA,QAAQ,GAAG,CAAX;AACH,WAFM,MAEA;AACHA,YAAAA,QAAQ,GAAInC,MAAD,CAAwBqC,UAAnC;AACH;;AAED7C,UAAAA,wBAAwB,CACpB,KAAKkC,OADe,EAEpB,KAAKhC,UAFe,EAGpBM,MAHoB,EAIpB,CAJoB,EAKpBmC,QALoB,CAAxB;AAOH,S;;;;eAzID,eAAkC;AAC9B,mBAAQ,KAAKzC,UAAb;AACH;;;eAED,eAA0C;AACtC,mBAAQ,KAAKC,cAAb;AACH;;;;QAP4BP,M"}