{"version":3,"sources":["../../../../../../../../cocos/dragon-bones/CCFactory.ts"],"names":["EDITOR","Armature","BaseObject","Animation","BaseFactory","DragonBones","director","Game","game","Node","Scheduler","ccclass","CCTextureAtlasData","CCSlot","CCArmatureDisplay","CCFactory","getInstance","_factory","id","uuid","_slots","eventManager","_dragonBones","getScheduler","on","EVENT_RESTART","initUpdate","dt","enableForTarget","scheduleUpdate","PRIORITY_SYSTEM","update","advanceTime","getDragonBonesDataByRawData","rawData","dataParser","ArrayBuffer","_binaryParser","_dataParser","parseDragonBonesData","buildArmatureDisplay","armatureName","dragonBonesName","skinName","textureAtlasName","armature","buildArmature","_display","createArmatureNode","comp","node","display","getComponent","addComponent","name","_armatureName","_dragonAsset","dragonAsset","_dragonAtlasAsset","dragonAtlasAsset","_init","_buildTextureAtlasData","textureAtlasData","textureAtlas","renderTexture","borrowObject","_sortSlots","slots","sortedSlots","i","l","length","slot","zOrder","_zOrder","inserted","j","splice","_buildArmature","dataPackage","_skinData","skin","_animation","_armature","animations","_isChildArmature","init","_buildSlot","slotData","displays","getDragonBonesDataByUUID","_dragonBonesDataMap","indexOf","removeDragonBonesDataByUUID","disposeData","undefined","bufferObject"],"mappings":"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"}