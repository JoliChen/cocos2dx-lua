{"version":3,"sources":["../../../../../../../../../cocos/core/animation/animation-manager.ts"],"names":["ccclass","System","director","Director","errorID","Scheduler","MutableForwardIterator","BlendStateBuffer","legacyCC","deleteTransform","getTransform","getWorldMatrix","AnimationManager","_anims","_crossFades","_delayEvents","_blendStateBuffer","_sockets","addCrossFade","crossFade","index","array","indexOf","push","removeCrossFade","fastRemoveAt","update","dt","crossFadesIter","crossFades","i","length","iterator","anim","isMotionless","apply","stamp","getTotalFrames","l","target","transform","matrix","event","fn","thisArg","args","destruct","addAnimation","removeAnimation","pushDelayEvent","addSockets","root","sockets","socket","find","s","targetNode","getChildByPath","path","removeSockets","socketToRemove","j","node","ID","on","EVENT_INIT","animationManager","registerSystem","PRIORITY_SYSTEM"],"mappings":"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"}