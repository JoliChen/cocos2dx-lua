System.register(["./fog-01fb8507.js","./index-7f8a4e60.js","./screen-3553948d.js","./renderable-component-a695dbe3.js","./transform-utils-753c4611.js","./json-asset-60ef8fb2.js","./camera-component-262e4a52.js","./sprite-frame-b3070608.js","./sprite-4b5143b3.js","./renderable-2d-de4bd246.js","./deprecated-6d1a0072.js"],(function(t){"use strict";var e,i,o,n,r,s,a,h,l,c,u,_,p,d,g,f,y,b,T,m,v,C,S,E,O,A,w,L,D,P,z,I,R,x,B,N,H,M,k,V,F,j,G,U,W,Z,Y,X,q,K,Q,J,$,tt,et,it,ot,nt,rt,st,at,ht,lt,ct,ut,_t,pt,dt,gt,ft,yt,bt,Tt,mt;return{setters:[function(t){e=t.da,i=t.dz,o=t.eu,n=t.eA,r=t.en,s=t.gn,a=t.ev,h=t.dh,l=t.ej,c=t.cY,u=t.eW,_=t.ew,p=t.ex,d=t.go,g=t.gD,f=t.gp,y=t.gX,b=t.eJ,T=t.gl,m=t.eK,v=t.g_,C=t.eE,S=t.eN,E=t.eq,O=t.eF,A=t.dy,w=t.d3,L=t.l,D=t.g$,P=t.eg,z=t.fq,I=t.ft,R=t.fr,x=t.eh,B=t.fw,N=t.fu,H=t.fv,M=t.d6,k=t.eG,V=t.w,F=t.cW,j=t.dg,G=t.eD,U=t.eH,W=t.d_,Z=t.t,Y=t.c,X=t.eB,q=t.h0,K=t.d,Q=t.ey,J=t.eO,$=t.eX,tt=t.dP,et=t.e3,it=t.fU},function(t){ot=t.E,nt=t.f,rt=t.D},function(t){st=t.v,at=t.o,ht=t.s,lt=t.K,ct=t.k,ut=t.V},function(){},function(){},function(t){_t=t.a},function(t){pt=t.C},function(t){dt=t.S},function(t){gt=t.a,ft=t.B,yt=t.c,bt=t.V},function(t){Tt=t.R,mt=t.U},function(){}],execute:function(){var vt,Ct,St,Et,Ot,At,wt,Lt,Dt,Pt,zt,It,Rt,xt,Bt,Nt,Ht,Mt,kt,Vt,Ft,jt,Gt,Ut,Wt,Zt,Yt,Xt,qt,Kt,Qt,Jt,$t,te,ee,ie,oe,ne,re,se,ae,he,le,ce,ue,_e,pe,de,ge,fe,ye,be,Te,me=new e;!function(t){t[t.NONE=0]="NONE",t[t.COLOR=1]="COLOR",t[t.SPRITE=2]="SPRITE",t[t.SCALE=3]="SCALE"}(ye||(ye={})),i(ye),function(t){t.NORMAL="normal",t.HOVER="hover",t.PRESSED="pressed",t.DISABLED="disabled"}(be||(be={})),function(t){t.CLICK="click"}(Te||(Te={}));var ve,Ce,Se,Ee,Oe=(vt=o("cc.Button"),Ct=d(),St=g(110),Et=f(),Ot=y(mt),At=n(r),wt=b(),Lt=T(),Dt=b(),Pt=T(),zt=n(ye),It=b(),Rt=T(),xt=T(),Bt=T(),Nt=T(),Ht=T(),Mt=m(),kt=v(),Vt=T(),Ft=T(),jt=n(dt),Gt=T(),Ut=n(dt),Wt=T(),Zt=n(dt),Yt=T(),Xt=n(dt),qt=T(),Kt=n([ot]),Qt=b(),Jt=T(),ve=vt($t=Ct($t=St($t=Et($t=Ot($t=s((fe=ge=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return i=t.call.apply(t,[this].concat(n))||this,C(i,"clickEvents",ee,S(i)),C(i,"_interactable",ie,S(i)),C(i,"_transition",oe,S(i)),C(i,"_normalColor",ne,S(i)),C(i,"_hoverColor",re,S(i)),C(i,"_pressedColor",se,S(i)),C(i,"_disabledColor",ae,S(i)),C(i,"_normalSprite",he,S(i)),C(i,"_hoverSprite",le,S(i)),C(i,"_pressedSprite",ce,S(i)),C(i,"_disabledSprite",ue,S(i)),C(i,"_duration",_e,S(i)),C(i,"_zoomScale",pe,S(i)),C(i,"_target",de,S(i)),i._pressed=!1,i._hovered=!1,i._fromColor=new e,i._toColor=new e,i._time=0,i._transitionFinished=!0,i._fromScale=new c,i._toScale=new c,i._originalScale=null,i._sprite=null,i._targetScale=new c,i}a(i,t);var o=i.prototype;return o.__preload=function(){this.target||(this.target=this.node);var t=this.node.getComponent(gt);t&&(this._normalSprite=t.spriteFrame),this._applyTarget(),this._resetState()},o.onEnable=function(){this._registerNodeEvent()},o.onDisable=function(){this._resetState(),this._unregisterNodeEvent()},o.update=function(t){var i=this.target;if(!this._transitionFinished&&i&&(this._transition===ye.COLOR||this._transition===ye.SCALE)){this._time+=t;var o=1;if(this._duration>0&&(o=this._time/this._duration),o>=1&&(o=1),this._transition===ye.COLOR){var n=i._uiProps.uiComp;e.lerp(me,this._fromColor,this._toColor,o),n&&(n.color=me)}else this.transition===ye.SCALE&&(i.getScale(this._targetScale),this._targetScale.x=h(this._fromScale.x,this._toScale.x,o),this._targetScale.y=h(this._fromScale.y,this._toScale.y,o),i.setScale(this._targetScale));1===o&&(this._transitionFinished=!0)}},o._resizeNodeToTargetNode=function(){this.target&&this.target._uiProps.uiTransformComp},o._resetState=function(){this._pressed=!1,this._hovered=!1;var t=this.target;if(t){var e=t.getComponent(Tt);if(e){var i=this._transition;i===ye.COLOR&&this._interactable?e.color=this._normalColor:i===ye.SCALE&&this._originalScale&&t.setScale(this._originalScale),this._transitionFinished=!0}}},o._registerNodeEvent=function(){this.node.on(l.TOUCH_START,this._onTouchBegan,this),this.node.on(l.TOUCH_MOVE,this._onTouchMove,this),this.node.on(l.TOUCH_END,this._onTouchEnded,this),this.node.on(l.TOUCH_CANCEL,this._onTouchCancel,this),this.node.on(l.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.on(l.MOUSE_LEAVE,this._onMouseMoveOut,this)},o._registerTargetEvent=function(t){t.on(l.TRANSFORM_CHANGED,this._onTargetTransformChanged,this)},o._unregisterNodeEvent=function(){this.node.off(l.TOUCH_START,this._onTouchBegan,this),this.node.off(l.TOUCH_MOVE,this._onTouchMove,this),this.node.off(l.TOUCH_END,this._onTouchEnded,this),this.node.off(l.TOUCH_CANCEL,this._onTouchCancel,this),this.node.off(l.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.off(l.MOUSE_LEAVE,this._onMouseMoveOut,this)},o._unregisterTargetEvent=function(t){t.off(l.TRANSFORM_CHANGED)},o._getTargetSprite=function(t){var e=null;return t&&(e=t.getComponent(gt)),e},o._applyTarget=function(){this.target&&(this._sprite=this._getTargetSprite(this.target),this._originalScale||(this._originalScale=new c),c.copy(this._originalScale,this.target.getScale()))},o._onTargetSpriteFrameChanged=function(t){this._transition===ye.SPRITE&&this._setCurrentStateSpriteFrame(t.spriteFrame)},o._setCurrentStateSpriteFrame=function(t){if(t)switch(this._getButtonState()){case be.NORMAL:this._normalSprite=t;break;case be.HOVER:this._hoverSprite=t;break;case be.PRESSED:this._pressedSprite=t;break;case be.DISABLED:this._disabledSprite=t}},o._onTargetColorChanged=function(t){this._transition===ye.COLOR&&this._setCurrentStateColor(t)},o._setCurrentStateColor=function(t){switch(this._getButtonState()){case be.NORMAL:this._normalColor=t;break;case be.HOVER:this._hoverColor=t;break;case be.PRESSED:this._pressedColor=t;break;case be.DISABLED:this._disabledColor=t}},o._onTargetTransformChanged=function(t){t|u.SCALE&&this._originalScale&&this._transition===ye.SCALE&&this._transitionFinished&&c.copy(this._originalScale,this.target.getScale())},o._onTouchBegan=function(t){this._interactable&&this.enabledInHierarchy&&(this._pressed=!0,this._updateState(),t&&(t.propagationStopped=!0))},o._onTouchMove=function(t){if(this._interactable&&this.enabledInHierarchy&&this._pressed&&t){var e=t.touch;if(e){var i,o=this.node._uiProps.uiTransformComp.isHit(e.getUILocation());this._transition===ye.SCALE&&this.target&&this._originalScale?o?(c.copy(this._fromScale,this._originalScale),c.multiplyScalar(this._toScale,this._originalScale,this._zoomScale),this._transitionFinished=!1):(this._time=0,this._transitionFinished=!0,this.target.setScale(this._originalScale)):(i=o?be.PRESSED:be.NORMAL,this._applyTransition(i)),t&&(t.propagationStopped=!0)}}},o._onTouchEnded=function(t){this._interactable&&this.enabledInHierarchy&&(this._pressed&&(ot.emitEvents(this.clickEvents,t),this.node.emit(Te.CLICK,this)),this._pressed=!1,this._updateState(),t&&(t.propagationStopped=!0))},o._onTouchCancel=function(){this._interactable&&this.enabledInHierarchy&&(this._pressed=!1,this._updateState())},o._onMouseMoveIn=function(){!this._pressed&&this.interactable&&this.enabledInHierarchy&&(this._transition!==ye.SPRITE||this._hoverSprite)&&(this._hovered||(this._hovered=!0,this._updateState()))},o._onMouseMoveOut=function(){this._hovered&&(this._hovered=!1,this._updateState())},o._updateState=function(){var t=this._getButtonState();this._applyTransition(t)},o._getButtonState=function(){var t=be.NORMAL;return this._interactable?this._pressed?t=be.PRESSED:this._hovered&&(t=be.HOVER):t=be.DISABLED,t.toString()},o._updateColorTransition=function(t){var e,i=this[t+"Color"],o=null===(e=this.target)||void 0===e?void 0:e.getComponent(Tt);o&&(t===be.DISABLED?o.color=i:(this._fromColor=o.color.clone(),this._toColor=i,this._time=0,this._transitionFinished=!1))},o._updateSpriteTransition=function(t){var e=this[t+"Sprite"];this._sprite&&e&&(this._sprite.spriteFrame=e)},o._updateScaleTransition=function(t){this._interactable&&(t===be.PRESSED?this._zoomUp():this._zoomBack())},o._zoomUp=function(){this._originalScale&&(c.copy(this._fromScale,this._originalScale),c.multiplyScalar(this._toScale,this._originalScale,this._zoomScale),this._time=0,this._transitionFinished=!1)},o._zoomBack=function(){this.target&&this._originalScale&&(c.copy(this._fromScale,this.target.getScale()),c.copy(this._toScale,this._originalScale),this._time=0,this._transitionFinished=!1)},o._applyTransition=function(t){var e=this._transition;e===ye.COLOR?this._updateColorTransition(t):e===ye.SPRITE?this._updateSpriteTransition(t):e===ye.SCALE&&this._updateScaleTransition(t)},_(i,[{key:"target",get:function(){return this._target||this.node},set:function(t){this._target!==t&&(this._target&&this._unregisterTargetEvent(this._target),this._target=t,this._applyTarget())}},{key:"interactable",get:function(){return this._interactable},set:function(t){this._interactable=t,this._updateState(),this._interactable||this._resetState()}},{key:"_resizeToTarget",set:function(t){t&&this._resizeNodeToTargetNode()}},{key:"transition",get:function(){return this._transition},set:function(t){this._transition!==t&&(this._transition===ye.COLOR?this._updateColorTransition(be.NORMAL):this._transition===ye.SPRITE&&this._updateSpriteTransition(be.NORMAL),this._transition=t,this._updateState())}},{key:"normalColor",get:function(){return this._normalColor},set:function(t){this._normalColor!==t&&(this._normalColor.set(t),this._updateState())}},{key:"pressedColor",get:function(){return this._pressedColor},set:function(t){this._pressedColor!==t&&this._pressedColor.set(t)}},{key:"hoverColor",get:function(){return this._hoverColor},set:function(t){this._hoverColor!==t&&this._hoverColor.set(t)}},{key:"disabledColor",get:function(){return this._disabledColor},set:function(t){this._disabledColor!==t&&(this._disabledColor.set(t),this._updateState())}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration!==t&&(this._duration=t)}},{key:"zoomScale",get:function(){return this._zoomScale},set:function(t){this._zoomScale!==t&&(this._zoomScale=t)}},{key:"normalSprite",get:function(){return this._normalSprite},set:function(t){if(this._normalSprite!==t){this._normalSprite=t;var e=this.node.getComponent(gt);e&&(e.spriteFrame=t),this._updateState()}}},{key:"pressedSprite",get:function(){return this._pressedSprite},set:function(t){this._pressedSprite!==t&&(this._pressedSprite=t,this._updateState())}},{key:"hoverSprite",get:function(){return this._hoverSprite},set:function(t){this._hoverSprite!==t&&(this._hoverSprite=t,this._updateState())}},{key:"disabledSprite",get:function(){return this._disabledSprite},set:function(t){this._disabledSprite!==t&&(this._disabledSprite=t,this._updateState())}}]),i}(E),ge.Transition=ye,ge.EventType=Te,p((te=fe).prototype,"target",[At,wt,Lt],Object.getOwnPropertyDescriptor(te.prototype,"target"),te.prototype),p(te.prototype,"interactable",[Dt,Pt],Object.getOwnPropertyDescriptor(te.prototype,"interactable"),te.prototype),p(te.prototype,"transition",[zt,It,Rt],Object.getOwnPropertyDescriptor(te.prototype,"transition"),te.prototype),p(te.prototype,"normalColor",[xt],Object.getOwnPropertyDescriptor(te.prototype,"normalColor"),te.prototype),p(te.prototype,"pressedColor",[Bt],Object.getOwnPropertyDescriptor(te.prototype,"pressedColor"),te.prototype),p(te.prototype,"hoverColor",[Nt],Object.getOwnPropertyDescriptor(te.prototype,"hoverColor"),te.prototype),p(te.prototype,"disabledColor",[Ht],Object.getOwnPropertyDescriptor(te.prototype,"disabledColor"),te.prototype),p(te.prototype,"duration",[Mt,kt,Vt],Object.getOwnPropertyDescriptor(te.prototype,"duration"),te.prototype),p(te.prototype,"zoomScale",[Ft],Object.getOwnPropertyDescriptor(te.prototype,"zoomScale"),te.prototype),p(te.prototype,"normalSprite",[jt,Gt],Object.getOwnPropertyDescriptor(te.prototype,"normalSprite"),te.prototype),p(te.prototype,"pressedSprite",[Ut,Wt],Object.getOwnPropertyDescriptor(te.prototype,"pressedSprite"),te.prototype),p(te.prototype,"hoverSprite",[Zt,Yt],Object.getOwnPropertyDescriptor(te.prototype,"hoverSprite"),te.prototype),p(te.prototype,"disabledSprite",[Xt,qt],Object.getOwnPropertyDescriptor(te.prototype,"disabledSprite"),te.prototype),ee=p(te.prototype,"clickEvents",[Kt,O,Qt,Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ie=p(te.prototype,"_interactable",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oe=p(te.prototype,"_transition",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ye.NONE}}),ne=p(te.prototype,"_normalColor",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e.WHITE.clone()}}),re=p(te.prototype,"_hoverColor",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e(211,211,211,255)}}),se=p(te.prototype,"_pressedColor",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e.WHITE.clone()}}),ae=p(te.prototype,"_disabledColor",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e(124,124,124,255)}}),he=p(te.prototype,"_normalSprite",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=p(te.prototype,"_hoverSprite",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=p(te.prototype,"_pressedSprite",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=p(te.prototype,"_disabledSprite",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=p(te.prototype,"_duration",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),pe=p(te.prototype,"_zoomScale",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),de=p(te.prototype,"_target",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$t=te))||$t)||$t)||$t)||$t)||$t)||$t,t({Button:ve,ButtonComponent:ve}),ve),Ae=function(){function t(){}return t.add=function(t){var e=this._tabIndexList;-1===e.indexOf(t)&&e.push(t)},t.remove=function(t){var e=this._tabIndexList,i=e.indexOf(t);-1!==i&&e.splice(i,1)},t.resort=function(){this._tabIndexList.sort((function(t,e){return t._delegate.tabIndex-e._delegate.tabIndex}))},t.next=function(t){var e=this._tabIndexList,i=e.indexOf(t);if(t.setFocus(!1),-1!==i){var o=e[i+1];o&&o._delegate.tabIndex>=0&&o.setFocus(!0)}},t}();Ae._tabIndexList=[],function(t){t[t.DEFAULT=0]="DEFAULT",t[t.DONE=1]="DONE",t[t.SEND=2]="SEND",t[t.SEARCH=3]="SEARCH",t[t.GO=4]="GO",t[t.NEXT=5]="NEXT"}(Ce||(Ce={})),A(Ce),function(t){t[t.ANY=0]="ANY",t[t.EMAIL_ADDR=1]="EMAIL_ADDR",t[t.NUMERIC=2]="NUMERIC",t[t.PHONE_NUMBER=3]="PHONE_NUMBER",t[t.URL=4]="URL",t[t.DECIMAL=5]="DECIMAL",t[t.SINGLE_LINE=6]="SINGLE_LINE"}(Se||(Se={})),A(Se),function(t){t[t.PASSWORD=0]="PASSWORD",t[t.SENSITIVE=1]="SENSITIVE",t[t.INITIAL_CAPS_WORD=2]="INITIAL_CAPS_WORD",t[t.INITIAL_CAPS_SENTENCE=3]="INITIAL_CAPS_SENTENCE",t[t.INITIAL_CAPS_ALL_CHARACTERS=4]="INITIAL_CAPS_ALL_CHARACTERS",t[t.DEFAULT=5]="DEFAULT"}(Ee||(Ee={})),A(Ee);var we,Le,De,Pe,ze,Ie,Re,xe,Be,Ne,He,Me,ke,Ve,Fe,je,Ge,Ue,We,Ze,Ye,Xe,qe,Ke,Qe,Je,$e,ti,ei,ii,oi,ni,ri,si,ai,hi,li,ci,ui,_i,pi,di,gi,fi,yi,bi,Ti,mi,vi,Ci,Si,Ei,Oi,Ai,wi,Li,Di,Pi,zi,Ii,Ri,xi=function(){function t(){this._editing=!1,this._delegate=null}var e=t.prototype;return e.init=function(){},e.onEnable=function(){},e.update=function(){},e.onDisable=function(){this._editing&&this.endEditing()},e.clear=function(){this._delegate=null},e.setTabIndex=function(){},e.setSize=function(){},e.setFocus=function(t){t?this.beginEditing():this.endEditing()},e.isFocused=function(){return this._editing},e.beginEditing=function(){},e.endEditing=function(){},t}(),Bi=new w,Ni=new w,Hi=new c,Mi=null,ki=0,Vi=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this)._delegate=null,e._inputMode=-1,e._inputFlag=-1,e._returnType=-1,e.__eventListeners={},e.__fullscreen=!1,e.__autoResize=!1,e.__orientationChanged=void 0,e._edTxt=null,e._isTextArea=!1,e._textLabelFont=null,e._textLabelFontSize=null,e._textLabelFontColor=null,e._textLabelAlign=null,e._placeholderLabelFont=null,e._placeholderLabelFontSize=null,e._placeholderLabelFontColor=null,e._placeholderLabelAlign=null,e._placeholderLineHeight=null,e._placeholderStyleSheet=null,e._domId="EditBoxId_"+ ++ki,e}a(e,t);var i=e.prototype;return i.init=function(t){t&&(this._delegate=t,t.inputMode===Se.ANY?this._createTextArea():this._createInput(),Ae.add(this),this.setTabIndex(t.tabIndex),this._initStyleSheet(),this._registerEventListeners(),this._addDomToGameContainer(),this.__fullscreen=st.isAutoFullScreenEnabled(),this.__autoResize=st._resizeWithBrowserSize)},i.clear=function(){this._removeEventListeners(),this._removeDomFromGameContainer(),Ae.remove(this),Mi===this&&(Mi=null),this._delegate=null},i.update=function(){this._updateMatrix()},i.setTabIndex=function(t){this._edTxt.tabIndex=t,Ae.resort()},i.setSize=function(t,e){var i=this._edTxt;i&&(i.style.width=t+"px",i.style.height=e+"px")},i.beginEditing=function(){Mi&&Mi!==this&&Mi.setFocus(!1),this._editing=!0,Mi=this,this._delegate._editBoxEditingDidBegan(),this._showDom(),this._edTxt.focus()},i.endEditing=function(){this._edTxt.blur()},i._createInput=function(){this._isTextArea=!1,this._edTxt=document.createElement("input")},i._createTextArea=function(){this._isTextArea=!0,this._edTxt=document.createElement("textarea")},i._addDomToGameContainer=function(){L.GAME_VIEW&&this._edTxt?(L.gameView.container.appendChild(this._edTxt),L.gameView.head.appendChild(this._placeholderStyleSheet)):at.container&&this._edTxt&&(at.container.appendChild(this._edTxt),document.head.appendChild(this._placeholderStyleSheet))},i._removeDomFromGameContainer=function(){(L.GAME_VIEW?D(L.gameView.container,this._edTxt):D(at.container,this._edTxt))&&this._edTxt&&(L.GAME_VIEW?L.gameView.container.removeChild(this._edTxt):at.container.removeChild(this._edTxt)),(L.GAME_VIEW?D(L.gameView.head,this._placeholderStyleSheet):D(document.head,this._placeholderStyleSheet))&&(L.GAME_VIEW?L.gameView.head.removeChild(this._placeholderStyleSheet):document.head.removeChild(this._placeholderStyleSheet)),this._edTxt=null,this._placeholderStyleSheet=null},i._showDom=function(){this._updateMaxLength(),this._updateInputType(),this._updateStyleSheet(),this._edTxt&&this._delegate&&(this._edTxt.style.display="",this._delegate._hideLabels()),P.isMobile&&this._showDomOnMobile()},i._hideDom=function(){var t=this._edTxt;t&&this._delegate&&(t.style.display="none",this._delegate._showLabels()),P.isMobile&&this._hideDomOnMobile()},i._showDomOnMobile=function(){z.os===I.ANDROID&&(this.__fullscreen&&(st.enableAutoFullScreen(!1),ht.exitFullScreen()),this.__autoResize&&st.resizeWithBrowserSize(!1),this._adjustWindowScroll())},i._hideDomOnMobile=function(){var t=this;z.os===I.ANDROID&&(this.__autoResize&&st.resizeWithBrowserSize(!0),setTimeout((function(){Mi||t.__fullscreen&&st.enableAutoFullScreen(!0)}),400)),this._scrollBackWindow()},i._adjustWindowScroll=function(){var t=this;setTimeout((function(){window.scrollY<40&&t._edTxt.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}),400)},i._scrollBackWindow=function(){setTimeout((function(){z.browserType!==R.WECHAT||z.os!==I.IOS?window.scrollTo(0,0):window.top&&window.top.scrollTo(0,0)}),400)},i._updateMatrix=function(){if(this._edTxt){var t=this._delegate.node,e=st.getScaleX(),i=st.getScaleY(),o=1,n=1;L.GAME_VIEW&&(o=L.gameView.canvas.width/L.game.canvas.width,n=L.gameView.canvas.height/L.game.canvas.height),e*=o,i*=n;var r=st.getViewportRect(),s=st.getDevicePixelRatio();t.getWorldMatrix(Bi);var a=t._uiProps.uiTransformComp;if(a&&c.set(Hi,-a.anchorX*a.width,-a.anchorY*a.height,Hi.z),w.transform(Bi,Bi,Hi),t._uiProps.uiTransformComp){var h=nt.root.batcher2D.getFirstRenderCamera(t);if(h){h.node.getWorldRT(Ni);var l=Ni.m12,u=Ni.m13,_=lt.center;Ni.m12=_.x-(Ni.m00*l+Ni.m04*u),Ni.m13=_.y-(Ni.m01*l+Ni.m05*u),w.multiply(Ni,Ni,Bi),e/=s,i/=s;var p=L.GAME_VIEW?L.gameView.container:at.container,d=Ni.m00*e,g=Bi.m01,f=Bi.m04,y=Ni.m05*i,b=parseInt(p&&p.style.paddingLeft||"0");b+=r.x*o/s;var T=parseInt(p&&p.style.paddingBottom||"0");T+=r.y/s;var m="matrix("+d+","+-g+","+-f+","+y+","+(Ni.m12*e+b)+","+-(Ni.m13*i+T)+")";this._edTxt.style.transform=m,this._edTxt.style["-webkit-transform"]=m,this._edTxt.style["transform-origin"]="0px 100% 0px",this._edTxt.style["-webkit-transform-origin"]="0px 100% 0px"}}}},i._updateInputType=function(){var t=this._delegate,e=t.inputMode,i=t.inputFlag,o=t.returnType,n=this._edTxt;if(this._inputMode!==e||this._inputFlag!==i||this._returnType!==o){if(this._inputMode=e,this._inputFlag=i,this._returnType=o,this._isTextArea){var r="none";return i===Ee.INITIAL_CAPS_ALL_CHARACTERS?r="uppercase":i===Ee.INITIAL_CAPS_WORD&&(r="capitalize"),void(n.style.textTransform=r)}if(n=n,i===Ee.PASSWORD)return n.type="password",void(n.style.textTransform="none");var s=n.type;e===Se.EMAIL_ADDR?s="email":e===Se.NUMERIC||e===Se.DECIMAL?s="number":e===Se.PHONE_NUMBER?(s="number",n.pattern="[0-9]*"):e===Se.URL?s="url":(s="text",o===Ce.SEARCH&&(s="search")),n.type=s;var a="none";i===Ee.INITIAL_CAPS_ALL_CHARACTERS?a="uppercase":i===Ee.INITIAL_CAPS_WORD&&(a="capitalize"),n.style.textTransform=a}},i._updateMaxLength=function(){var t=this._delegate.maxLength;t<0&&(t=65535),this._edTxt.maxLength=t},i._initStyleSheet=function(){if(this._edTxt){var t=this._edTxt;t.style.color="#000000",t.style.border="0px",t.style.background="transparent",t.style.width="100%",t.style.height="100%",t.style.outline="medium",t.style.padding="0",t.style.textTransform="none",t.style.display="none",t.style.position="absolute",t.style.bottom="0px",t.style.left="2px",t.className="cocosEditBox",t.style.fontFamily="Arial",t.id=this._domId,this._isTextArea?(t.style.resize="none",t.style.overflowY="scroll"):((t=t).type="text",t.style["-moz-appearance"]="textfield"),this._placeholderStyleSheet=document.createElement("style")}},i._updateStyleSheet=function(){var t=this._delegate,e=this._edTxt;e&&t&&(e.value=t.string,e.placeholder=t.placeholder,this._updateTextLabel(t.textLabel),this._updatePlaceholderLabel(t.placeholderLabel))},i._updateTextLabel=function(t){if(t){var e=t.font;e=!e||e instanceof ft?t.fontFamily:e._fontFamily;var i=t.fontSize*t.node.scale.y;if((this._textLabelFont!==e||this._textLabelFontSize!==i||this._textLabelFontColor!==t.fontColor||this._textLabelAlign!==t.horizontalAlign)&&(this._textLabelFont=e,this._textLabelFontSize=i,this._textLabelFontColor=t.fontColor,this._textLabelAlign=t.horizontalAlign,this._edTxt)){var o=this._edTxt;switch(o.style.fontSize=i+"px",o.style.color=t.color.toCSS(),o.style.fontFamily=e,t.horizontalAlign){case yt.HorizontalAlign.LEFT:o.style.textAlign="left";break;case yt.HorizontalAlign.CENTER:o.style.textAlign="center";break;case yt.HorizontalAlign.RIGHT:o.style.textAlign="right"}}}},i._updatePlaceholderLabel=function(t){if(t){var e=t.font;e=!e||e instanceof ft?t.fontFamily:t.font._fontFamily;var i=t.fontSize*t.node.scale.y;if(this._placeholderLabelFont!==e||this._placeholderLabelFontSize!==i||this._placeholderLabelFontColor!==t.fontColor||this._placeholderLabelAlign!==t.horizontalAlign||this._placeholderLineHeight!==t.fontSize){this._placeholderLabelFont=e,this._placeholderLabelFontSize=i,this._placeholderLabelFontColor=t.fontColor,this._placeholderLabelAlign=t.horizontalAlign,this._placeholderLineHeight=t.fontSize;var o=this._placeholderStyleSheet,n=t.color.toCSS(),r=t.fontSize,s="";switch(t.horizontalAlign){case yt.HorizontalAlign.LEFT:s="left";break;case yt.HorizontalAlign.CENTER:s="center";break;case yt.HorizontalAlign.RIGHT:s="right"}o.innerHTML="#"+this._domId+"::-webkit-input-placeholder{text-transform: initial;-family: "+e+";font-size: "+i+"px;color: "+n+";line-height: "+r+"px;text-align: "+s+";}#"+this._domId+"::-moz-placeholder{text-transform: initial;-family: "+e+";font-size: "+i+"px;color: "+n+";line-height: "+r+"px;text-align: "+s+";}#"+this._domId+"::-ms-input-placeholder{text-transform: initial;-family: "+e+";font-size: "+i+"px;color: "+n+";line-height: "+r+"px;text-align: "+s+";}",z.browserType===R.EDGE&&(o.innerHTML+="#"+this._domId+"::-ms-clear{display: none;}")}}},i._registerEventListeners=function(){var t=this;if(this._edTxt){var e=this._edTxt,i=!1,o=this.__eventListeners;o.compositionStart=function(){i=!0},o.compositionEnd=function(){i=!1,t._delegate._editBoxTextChanged(e.value)},o.onInput=function(){if(!i){var o=t._delegate,n=o.maxLength;n>=0&&(e.value=e.value.slice(0,n)),o._editBoxTextChanged(e.value)}},o.onClick=function(){t._editing&&P.isMobile&&t._adjustWindowScroll()},o.onKeydown=function(i){i.keyCode===x.KEY.enter?(i.propagationStopped=!0,t._delegate._editBoxEditingReturn(),t._isTextArea||e.blur()):i.keyCode===x.KEY.tab&&(i.propagationStopped=!0,i.preventDefault(),Ae.next(t))},o.onBlur=function(){P.isMobile&&i&&o.compositionEnd(),t._editing=!1,Mi=null,t._hideDom(),t._delegate._editBoxEditingDidEnded()},e.addEventListener("compositionstart",o.compositionStart),e.addEventListener("compositionend",o.compositionEnd),e.addEventListener("input",o.onInput),e.addEventListener("keydown",o.onKeydown),e.addEventListener("blur",o.onBlur),e.addEventListener("touchstart",o.onClick)}},i._removeEventListeners=function(){if(this._edTxt){var t=this._edTxt,e=this.__eventListeners;t.removeEventListener("compositionstart",e.compositionStart),t.removeEventListener("compositionend",e.compositionEnd),t.removeEventListener("input",e.onInput),t.removeEventListener("keydown",e.onKeydown),t.removeEventListener("blur",e.onBlur),t.removeEventListener("touchstart",e.onClick),e.compositionStart=null,e.compositionEnd=null,e.onInput=null,e.onKeydown=null,e.onBlur=null,e.onClick=null}},e}(xi);!function(t){t.EDITING_DID_BEGAN="editing-did-began",t.EDITING_DID_ENDED="editing-did-ended",t.TEXT_CHANGED="text-changed",t.EDITING_RETURN="editing-return"}(Ri||(Ri={}));var Fi,ji,Gi,Ui,Wi,Zi,Yi,Xi,qi,Ki,Qi,Ji,$i,to,eo,io,oo,no,ro,so,ao,ho,lo,co,uo,_o,po,go,fo,yo,bo,To,mo,vo,Co,So,Eo,Oo,Ao,wo,Lo,Do,Po,zo,Io,Ro,xo,Bo,No,Ho,Mo,ko,Vo,Fo,jo=function(e){return t({EditBox:e,EditBoxComponent:e}),e}((we=o("cc.EditBox"),Le=d(),De=g(110),Pe=f(),ze=y(mt),Ie=b(),Re=T(),xe=b(),Be=T(),Ne=n(yt),He=b(),Me=T(),ke=n(yt),Ve=b(),Fe=T(),je=n(dt),Ge=b(),Ue=T(),We=n(Ee),Ze=b(),Ye=T(),Xe=n(Se),qe=b(),Ke=T(),Qe=n(Ce),Je=b(),$e=T(),ti=b(),ei=T(),ii=b(),oi=T(),ni=n([ot]),ri=b(),si=T(),ai=n([ot]),hi=b(),li=T(),ci=n([ot]),ui=b(),_i=T(),pi=n([ot]),di=b(),gi=T(),we(fi=Le(fi=De(fi=Pe(fi=ze(fi=s((Ii=zi=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"editingDidBegan",bi,S(e)),C(e,"textChanged",Ti,S(e)),C(e,"editingDidEnded",mi,S(e)),C(e,"editingReturn",vi,S(e)),e._impl=null,e._background=null,C(e,"_textLabel",Ci,S(e)),C(e,"_placeholderLabel",Si,S(e)),C(e,"_returnType",Ei,S(e)),C(e,"_string",Oi,S(e)),C(e,"_tabIndex",Ai,S(e)),C(e,"_backgroundImage",wi,S(e)),C(e,"_inputFlag",Li,S(e)),C(e,"_inputMode",Di,S(e)),C(e,"_maxLength",Pi,S(e)),e._isLabelVisible=!1,e}a(e,t);var i=e.prototype;return i.__preload=function(){this._init()},i.onEnable=function(){this._registerEvent(),this._impl&&this._impl.onEnable()},i.update=function(){this._impl&&this._impl.update()},i.onDisable=function(){this._unregisterEvent(),this._impl&&this._impl.onDisable()},i.onDestroy=function(){this._impl&&this._impl.clear()},i.setFocus=function(){this._impl&&this._impl.setFocus(!0)},i.focus=function(){this._impl&&this._impl.setFocus(!0)},i.blur=function(){this._impl&&this._impl.setFocus(!1)},i.isFocused=function(){return!!this._impl&&this._impl.isFocused()},i._editBoxEditingDidBegan=function(){ot.emitEvents(this.editingDidBegan,this),this.node.emit(Ri.EDITING_DID_BEGAN,this)},i._editBoxEditingDidEnded=function(){ot.emitEvents(this.editingDidEnded,this),this.node.emit(Ri.EDITING_DID_ENDED,this)},i._editBoxTextChanged=function(t){t=this._updateLabelStringStyle(t,!0),this.string=t,ot.emitEvents(this.textChanged,t,this),this.node.emit(Ri.TEXT_CHANGED,this)},i._editBoxEditingReturn=function(){ot.emitEvents(this.editingReturn,this),this.node.emit(Ri.EDITING_RETURN,this)},i._showLabels=function(){this._isLabelVisible=!0,this._updateLabels()},i._hideLabels=function(){this._isLabelVisible=!1,this._textLabel&&(this._textLabel.node.active=!1),this._placeholderLabel&&(this._placeholderLabel.node.active=!1)},i._onTouchBegan=function(t){t.propagationStopped=!0},i._onTouchCancel=function(t){t.propagationStopped=!0},i._onTouchEnded=function(t){this._impl&&this._impl.beginEditing(),t.propagationStopped=!0},i._init=function(){this._createBackgroundSprite(),this._updatePlaceholderLabel(),this._updateTextLabel(),this._isLabelVisible=!0,this.node.on(l.SIZE_CHANGED,this._resizeChildNodes,this),(this._impl=new e._EditBoxImpl).init(this),this._updateString(this._string),this._syncSize()},i._createBackgroundSprite=function(){this._background||(this._background=this.node.getComponent(gt),this._background||(this._background=this.node.addComponent(gt))),this._background.type=gt.Type.SLICED,this._background.spriteFrame=this._backgroundImage},i._updateTextLabel=function(){var t=this._textLabel;if(!t){var e=this.node.getChildByName("TEXT_LABEL");e||(e=new r("TEXT_LABEL")),(t=e.getComponent(yt))||(t=e.addComponent(yt)),e.parent=this.node,this._textLabel=t}this._textLabel.node._uiProps.uiTransformComp.setAnchorPoint(0,1),t.overflow=yt.Overflow.CLAMP,this._inputMode===Se.ANY?(t.verticalAlign=bt.TOP,t.enableWrapText=!0):t.enableWrapText=!1,t.string=this._updateLabelStringStyle(this._string)},i._updatePlaceholderLabel=function(){var t=this._placeholderLabel;if(!t){var e=this.node.getChildByName("PLACEHOLDER_LABEL");e||(e=new r("PLACEHOLDER_LABEL")),(t=e.getComponent(yt))||(t=e.addComponent(yt)),e.parent=this.node,this._placeholderLabel=t}this._placeholderLabel.node._uiProps.uiTransformComp.setAnchorPoint(0,1),t.overflow=yt.Overflow.CLAMP,this._inputMode===Se.ANY?(t.verticalAlign=bt.TOP,t.enableWrapText=!0):t.enableWrapText=!1,t.string=this.placeholder},i._syncSize=function(){var t=this.node._uiProps.uiTransformComp,e=t.contentSize;if(this._background){var i=this._background.node._uiProps.uiTransformComp;i.anchorPoint=t.anchorPoint,i.setContentSize(e)}this._updateLabelPosition(e),this._impl&&this._impl.setSize(e.width,e.height)},i._updateLabels=function(){if(this._isLabelVisible){var t=this._string;this._textLabel&&(this._textLabel.node.active=""!==t),this._placeholderLabel&&(this._placeholderLabel.node.active=""===t)}},i._updateString=function(t){var e=this._textLabel;if(e){var i=t;i&&(i=this._updateLabelStringStyle(i)),e.string=i,this._updateLabels()}},i._updateLabelStringStyle=function(t,e){void 0===e&&(e=!1);var i,o=this._inputFlag;if(e||o!==Ee.PASSWORD)o===Ee.INITIAL_CAPS_ALL_CHARACTERS?t=t.toUpperCase():o===Ee.INITIAL_CAPS_WORD?t=t.replace(/(?:^|\s)\S/g,(function(t){return t.toUpperCase()})):o===Ee.INITIAL_CAPS_SENTENCE&&(t=(i=t).charAt(0).toUpperCase()+i.slice(1));else{for(var n="",r=t.length,s=0;s<r;++s)n+="●";t=n}return t},i._registerEvent=function(){this.node.on(l.TOUCH_START,this._onTouchBegan,this),this.node.on(l.TOUCH_END,this._onTouchEnded,this)},i._unregisterEvent=function(){this.node.off(l.TOUCH_START,this._onTouchBegan,this),this.node.off(l.TOUCH_END,this._onTouchEnded,this)},i._updateLabelPosition=function(t){var e=this.node._uiProps.uiTransformComp,i=-e.anchorX*e.width,o=-e.anchorY*e.height,n=this._placeholderLabel,r=this._textLabel;r&&(r.node._uiProps.uiTransformComp.setContentSize(t.width-2,t.height),r.node.setPosition(i+2,o+t.height,r.node.position.z),this._inputMode===Se.ANY&&(r.verticalAlign=bt.TOP),r.enableWrapText=this._inputMode===Se.ANY),n&&(n.node._uiProps.uiTransformComp.setContentSize(t.width-2,t.height),n.lineHeight=t.height,n.node.setPosition(i+2,o+t.height,n.node.position.z),this._inputMode===Se.ANY&&(n.verticalAlign=bt.TOP),n.enableWrapText=this._inputMode===Se.ANY)},i._resizeChildNodes=function(){var t=this.node._uiProps.uiTransformComp,e=this._textLabel&&this._textLabel.node;e&&(e.setPosition(-t.width/2,t.height/2,e.position.z),e._uiProps.uiTransformComp.setContentSize(t.contentSize));var i=this._placeholderLabel&&this._placeholderLabel.node;i&&(i.setPosition(-t.width/2,t.height/2,i.position.z),i._uiProps.uiTransformComp.setContentSize(t.contentSize));var o=this._background&&this._background.node;o&&o._uiProps.uiTransformComp.setContentSize(t.contentSize)},_(e,[{key:"string",get:function(){return this._string},set:function(t){this._maxLength>=0&&t.length>=this._maxLength&&(t=t.slice(0,this._maxLength)),this._string=t,this._updateString(t)}},{key:"placeholder",get:function(){return this._placeholderLabel?this._placeholderLabel.string:""},set:function(t){this._placeholderLabel&&(this._placeholderLabel.string=t)}},{key:"textLabel",get:function(){return this._textLabel},set:function(t){this._textLabel!==t&&(this._textLabel=t,this._textLabel&&(this._updateTextLabel(),this._updateLabels()))}},{key:"placeholderLabel",get:function(){return this._placeholderLabel},set:function(t){this._placeholderLabel!==t&&(this._placeholderLabel=t,this._placeholderLabel&&(this._updatePlaceholderLabel(),this._updateLabels()))}},{key:"backgroundImage",get:function(){return this._backgroundImage},set:function(t){this._backgroundImage!==t&&(this._backgroundImage=t,this._createBackgroundSprite())}},{key:"inputFlag",get:function(){return this._inputFlag},set:function(t){this._inputFlag=t,this._updateString(this._string)}},{key:"inputMode",get:function(){return this._inputMode},set:function(t){this._inputMode!==t&&(this._inputMode=t,this._updateTextLabel(),this._updatePlaceholderLabel())}},{key:"returnType",get:function(){return this._returnType},set:function(t){this._returnType=t}},{key:"maxLength",get:function(){return this._maxLength},set:function(t){this._maxLength=t}},{key:"tabIndex",get:function(){return this._tabIndex},set:function(t){this._tabIndex!==t&&(this._tabIndex=t,this._impl&&this._impl.setTabIndex(t))}}]),e}(E),zi._EditBoxImpl=xi,zi.KeyboardReturnType=Ce,zi.InputFlag=Ee,zi.InputMode=Se,zi.EventType=Ri,p((yi=Ii).prototype,"string",[Ie,Re],Object.getOwnPropertyDescriptor(yi.prototype,"string"),yi.prototype),p(yi.prototype,"placeholder",[xe,Be],Object.getOwnPropertyDescriptor(yi.prototype,"placeholder"),yi.prototype),p(yi.prototype,"textLabel",[Ne,He,Me],Object.getOwnPropertyDescriptor(yi.prototype,"textLabel"),yi.prototype),p(yi.prototype,"placeholderLabel",[ke,Ve,Fe],Object.getOwnPropertyDescriptor(yi.prototype,"placeholderLabel"),yi.prototype),p(yi.prototype,"backgroundImage",[je,Ge,Ue],Object.getOwnPropertyDescriptor(yi.prototype,"backgroundImage"),yi.prototype),p(yi.prototype,"inputFlag",[We,Ze,Ye],Object.getOwnPropertyDescriptor(yi.prototype,"inputFlag"),yi.prototype),p(yi.prototype,"inputMode",[Xe,qe,Ke],Object.getOwnPropertyDescriptor(yi.prototype,"inputMode"),yi.prototype),p(yi.prototype,"returnType",[Qe,Je,$e],Object.getOwnPropertyDescriptor(yi.prototype,"returnType"),yi.prototype),p(yi.prototype,"maxLength",[ti,ei],Object.getOwnPropertyDescriptor(yi.prototype,"maxLength"),yi.prototype),p(yi.prototype,"tabIndex",[ii,oi],Object.getOwnPropertyDescriptor(yi.prototype,"tabIndex"),yi.prototype),bi=p(yi.prototype,"editingDidBegan",[ni,O,ri,si],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ti=p(yi.prototype,"textChanged",[ai,O,hi,li],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),mi=p(yi.prototype,"editingDidEnded",[ci,O,ui,_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),vi=p(yi.prototype,"editingReturn",[pi,O,di,gi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ci=p(yi.prototype,"_textLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Si=p(yi.prototype,"_placeholderLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ei=p(yi.prototype,"_returnType",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ce.DEFAULT}}),Oi=p(yi.prototype,"_string",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ai=p(yi.prototype,"_tabIndex",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wi=p(yi.prototype,"_backgroundImage",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Li=p(yi.prototype,"_inputFlag",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ee.DEFAULT}}),Di=p(yi.prototype,"_inputMode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Se.ANY}}),Pi=p(yi.prototype,"_maxLength",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),fi=yi))||fi)||fi)||fi)||fi)||fi)||fi));"object"!=typeof window||"object"!=typeof document||B||N||H||(jo._EditBoxImpl=Vi);var Go,Uo,Wo,Zo,Yo,Xo,qo=l;!function(t){t[t.NONE=0]="NONE",t[t.HORIZONTAL=1]="HORIZONTAL",t[t.VERTICAL=2]="VERTICAL",t[t.GRID=3]="GRID"}(Go||(Go={})),i(Go),function(t){t[t.NONE=0]="NONE",t[t.CONTAINER=1]="CONTAINER",t[t.CHILDREN=2]="CHILDREN"}(Uo||(Uo={})),i(Uo),function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(Wo||(Wo={})),i(Wo),function(t){t[t.BOTTOM_TO_TOP=0]="BOTTOM_TO_TOP",t[t.TOP_TO_BOTTOM=1]="TOP_TO_BOTTOM"}(Zo||(Zo={})),i(Zo),function(t){t[t.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",t[t.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT"}(Yo||(Yo={})),i(Yo),function(t){t[t.NONE=0]="NONE",t[t.FIXED_ROW=1]="FIXED_ROW",t[t.FIXED_COL=2]="FIXED_COL"}(Xo||(Xo={})),i(Xo);var Ko,Qo,Jo,$o,tn,en,on,nn,rn,sn,an,hn,ln,cn,un,_n,pn,dn,gn,fn,yn,bn,Tn,mn=new c,vn=function(e){return t({Layout:e,LayoutComponent:e}),e}((Fi=o("cc.Layout"),ji=d(),Gi=g(110),Ui=f(),Wi=y(mt),Zi=k(),Yi=T(),Xi=k(),qi=T(),Ki=n(Go),Qi=T(),Ji=n(Uo),$i=k(),to=T(),eo=k(),io=T(),oo=n(Wo),no=T(),ro=T(),so=T(),ao=T(),ho=T(),lo=T(),co=T(),uo=n(Zo),_o=T(),po=n(Yo),go=T(),fo=n(Xo),yo=k(),bo=T(),To=k(),mo=T(),vo=T(),Fi(Co=ji(Co=Gi(Co=Ui(Co=Wi(Co=s((Fo=Vo=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"_resizeMode",Eo,S(e)),C(e,"_layoutType",Oo,S(e)),C(e,"_cellSize",Ao,S(e)),C(e,"_startAxis",wo,S(e)),C(e,"_paddingLeft",Lo,S(e)),C(e,"_paddingRight",Do,S(e)),C(e,"_paddingTop",Po,S(e)),C(e,"_paddingBottom",zo,S(e)),C(e,"_spacingX",Io,S(e)),C(e,"_spacingY",Ro,S(e)),C(e,"_verticalDirection",xo,S(e)),C(e,"_horizontalDirection",Bo,S(e)),C(e,"_constraint",No,S(e)),C(e,"_constraintNum",Ho,S(e)),C(e,"_affectedByScale",Mo,S(e)),C(e,"_isAlign",ko,S(e)),e._layoutSize=new M(300,200),e._layoutDirty=!0,e._childrenDirty=!1,e._usefulLayoutObj=[],e._init=!1,e}a(e,t);var i=e.prototype;return i.updateLayout=function(t){void 0===t&&(t=!1),(this._layoutDirty||t)&&this.node.children.length>0&&(this._doLayout(),this._layoutDirty=!1)},i.onEnable=function(){this._addEventListeners();var t=this.node._uiProps.uiTransformComp;t.contentSize.equals(M.ZERO)&&t.setContentSize(this._layoutSize),this._childrenChanged()},i.onDisable=function(){this._usefulLayoutObj.length=0,this._removeEventListeners()},i._checkUsefulObj=function(){this._usefulLayoutObj.length=0;for(var t=this.node.children,e=0;e<t.length;++e){var i=t[e],o=i._uiProps.uiTransformComp;i.activeInHierarchy&&o&&this._usefulLayoutObj.push(o)}},i._addEventListeners=function(){nt.on(rt.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.on(qo.SIZE_CHANGED,this._resized,this),this.node.on(qo.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.on(qo.CHILD_ADDED,this._childAdded,this),this.node.on(qo.CHILD_REMOVED,this._childRemoved,this),this.node.on(qo.SIBLING_ORDER_CHANGED,this._childrenChanged,this),this.node.on("childrenSiblingOrderChanged",this.updateLayout,this),this._addChildrenEventListeners()},i._removeEventListeners=function(){nt.off(rt.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.off(qo.SIZE_CHANGED,this._resized,this),this.node.off(qo.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.off(qo.CHILD_ADDED,this._childAdded,this),this.node.off(qo.CHILD_REMOVED,this._childRemoved,this),this.node.off(qo.SIBLING_ORDER_CHANGED,this._childrenChanged,this),this.node.off("childrenSiblingOrderChanged",this.updateLayout,this),this._removeChildrenEventListeners()},i._addChildrenEventListeners=function(){for(var t=this.node.children,e=0;e<t.length;++e){var i=t[e];i.on(qo.SIZE_CHANGED,this._doLayoutDirty,this),i.on(qo.TRANSFORM_CHANGED,this._transformDirty,this),i.on(qo.ANCHOR_CHANGED,this._doLayoutDirty,this),i.on("active-in-hierarchy-changed",this._childrenChanged,this)}},i._removeChildrenEventListeners=function(){for(var t=this.node.children,e=0;e<t.length;++e){var i=t[e];i.off(qo.SIZE_CHANGED,this._doLayoutDirty,this),i.off(qo.TRANSFORM_CHANGED,this._transformDirty,this),i.off(qo.ANCHOR_CHANGED,this._doLayoutDirty,this),i.off("active-in-hierarchy-changed",this._childrenChanged,this)}},i._childAdded=function(t){t.on(qo.SIZE_CHANGED,this._doLayoutDirty,this),t.on(qo.TRANSFORM_CHANGED,this._transformDirty,this),t.on(qo.ANCHOR_CHANGED,this._doLayoutDirty,this),t.on("active-in-hierarchy-changed",this._childrenChanged,this),this._childrenChanged()},i._childRemoved=function(t){t.off(qo.SIZE_CHANGED,this._doLayoutDirty,this),t.off(qo.TRANSFORM_CHANGED,this._transformDirty,this),t.off(qo.ANCHOR_CHANGED,this._doLayoutDirty,this),t.off("active-in-hierarchy-changed",this._childrenChanged,this),this._childrenChanged()},i._resized=function(){this._layoutSize.set(this.node._uiProps.uiTransformComp.contentSize),this._doLayoutDirty()},i._doLayoutHorizontally=function(t,e,i,o){var n=this.node._uiProps.uiTransformComp.anchorPoint,r=this._getFixedBreakingNum(),s=1,a=this._paddingLeft;this._horizontalDirection===Yo.RIGHT_TO_LEFT&&(s=-1,a=this._paddingRight);var h=(this._horizontalDirection-n.x)*t+s*a,l=h-s*this._spacingX,c=0,u=0,_=0,p=0,d=!1,g=this._usefulLayoutObj.length,f=this._cellSize.width,y=this._getPaddingH();this._layoutType!==Go.GRID&&this._resizeMode===Uo.CHILDREN&&(f=(t-y-(g-1)*this._spacingX)/g);for(var b=this._usefulLayoutObj,T=0;T<b.length;++T){var m=b[T],v=m.node,C=v.scale,S=this._getUsedScaleValue(C.x),E=this._getUsedScaleValue(C.y);this._resizeMode===Uo.CHILDREN&&(m.width=f/S,this._layoutType===Go.GRID&&(m.height=this._cellSize.height/E));var O=Math.abs(this._horizontalDirection-m.anchorX),A=m.width*S,w=m.height*E;w>_&&(p=Math.max(_,p),u=_||w,_=w),l+=s*(O*A+this._spacingX);var L=s*(1-O)*A;if(e){if(r>0)(d=T/r>0&&T%r==0)&&(u=_>w?_:u);else if(A>t-y)l>h+s*O*A&&(d=!0);else{var D=(1-this._horizontalDirection-n.x)*t,P=l+L+s*(s>0?this._paddingRight:this._paddingLeft);d=Math.abs(P)>Math.abs(D)}d&&(l=h+s*O*A,w!==_&&(u=_),c+=u+this._spacingY,u=_=w)}var z=i(v,m,c);o&&v.setPosition(l,z),l+=L}return u=Math.max(u,_),Math.max(p,c+u)+this._getPaddingV()},i._doLayoutVertically=function(t,e,i,o){var n=this.node._uiProps.uiTransformComp.anchorPoint,r=this._getFixedBreakingNum(),s=1,a=this._paddingBottom;this._verticalDirection===Zo.TOP_TO_BOTTOM&&(s=-1,a=this._paddingTop);var h=(this._verticalDirection-n.y)*t+s*a,l=h-s*this._spacingY,c=0,u=0,_=0,p=0,d=!1,g=this._usefulLayoutObj.length,f=this._cellSize.height,y=this._getPaddingV();this._layoutType!==Go.GRID&&this._resizeMode===Uo.CHILDREN&&(f=(t-y-(g-1)*this._spacingY)/g);for(var b=this._usefulLayoutObj,T=0;T<b.length;++T){var m=b[T],v=m.node,C=v.scale,S=this._getUsedScaleValue(C.x),E=this._getUsedScaleValue(C.y);this._resizeMode===Uo.CHILDREN&&(m.height=f/E,this._layoutType===Go.GRID&&(m.width=this._cellSize.width/S));var O=Math.abs(this._verticalDirection-m.anchorY),A=m.width*S,w=m.height*E;A>c&&(u=Math.max(c,u),_=c||A,c=A),l+=s*(O*w+this._spacingY);var L=s*(1-O)*w;if(e){if(r>0)(d=T/r>0&&T%r==0)&&(_=c>w?c:_);else if(w>t-y)l>h+s*O*w&&(d=!0);else{var D=(1-this._verticalDirection-n.y)*t,P=l+L+s*(s>0?this._paddingTop:this._paddingBottom);d=Math.abs(P)>Math.abs(D)}d&&(l=h+s*O*w,A!==c&&(_=c),p+=_+this._spacingX,_=c=A)}var z=i(v,m,p);o&&(v.getPosition(mn),v.setPosition(z,l,mn.z)),l+=L}return _=Math.max(_,c),Math.max(u,p+_)+this._getPaddingH()},i._doLayoutGridAxisHorizontal=function(t,e){var i=this,o=e.width,n=1,r=-t.y*e.height,s=this._paddingBottom;this._verticalDirection===Zo.TOP_TO_BOTTOM&&(n=-1,r=(1-t.y)*e.height,s=this._paddingTop);var a=function(t,e,o){return r+n*(o+(1-e.anchorY)*e.height*i._getUsedScaleValue(t.scale.y)+s)},h=0;this._resizeMode===Uo.CONTAINER&&(h=this._doLayoutHorizontally(o,!0,a,!1),r=-t.y*h,this._verticalDirection===Zo.TOP_TO_BOTTOM&&(n=-1,r=(1-t.y)*h)),this._doLayoutHorizontally(o,!0,a,!0),this._resizeMode===Uo.CONTAINER&&this.node._uiProps.uiTransformComp.setContentSize(o,h)},i._doLayoutGridAxisVertical=function(t,e){var i=this,o=e.height,n=1,r=-t.x*e.width,s=this._paddingLeft;this._horizontalDirection===Yo.RIGHT_TO_LEFT&&(n=-1,r=(1-t.x)*e.width,s=this._paddingRight);var a=function(t,e,o){return r+n*(o+(1-e.anchorX)*e.width*i._getUsedScaleValue(t.scale.x)+s)},h=0;this._resizeMode===Uo.CONTAINER&&(h=this._doLayoutVertically(o,!0,a,!1),r=-t.x*h,this._horizontalDirection===Yo.RIGHT_TO_LEFT&&(n=-1,r=(1-t.x)*h)),this._doLayoutVertically(o,!0,a,!0),this._resizeMode===Uo.CONTAINER&&this.node._uiProps.uiTransformComp.setContentSize(h,o)},i._doLayoutGrid=function(){var t=this.node._uiProps.uiTransformComp,e=t.anchorPoint,i=t.contentSize;this.startAxis===Wo.HORIZONTAL?this._doLayoutGridAxisHorizontal(e,i):this.startAxis===Wo.VERTICAL&&this._doLayoutGridAxisVertical(e,i)},i._getHorizontalBaseWidth=function(){var t=this._usefulLayoutObj,e=0,i=t.length;if(this._resizeMode===Uo.CONTAINER){for(var o=0;o<t.length;++o){var n=t[o],r=n.node.scale;e+=n.width*this._getUsedScaleValue(r.x)}e+=(i-1)*this._spacingX+this._getPaddingH()}else e=this.node._uiProps.uiTransformComp.width;return e},i._getVerticalBaseHeight=function(){var t=this._usefulLayoutObj,e=0,i=t.length;if(this._resizeMode===Uo.CONTAINER){for(var o=0;o<t.length;++o){var n=t[o],r=n.node.scale;e+=n.height*this._getUsedScaleValue(r.y)}e+=(i-1)*this._spacingY+this._getPaddingV()}else e=this.node._uiProps.uiTransformComp.height;return e},i._doLayout=function(){var t=this;if(this._init&&!this._childrenDirty||(this._checkUsefulObj(),this._init=!0,this._childrenDirty=!1),this._layoutType===Go.HORIZONTAL){var e=this._getHorizontalBaseWidth();this._doLayoutHorizontally(e,!1,(function(e){return(t._isAlign?c.ZERO:e.position).y}),!0),this.node._uiProps.uiTransformComp.width=e}else if(this._layoutType===Go.VERTICAL){var i=this._getVerticalBaseHeight();this._doLayoutVertically(i,!1,(function(e){return(t._isAlign?c.ZERO:e.position).x}),!0),this.node._uiProps.uiTransformComp.height=i}else this._layoutType===Go.GRID&&this._doLayoutGrid()},i._getUsedScaleValue=function(t){return this._affectedByScale?Math.abs(t):1},i._transformDirty=function(t){t&u.SCALE&&t&u.POSITION&&this._affectedByScale&&this._doLayoutDirty()},i._doLayoutDirty=function(){this._layoutDirty=!0},i._childrenChanged=function(){this._childrenDirty=!0,this._doLayoutDirty()},i._getPaddingH=function(){return this._paddingLeft+this._paddingRight},i._getPaddingV=function(){return this._paddingTop+this._paddingBottom},i._getFixedBreakingNum=function(){if(this._layoutType!==Go.GRID||this._constraint===Xo.NONE||this._constraintNum<=0)return 0;var t=this._constraint===Xo.FIXED_ROW?Math.ceil(this._usefulLayoutObj.length/this._constraintNum):this._constraintNum;return this._startAxis===Wo.VERTICAL&&(t=this._constraint===Xo.FIXED_COL?Math.ceil(this._usefulLayoutObj.length/this._constraintNum):this._constraintNum),t},_(e,[{key:"alignHorizontal",get:function(){return this._isAlign},set:function(t){this._layoutType===Go.HORIZONTAL&&(this._isAlign=t,this._doLayoutDirty())}},{key:"alignVertical",get:function(){return this._isAlign},set:function(t){this._layoutType===Go.VERTICAL&&(this._isAlign=t,this._doLayoutDirty())}},{key:"type",get:function(){return this._layoutType},set:function(t){this._layoutType=t,this._doLayoutDirty()}},{key:"resizeMode",get:function(){return this._resizeMode},set:function(t){this._layoutType!==Go.NONE&&(this._resizeMode=t,this._doLayoutDirty())}},{key:"cellSize",get:function(){return this._cellSize},set:function(t){this._cellSize!==t&&(this._cellSize.set(t),this._doLayoutDirty())}},{key:"startAxis",get:function(){return this._startAxis},set:function(t){this._startAxis!==t&&(this._startAxis=t,this._doLayoutDirty())}},{key:"paddingLeft",get:function(){return this._paddingLeft},set:function(t){this._paddingLeft!==t&&(this._paddingLeft=t,this._doLayoutDirty())}},{key:"paddingRight",get:function(){return this._paddingRight},set:function(t){this._paddingRight!==t&&(this._paddingRight=t,this._doLayoutDirty())}},{key:"paddingTop",get:function(){return this._paddingTop},set:function(t){this._paddingTop!==t&&(this._paddingTop=t,this._doLayoutDirty())}},{key:"paddingBottom",get:function(){return this._paddingBottom},set:function(t){this._paddingBottom!==t&&(this._paddingBottom=t,this._doLayoutDirty())}},{key:"spacingX",get:function(){return this._spacingX},set:function(t){this._spacingX!==t&&(this._spacingX=t,this._doLayoutDirty())}},{key:"spacingY",get:function(){return this._spacingY},set:function(t){this._spacingY!==t&&(this._spacingY=t,this._doLayoutDirty())}},{key:"verticalDirection",get:function(){return this._verticalDirection},set:function(t){this._verticalDirection!==t&&(this._verticalDirection=t,this._doLayoutDirty())}},{key:"horizontalDirection",get:function(){return this._horizontalDirection},set:function(t){this._horizontalDirection!==t&&(this._horizontalDirection=t,this._doLayoutDirty())}},{key:"padding",get:function(){return this._paddingLeft},set:function(t){this.paddingLeft===t&&this._paddingRight===t&&this._paddingTop===t&&this._paddingBottom===t||(this._paddingLeft=this._paddingRight=this._paddingTop=this._paddingBottom=t,this._doLayoutDirty())}},{key:"constraint",get:function(){return this._constraint},set:function(t){this._layoutType!==Go.NONE&&this._constraint!==t&&(this._constraint=t,this._doLayoutDirty())}},{key:"constraintNum",get:function(){return this._constraintNum},set:function(t){this._constraint!==Xo.NONE&&this._constraintNum!==t&&(t<=0&&V("Limit values to be greater than 0"),this._constraintNum=t,this._doLayoutDirty())}},{key:"affectedByScale",get:function(){return this._affectedByScale},set:function(t){this._affectedByScale=t,this._doLayoutDirty()}}]),e}(E),Vo.Type=Go,Vo.VerticalDirection=Zo,Vo.HorizontalDirection=Yo,Vo.ResizeMode=Uo,Vo.AxisDirection=Wo,Vo.Constraint=Xo,p((So=Fo).prototype,"alignHorizontal",[Zi,Yi],Object.getOwnPropertyDescriptor(So.prototype,"alignHorizontal"),So.prototype),p(So.prototype,"alignVertical",[Xi,qi],Object.getOwnPropertyDescriptor(So.prototype,"alignVertical"),So.prototype),p(So.prototype,"type",[Ki,Qi],Object.getOwnPropertyDescriptor(So.prototype,"type"),So.prototype),p(So.prototype,"resizeMode",[Ji,$i,to],Object.getOwnPropertyDescriptor(So.prototype,"resizeMode"),So.prototype),p(So.prototype,"cellSize",[eo,io],Object.getOwnPropertyDescriptor(So.prototype,"cellSize"),So.prototype),p(So.prototype,"startAxis",[oo,no],Object.getOwnPropertyDescriptor(So.prototype,"startAxis"),So.prototype),p(So.prototype,"paddingLeft",[ro],Object.getOwnPropertyDescriptor(So.prototype,"paddingLeft"),So.prototype),p(So.prototype,"paddingRight",[so],Object.getOwnPropertyDescriptor(So.prototype,"paddingRight"),So.prototype),p(So.prototype,"paddingTop",[ao],Object.getOwnPropertyDescriptor(So.prototype,"paddingTop"),So.prototype),p(So.prototype,"paddingBottom",[ho],Object.getOwnPropertyDescriptor(So.prototype,"paddingBottom"),So.prototype),p(So.prototype,"spacingX",[lo],Object.getOwnPropertyDescriptor(So.prototype,"spacingX"),So.prototype),p(So.prototype,"spacingY",[co],Object.getOwnPropertyDescriptor(So.prototype,"spacingY"),So.prototype),p(So.prototype,"verticalDirection",[uo,_o],Object.getOwnPropertyDescriptor(So.prototype,"verticalDirection"),So.prototype),p(So.prototype,"horizontalDirection",[po,go],Object.getOwnPropertyDescriptor(So.prototype,"horizontalDirection"),So.prototype),p(So.prototype,"constraint",[fo,yo,bo],Object.getOwnPropertyDescriptor(So.prototype,"constraint"),So.prototype),p(So.prototype,"constraintNum",[To,mo],Object.getOwnPropertyDescriptor(So.prototype,"constraintNum"),So.prototype),p(So.prototype,"affectedByScale",[vo],Object.getOwnPropertyDescriptor(So.prototype,"affectedByScale"),So.prototype),Eo=p(So.prototype,"_resizeMode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Uo.NONE}}),Oo=p(So.prototype,"_layoutType",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Go.NONE}}),Ao=p(So.prototype,"_cellSize",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new M(40,40)}}),wo=p(So.prototype,"_startAxis",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Wo.HORIZONTAL}}),Lo=p(So.prototype,"_paddingLeft",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Do=p(So.prototype,"_paddingRight",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Po=p(So.prototype,"_paddingTop",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),zo=p(So.prototype,"_paddingBottom",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Io=p(So.prototype,"_spacingX",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ro=p(So.prototype,"_spacingY",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xo=p(So.prototype,"_verticalDirection",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Zo.TOP_TO_BOTTOM}}),Bo=p(So.prototype,"_horizontalDirection",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Yo.LEFT_TO_RIGHT}}),No=p(So.prototype,"_constraint",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Xo.NONE}}),Ho=p(So.prototype,"_constraintNum",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),Mo=p(So.prototype,"_affectedByScale",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ko=p(So.prototype,"_isAlign",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Co=So))||Co)||Co)||Co)||Co)||Co)||Co));!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.FILLED=2]="FILLED"}(Tn||(Tn={})),A(Tn);var Cn,Sn,En,On,An,wn,Ln,Dn,Pn,zn,In,Rn,xn,Bn,Nn,Hn,Mn,kn,Vn,Fn,jn,Gn,Un,Wn,Zn,Yn=function(e){return t({ProgressBar:e,ProgressBarComponent:e}),e}((Ko=o("cc.ProgressBar"),Qo=d(),Jo=g(110),$o=f(),tn=y(mt),en=n(gt),on=T(),nn=n(Tn),rn=T(),sn=T(),an=U(),hn=T(),ln=T(),Ko(cn=Qo(cn=Jo(cn=$o(cn=tn((bn=yn=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"_barSprite",_n,S(e)),C(e,"_mode",pn,S(e)),C(e,"_totalLength",dn,S(e)),C(e,"_progress",gn,S(e)),C(e,"_reverse",fn,S(e)),e}a(e,t);var i=e.prototype;return i._initBarSprite=function(){if(this._barSprite){var t=this._barSprite.node;if(!t)return;var e=this.node._uiProps.uiTransformComp,i=e.contentSize,o=e.anchorPoint,n=t._uiProps.uiTransformComp.contentSize;if(this._barSprite.fillType===gt.FillType.RADIAL&&(this._mode=Tn.FILLED),this._mode===Tn.HORIZONTAL?this.totalLength=n.width:this._mode===Tn.VERTICAL?this.totalLength=n.height:this.totalLength=this._barSprite.fillRange,t.parent===this.node){var r=-i.width*o.x;t.setPosition(r,0,0)}}},i._updateBarStatus=function(){if(this._barSprite){var t=this._barSprite.node;if(!t)return;var e=t._uiProps.uiTransformComp,i=e.anchorPoint,o=e.contentSize,n=t.getPosition(),r=new F(0,.5),s=j(this._progress),a=this._totalLength*s,h=o,l=0,u=0;switch(this._mode){case Tn.HORIZONTAL:this._reverse&&(r=new F(1,.5)),h=new M(a,o.height),l=this._totalLength,u=o.height;break;case Tn.VERTICAL:r=this._reverse?new F(.5,1):new F(.5,0),h=new M(o.width,a),l=o.width,u=this._totalLength}if(this._mode===Tn.FILLED)this._barSprite.type!==gt.Type.FILLED?V("ProgressBar FILLED mode only works when barSprite's Type is FILLED!"):(this._reverse&&(a*=-1),this._barSprite.fillRange=a);else if(this._barSprite.type!==gt.Type.FILLED){var _=r.x-i.x,p=r.y-i.y,d=new c(l*_,u*p,0);t.setPosition(n.x+d.x,n.y+d.y,n.z),e.setAnchorPoint(r),e.setContentSize(h)}else V("ProgressBar non-FILLED mode only works when barSprite's Type is non-FILLED!")}},_(e,[{key:"barSprite",get:function(){return this._barSprite},set:function(t){this._barSprite!==t&&(this._barSprite=t,this._initBarSprite())}},{key:"mode",get:function(){return this._mode},set:function(t){if(this._mode!==t&&(this._mode=t,this._barSprite)){var e=this._barSprite.node;if(!e)return;var i=e._uiProps.uiTransformComp.contentSize;this._mode===Tn.HORIZONTAL?this.totalLength=i.width:this._mode===Tn.VERTICAL?this.totalLength=i.height:this._mode===Tn.FILLED&&(this.totalLength=this._barSprite.fillRange)}}},{key:"totalLength",get:function(){return this._totalLength},set:function(t){this._mode===Tn.FILLED&&(t=j(t)),this._totalLength=t,this._updateBarStatus()}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress!==t&&(this._progress=t,this._updateBarStatus())}},{key:"reverse",get:function(){return this._reverse},set:function(t){this._reverse!==t&&(this._reverse=t,this._barSprite&&(this._barSprite.fillStart=1-this._barSprite.fillStart),this._updateBarStatus())}}]),e}(E),yn.Mode=Tn,p((un=bn).prototype,"barSprite",[en,on],Object.getOwnPropertyDescriptor(un.prototype,"barSprite"),un.prototype),p(un.prototype,"mode",[nn,rn],Object.getOwnPropertyDescriptor(un.prototype,"mode"),un.prototype),p(un.prototype,"totalLength",[sn],Object.getOwnPropertyDescriptor(un.prototype,"totalLength"),un.prototype),p(un.prototype,"progress",[an,G,hn],Object.getOwnPropertyDescriptor(un.prototype,"progress"),un.prototype),p(un.prototype,"reverse",[ln],Object.getOwnPropertyDescriptor(un.prototype,"reverse"),un.prototype),_n=p(un.prototype,"_barSprite",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pn=p(un.prototype,"_mode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Tn.HORIZONTAL}}),dn=p(un.prototype,"_totalLength",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),gn=p(un.prototype,"_progress",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),fn=p(un.prototype,"_reverse",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),cn=un))||cn)||cn)||cn)||cn)||cn)),Xn=new c,qn=new c,Kn=new c,Qn=new F,Jn=new e,$n=new F;!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(Zn||(Zn={})),i(Zn);var tr,er,ir,or,nr,rr,sr,ar,hr,lr,cr,ur,_r,pr,dr,gr,fr,yr,br,Tr,mr,vr,Cr,Sr,Er,Or,Ar,wr,Lr,Dr,Pr,zr,Ir,Rr,xr,Br,Nr,Hr,Mr,kr,Vr,Fr,jr,Gr,Ur,Wr,Zr,Yr,Xr,qr=function(e){return t({ScrollBar:e,ScrollBarComponent:e}),e}((Cn=o("cc.ScrollBar"),Sn=d(),En=g(110),On=f(),An=y(mt),wn=n(gt),Ln=b(),Dn=T(),Pn=n(Zn),zn=b(),In=T(),Rn=b(),xn=T(),Bn=b(),Nn=T(),Cn(Hn=Sn(Hn=En(Hn=On(Hn=An((Wn=Un=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"_scrollView",kn,S(e)),C(e,"_handle",Vn,S(e)),C(e,"_direction",Fn,S(e)),C(e,"_enableAutoHide",jn,S(e)),C(e,"_autoHideTime",Gn,S(e)),e._touching=!1,e._opacity=255,e._autoHideRemainingTime=0,e}a(e,t);var i=e.prototype;return i.hide=function(){this._autoHideRemainingTime=0,this._setOpacity(0)},i.show=function(){this._autoHideRemainingTime=this._autoHideTime,this._setOpacity(this._opacity)},i.onScroll=function(t){if(this._scrollView){var e=this._scrollView.content;if(e){var i=e._uiProps.uiTransformComp.contentSize,o=this._scrollView.node._uiProps.uiTransformComp.contentSize,n=this.node._uiProps.uiTransformComp.contentSize;if(!this._conditionalDisableScrollBar(i,o)){this._enableAutoHide&&(this._autoHideRemainingTime=this._autoHideTime,this._setOpacity(this._opacity));var r=0,s=0,a=0,h=0,l=0,c=$n;c.set(0,0),this._direction===Zn.HORIZONTAL?(r=i.width,s=o.width,l=n.width,a=t.x,this._convertToScrollViewSpace(c,e),h=-c.x):this._direction===Zn.VERTICAL&&(r=i.height,s=o.height,l=n.height,a=t.y,this._convertToScrollViewSpace(c,e),h=-c.y);var u=this._calculateLength(r,s,l,a),_=$n;this._calculatePosition(_,r,s,l,h,a,u),this._updateLength(u),this._updateHandlerPosition(_)}}}},i.setScrollView=function(t){this._scrollView=t},i.onTouchBegan=function(){this._enableAutoHide&&(this._touching=!0)},i.onTouchEnded=function(){if(this._enableAutoHide&&(this._touching=!1,!(this._autoHideTime<=0))){if(this._scrollView){var t=this._scrollView.content;if(t){var e=t._uiProps.uiTransformComp.contentSize,i=this._scrollView.node._uiProps.uiTransformComp.contentSize;if(this._conditionalDisableScrollBar(e,i))return}}this._autoHideRemainingTime=this._autoHideTime}},i.onEnable=function(){var t=this.node.getComponent(gt);t&&(this._opacity=t.color.a)},i.start=function(){this._enableAutoHide&&this._setOpacity(0)},i.update=function(t){this._processAutoHide(t)},i._convertToScrollViewSpace=function(t,e){var i=this._scrollView&&this._scrollView.node._uiProps.uiTransformComp,o=e._uiProps.uiTransformComp;if(i&&o){Xn.set(-o.anchorX*o.width,-o.anchorY*o.height,0),o.convertToWorldSpaceAR(Xn,qn);var n=i.convertToNodeSpaceAR(qn);n.x+=i.anchorX*i.width,n.y+=i.anchorY*i.height,t.set(n.x,n.y)}else t.set(F.ZERO)},i._setOpacity=function(t){if(this._handle){var e=this.node.getComponent(gt);e&&(Jn.set(e.color),Jn.a=t,e.color=Jn),(e=this._handle.getComponent(gt))&&(Jn.set(e.color),Jn.a=t,e.color=Jn)}},i._updateHandlerPosition=function(t){if(this._handle){var e=Kn;this._fixupHandlerPosition(e),this._handle.node.setPosition(t.x+e.x,t.y+e.y,e.z)}},i._fixupHandlerPosition=function(t){var e=this.node._uiProps.uiTransformComp,i=e.contentSize,o=e.anchorPoint,n=this.handle.node._uiProps.uiTransformComp.contentSize,r=this.handle.node.parent;c.set(Xn,-i.width*o.x,-i.height*o.y,0);var s=this.node._uiProps.uiTransformComp.convertToWorldSpaceAR(Xn,qn),a=t;a.set(0,0,0),r._uiProps.uiTransformComp.convertToNodeSpaceAR(s,a),this.direction===Zn.HORIZONTAL?a.set(a.x,a.y+(i.height-n.height)/2,a.z):this.direction===Zn.VERTICAL&&a.set(a.x+(i.width-n.width)/2,a.y,a.z),this.handle.node.setPosition(a)},i._conditionalDisableScrollBar=function(t,e){return t.width<=e.width&&this._direction===Zn.HORIZONTAL||t.height<=e.height&&this._direction===Zn.VERTICAL},i._calculateLength=function(t,e,i,o){var n=t;return o&&(n+=20*(o>0?o:-o)),i*(e/n)},i._calculatePosition=function(t,e,i,o,n,r,s){var a=e-i;r&&(a+=Math.abs(r));var h=0;a&&(h=j(h=n/a));var l=(o-s)*h;this._direction===Zn.VERTICAL?t.set(0,l):t.set(l,0)},i._updateLength=function(t){if(this._handle){var e=this._handle.node._uiProps.uiTransformComp,i=e.contentSize,o=e.anchorPoint;o.x===Qn.x&&o.y===Qn.y||e.setAnchorPoint(Qn),this._direction===Zn.HORIZONTAL?e.setContentSize(t,i.height):e.setContentSize(i.width,t)}},i._processAutoHide=function(t){if(this._enableAutoHide&&!(this._autoHideRemainingTime<=0)&&!this._touching&&(this._autoHideRemainingTime-=t,this._autoHideRemainingTime<=this._autoHideTime)){this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime);var e=this._opacity*(this._autoHideRemainingTime/this._autoHideTime);this._setOpacity(e)}},_(e,[{key:"handle",get:function(){return this._handle},set:function(t){this._handle!==t&&(this._handle=t,this.onScroll(F.ZERO))}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this.onScroll(F.ZERO))}},{key:"enableAutoHide",get:function(){return this._enableAutoHide},set:function(t){this._enableAutoHide!==t&&(this._enableAutoHide=t,this._enableAutoHide&&this._setOpacity(0))}},{key:"autoHideTime",get:function(){return this._autoHideTime},set:function(t){this._autoHideTime!==t&&(this._autoHideTime=t)}}]),e}(E),Un.Direction=Zn,p((Mn=Wn).prototype,"handle",[wn,Ln,Dn],Object.getOwnPropertyDescriptor(Mn.prototype,"handle"),Mn.prototype),p(Mn.prototype,"direction",[Pn,zn,In],Object.getOwnPropertyDescriptor(Mn.prototype,"direction"),Mn.prototype),p(Mn.prototype,"enableAutoHide",[Rn,xn],Object.getOwnPropertyDescriptor(Mn.prototype,"enableAutoHide"),Mn.prototype),p(Mn.prototype,"autoHideTime",[Bn,Nn],Object.getOwnPropertyDescriptor(Mn.prototype,"autoHideTime"),Mn.prototype),kn=p(Mn.prototype,"_scrollView",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vn=p(Mn.prototype,"_handle",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fn=p(Mn.prototype,"_direction",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Zn.HORIZONTAL}}),jn=p(Mn.prototype,"_enableAutoHide",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gn=p(Mn.prototype,"_autoHideTime",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Hn=Mn))||Hn)||Hn)||Hn)||Hn)||Hn)),Kr=t("ViewGroup",o("cc.ViewGroup")(tr=g(110)(tr=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e}(E))||tr)||tr);L.ViewGroup=Kr;var Qr,Jr=1e-4,$r=new c,ts=new c,es=new F,is=new F,os=function(){return(new Date).getMilliseconds()},ns={"scroll-to-top":0,"scroll-to-bottom":1,"scroll-to-left":2,"scroll-to-right":3,scrolling:4,"bounce-bottom":6,"bounce-left":7,"bounce-right":8,"bounce-top":5,"scroll-ended":9,"touch-up":10,"scroll-ended-with-threshold":11,"scroll-began":12};!function(t){t.SCROLL_TO_TOP="scroll-to-top",t.SCROLL_TO_BOTTOM="scroll-to-bottom",t.SCROLL_TO_LEFT="scroll-to-left",t.SCROLL_TO_RIGHT="scroll-to-right",t.SCROLL_BEGAN="scroll-began",t.SCROLL_ENDED="scroll-ended",t.BOUNCE_TOP="bounce-top",t.BOUNCE_BOTTOM="bounce-bottom",t.BOUNCE_LEFT="bounce-left",t.BOUNCE_RIGHT="bounce-right",t.SCROLLING="scrolling",t.SCROLL_ENG_WITH_THRESHOLD="scroll-ended-with-threshold",t.TOUCH_UP="touch-up"}(Qr||(Qr={}));var rs,ss,as,hs,ls,cs,us,_s,ps,ds,gs,fs,ys,bs,Ts,ms,vs,Cs,Ss,Es,Os,As,ws=function(e){return t({ScrollView:e,ScrollViewComponent:e}),e}((er=o("cc.ScrollView"),ir=d(),or=g(110),nr=f(),rr=y(mt),sr=U(),ar=b(),hr=T(),lr=U(),cr=b(),ur=T(),_r=b(),pr=T(),dr=b(),gr=T(),fr=n(r),yr=b(),br=T(),Tr=b(),mr=T(),vr=n(qr),Cr=b(),Sr=T(),Er=b(),Or=T(),Ar=n(qr),wr=b(),Lr=T(),Dr=b(),Pr=T(),zr=n([ot]),Ir=b(),Rr=T(),er(xr=ir(xr=or(xr=nr(xr=rr((Xr=Yr=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"bounceDuration",Nr,S(e)),C(e,"brake",Hr,S(e)),C(e,"elastic",Mr,S(e)),C(e,"inertia",kr,S(e)),C(e,"horizontal",Vr,S(e)),C(e,"vertical",Fr,S(e)),C(e,"cancelInnerEvents",jr,S(e)),C(e,"scrollEvents",Gr,S(e)),e._autoScrolling=!1,e._scrolling=!1,C(e,"_content",Ur,S(e)),C(e,"_horizontalScrollBar",Wr,S(e)),C(e,"_verticalScrollBar",Zr,S(e)),e._topBoundary=0,e._bottomBoundary=0,e._leftBoundary=0,e._rightBoundary=0,e._touchMoveDisplacements=[],e._touchMoveTimeDeltas=[],e._touchMovePreviousTimestamp=0,e._touchMoved=!1,e._autoScrollAttenuate=!1,e._autoScrollStartPosition=new c,e._autoScrollTargetDelta=new c,e._autoScrollTotalTime=0,e._autoScrollAccumulatedTime=0,e._autoScrollCurrentlyOutOfBoundary=!1,e._autoScrollBraking=!1,e._autoScrollBrakingStartPosition=new c,e._outOfBoundaryAmount=new c,e._outOfBoundaryAmountDirty=!0,e._stopMouseWheel=!1,e._mouseWheelEventElapsedTime=0,e._isScrollEndedWithThresholdEventFired=!1,e._scrollEventEmitMask=0,e._isBouncing=!1,e._contentPos=new c,e._deltaPos=new c,e}a(e,t);var i=e.prototype;return i.scrollToBottom=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new F(0,0),applyToHorizontal:!1,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i,!0)},i.scrollToTop=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new F(0,1),applyToHorizontal:!1,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToLeft=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new F(0,0),applyToHorizontal:!0,applyToVertical:!1});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToRight=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new F(1,0),applyToHorizontal:!0,applyToVertical:!1});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToTopLeft=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new F(0,1),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToTopRight=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new F(1,1),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToBottomLeft=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new F(0,0),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToBottomRight=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new F(1,0),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToOffset=function(t,e,i){void 0===i&&(i=!0);var o=this.getMaxScrollOffset(),n=new F(0,0);0===o.x?n.x=0:n.x=t.x/o.x,0===o.y?n.y=1:n.y=(o.y-t.y)/o.y,this.scrollTo(n,e,i)},i.getScrollOffset=function(){var t=this._getContentTopBoundary()-this._topBoundary,e=this._getContentLeftBoundary()-this._leftBoundary;return new F(e,t)},i.getMaxScrollOffset=function(){if(!this._content||!this.view)return F.ZERO;var t=this._content._uiProps.uiTransformComp.contentSize,e=t.width-this.view.width,i=t.height-this.view.height;return new F(e=e>=0?e:0,i=i>=0?i:0)},i.scrollToPercentHorizontal=function(t,e,i){var o=this._calculateMovePercentDelta({anchor:new F(t,0),applyToHorizontal:!0,applyToVertical:!1});e?this._startAutoScroll(o,e,!1!==i):this._moveContent(o)},i.scrollTo=function(t,e,i){var o=this._calculateMovePercentDelta({anchor:new F(t),applyToHorizontal:!0,applyToVertical:!0});e?this._startAutoScroll(o,e,i):this._moveContent(o)},i.scrollToPercentVertical=function(t,e,i){var o=this._calculateMovePercentDelta({anchor:new F(0,t),applyToHorizontal:!1,applyToVertical:!0});e?this._startAutoScroll(o,e,i):this._moveContent(o)},i.stopAutoScroll=function(){this._autoScrolling=!1,this._autoScrollAccumulatedTime=this._autoScrollTotalTime},i.setContentPosition=function(t){this._setContentPosition(t)},i._setContentPosition=function(t){if(this._content){var e=this._getContentPosition();Math.abs(t.x-e.x)<Jr&&Math.abs(t.y-e.y)<Jr||(this._content.setPosition(t),this._outOfBoundaryAmountDirty=!0)}},i.getContentPosition=function(){return this._getContentPosition()},i._getContentPosition=function(){return this._content?(this._contentPos.set(this._content.position),this._contentPos):c.ZERO},i.isScrolling=function(){return this._scrolling},i.isAutoScrolling=function(){return this._autoScrolling},i.getScrollEndedEventTiming=function(){return Jr},i.start=function(){this._calculateBoundary(),this._content&&nt.once(rt.EVENT_BEFORE_DRAW,this._adjustContentOutOfBoundary,this)},i.onEnable=function(){this._registerEvent(),this._content&&(this._content.on(r.EventType.SIZE_CHANGED,this._calculateBoundary,this),this._content.on(r.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view&&(this.view.node.on(r.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view.node.on(r.EventType.SIZE_CHANGED,this._calculateBoundary,this))),this._calculateBoundary(),this._updateScrollBarState()},i.update=function(t){this._autoScrolling&&this._processAutoScrolling(t)},i.onDisable=function(){this._unregisterEvent(),this._content&&(this._content.off(r.EventType.SIZE_CHANGED,this._calculateBoundary,this),this._content.off(r.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view&&(this.view.node.off(r.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view.node.off(r.EventType.SIZE_CHANGED,this._calculateBoundary,this))),this._hideScrollBar(),this.stopAutoScroll()},i._registerEvent=function(){this.node.on(r.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(r.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(r.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(r.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.on(r.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)},i._unregisterEvent=function(){this.node.off(r.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.off(r.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.off(r.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.off(r.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.off(r.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)},i._onMouseWheel=function(t,e){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(t,e)){var i=new c,o=t.getScrollY();this.vertical?i.set(0,-.1*o,0):this.horizontal&&i.set(-.1*o,0,0),this._mouseWheelEventElapsedTime=0,this._processDeltaMove(i),this._stopMouseWheel||(this._handlePressLogic(),this.schedule(this._checkMouseWheel,1/60,NaN,0),this._stopMouseWheel=!0),this._stopPropagationIfTargetIsMe(t)}},i._onTouchBegan=function(t,e){this.enabledInHierarchy&&this._content&&(this._hasNestedViewGroup(t,e)||(this._handlePressLogic(),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(t)))},i._onTouchMoved=function(t,e){if(this.enabledInHierarchy&&this._content&&!this._hasNestedViewGroup(t,e)){var i=t.touch;if(this._handleMoveLogic(i),this.cancelInnerEvents){var o=i.getUILocation(es);if(o.subtract(i.getUIStartLocation(is)),o.length()>7&&!this._touchMoved&&t.target!==this.node){var n=new ct(t.getTouches(),t.bubbles);n.type=r.EventType.TOUCH_CANCEL,n.touch=t.touch,n.simulate=!0,t.target.dispatchEvent(n),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(t)}}},i._onTouchEnded=function(t,e){if(this.enabledInHierarchy&&this._content&&t&&!this._hasNestedViewGroup(t,e)){this._dispatchEvent(Qr.TOUCH_UP);var i=t.touch;this._handleReleaseLogic(i),this._touchMoved?t.propagationStopped=!0:this._stopPropagationIfTargetIsMe(t)}},i._onTouchCancelled=function(t,e){if(this.enabledInHierarchy&&this._content&&!this._hasNestedViewGroup(t,e)){if(t&&!t.simulate){var i=t.touch;this._handleReleaseLogic(i)}this._stopPropagationIfTargetIsMe(t)}},i._calculateBoundary=function(){if(this._content&&this.view){var t=this._content.getComponent(vn);t&&t.enabledInHierarchy&&t.updateLayout();var e=this.view,i=e.width*e.anchorX,o=e.height*e.anchorY;this._leftBoundary=-i,this._bottomBoundary=-o,this._rightBoundary=this._leftBoundary+e.width,this._topBoundary=this._bottomBoundary+e.height,this._moveContentToTopLeft(e.contentSize)}},i._hasNestedViewGroup=function(t,e){if(!t||t.eventPhase!==W.CAPTURING_PHASE)return!1;if(e)for(var i,o=Z(e);!(i=o()).done;){var n=i.value;if(this.node===n)return!(!t.target||!t.target.getComponent(Kr));if(n.getComponent(Kr))return!0}return!1},i._startInertiaScroll=function(t){var e=new c(t);e.multiplyScalar(.7),this._startAttenuatingAutoScroll(e,t)},i._calculateAttenuatedFactor=function(t){return this.brake<=0?1-this.brake:(1-this.brake)*(1/(1+14e-6*t+t*t*8e-9))},i._startAttenuatingAutoScroll=function(t,e){var i=t.clone();if(i.normalize(),this._content&&this.view){var o=this._content._uiProps.uiTransformComp.contentSize,n=this.view.contentSize,r=o.width-n.width,s=o.height-n.height,a=this._calculateAttenuatedFactor(r),h=this._calculateAttenuatedFactor(s);i.x=i.x*r*(1-this.brake)*a,i.y=i.y*s*h*(1-this.brake),i.z=0}var l=t.length(),c=i.length()/l;if(i.add(t),this.brake>0&&c>7){c=Math.sqrt(c);var u=t.clone();u.multiplyScalar(c),i.set(u),i.add(t)}var _=this._calculateAutoScrollTimeByInitialSpeed(e.length());this.brake>0&&c>3&&(_*=c=3),0===this.brake&&c>1&&(_*=c),this._startAutoScroll(i,_,!0)},i._calculateAutoScrollTimeByInitialSpeed=function(t){return Math.sqrt(Math.sqrt(t/5))},i._startAutoScroll=function(t,e,i){void 0===i&&(i=!1);var o=this._flattenVectorByDirection(t);this._autoScrolling=!0,this._autoScrollTargetDelta=o,this._autoScrollAttenuate=i,c.copy(this._autoScrollStartPosition,this._getContentPosition()),this._autoScrollTotalTime=e,this._autoScrollAccumulatedTime=0,this._autoScrollBraking=!1,this._isScrollEndedWithThresholdEventFired=!1,this._autoScrollBrakingStartPosition.set(0,0,0),this._getHowMuchOutOfBoundary().equals(c.ZERO,Jr)||(this._autoScrollCurrentlyOutOfBoundary=!0)},i._calculateTouchMoveVelocity=function(){var t=new c,e=0;if((e=this._touchMoveTimeDeltas.reduce((function(t,e){return t+e}),e))<=0||e>=.5)t.set(c.ZERO);else{var i=new c;i=this._touchMoveDisplacements.reduce((function(t,e){return t.add(e),t}),i),t.set(i.x*(1-this.brake)/e,i.y*(1-this.brake)/e,i.z)}return t},i._flattenVectorByDirection=function(t){var e=t;return e.x=this.horizontal?e.x:0,e.y=this.vertical?e.y:0,e},i._moveContent=function(t,e){var i=this._flattenVectorByDirection(t);$r.set(this._getContentPosition()),$r.add(i),$r.set(Math.floor(1e4*$r.x)*Jr,Math.floor(1e4*$r.y)*Jr,$r.z),this._setContentPosition($r);var o=this._getHowMuchOutOfBoundary();es.set(o.x,o.y),this._updateScrollBar(es),this.elastic&&e&&this._startBounceBackIfNeeded()},i._getContentLeftBoundary=function(){if(!this._content)return-1;var t=this._getContentPosition(),e=this._content._uiProps.uiTransformComp;return t.x-e.anchorX*e.width},i._getContentRightBoundary=function(){if(!this._content)return-1;var t=this._content._uiProps.uiTransformComp;return this._getContentLeftBoundary()+t.width},i._getContentTopBoundary=function(){if(!this._content)return-1;var t=this._content._uiProps.uiTransformComp;return this._getContentBottomBoundary()+t.height},i._getContentBottomBoundary=function(){if(!this._content)return-1;var t=this._getContentPosition(),e=this._content._uiProps.uiTransformComp;return t.y-e.anchorY*e.height},i._getHowMuchOutOfBoundary=function(t){if((t=t||new c).equals(c.ZERO,Jr)&&!this._outOfBoundaryAmountDirty)return this._outOfBoundaryAmount;var e=new c;return this._getContentLeftBoundary()+t.x>this._leftBoundary?e.x=this._leftBoundary-(this._getContentLeftBoundary()+t.x):this._getContentRightBoundary()+t.x<this._rightBoundary&&(e.x=this._rightBoundary-(this._getContentRightBoundary()+t.x)),this._getContentTopBoundary()+t.y<this._topBoundary?e.y=this._topBoundary-(this._getContentTopBoundary()+t.y):this._getContentBottomBoundary()+t.y>this._bottomBoundary&&(e.y=this._bottomBoundary-(this._getContentBottomBoundary()+t.y)),t.equals(c.ZERO,Jr)&&(this._outOfBoundaryAmount=e,this._outOfBoundaryAmountDirty=!1),this._clampDelta(e),e},i._updateScrollBar=function(t){this._horizontalScrollBar&&this._horizontalScrollBar.onScroll(t),this.verticalScrollBar&&this.verticalScrollBar.onScroll(t)},i._onScrollBarTouchBegan=function(){this._horizontalScrollBar&&this._horizontalScrollBar.onTouchBegan(),this.verticalScrollBar&&this.verticalScrollBar.onTouchBegan()},i._onScrollBarTouchEnded=function(){this._horizontalScrollBar&&this._horizontalScrollBar.onTouchEnded(),this.verticalScrollBar&&this.verticalScrollBar.onTouchEnded()},i._dispatchEvent=function(t){if(t===Qr.SCROLL_ENDED)this._scrollEventEmitMask=0;else if(t===Qr.SCROLL_TO_TOP||t===Qr.SCROLL_TO_BOTTOM||t===Qr.SCROLL_TO_LEFT||t===Qr.SCROLL_TO_RIGHT){var e=1<<ns[t];if(this._scrollEventEmitMask&e)return;this._scrollEventEmitMask|=e}ot.emitEvents(this.scrollEvents,this,ns[t]),this.node.emit(t,this)},i._adjustContentOutOfBoundary=function(){if(this._content&&(this._outOfBoundaryAmountDirty=!0,this._isOutOfBoundary())){var t=this._getHowMuchOutOfBoundary();$r.set(this._getContentPosition()),$r.add(t),this._content.setPosition($r),this._updateScrollBar(F.ZERO)}},i._hideScrollBar=function(){this._horizontalScrollBar&&this._horizontalScrollBar.hide(),this._verticalScrollBar&&this._verticalScrollBar.hide()},i._updateScrollBarState=function(){if(this._content&&this.view){var t=this.view,e=this._content._uiProps.uiTransformComp;this.verticalScrollBar&&(e.height<t.height?this.verticalScrollBar.hide():this.verticalScrollBar.show()),this.horizontalScrollBar&&(e.width<t.width?this.horizontalScrollBar.hide():this.horizontalScrollBar.show())}},i._stopPropagationIfTargetIsMe=function(t){t.eventPhase===W.AT_TARGET&&t.target===this.node&&(t.propagationStopped=!0)},i._processDeltaMove=function(t){this._scrollChildren(t),this._gatherTouchMove(t)},i._handleMoveLogic=function(t){this._getLocalAxisAlignDelta(this._deltaPos,t),this._processDeltaMove(this._deltaPos)},i._handleReleaseLogic=function(t){this._getLocalAxisAlignDelta(this._deltaPos,t),this._gatherTouchMove(this._deltaPos),this._processInertiaScroll(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent(Qr.SCROLL_ENDED))},i._getLocalAxisAlignDelta=function(t,e){var i=this.node._uiProps.uiTransformComp,o=new c;i&&(e.getUILocation(es),e.getUIPreviousLocation(is),$r.set(es.x,es.y,0),ts.set(is.x,is.y,0),i.convertToNodeSpaceAR($r,$r),i.convertToNodeSpaceAR(ts,ts),c.subtract(o,$r,ts)),t.set(o)},i._scrollChildren=function(t){this._clampDelta(t);var e,i,o=t;if(this.elastic&&(e=this._getHowMuchOutOfBoundary(),o.x*=0===e.x?1:.5,o.y*=0===e.y?1:.5),this.elastic||(e=this._getHowMuchOutOfBoundary(o),o.add(e)),this._content){var n=this._content._uiProps.uiTransformComp,r=n.anchorX,s=n.anchorY,a=n.width,h=n.height,l=this._content.position||c.ZERO;o.y>0?l.y-s*h+o.y>=this._bottomBoundary&&(i=Qr.SCROLL_TO_BOTTOM):o.y<0&&l.y-s*h+h+o.y<=this._topBoundary&&(i=Qr.SCROLL_TO_TOP),o.x<0?l.x-r*a+a+o.x<=this._rightBoundary&&(i=Qr.SCROLL_TO_RIGHT):o.x>0&&l.x-r*a+o.x>=this._leftBoundary&&(i=Qr.SCROLL_TO_LEFT)}this._moveContent(o,!1),0===o.x&&0===o.y||(this._scrolling||(this._scrolling=!0,this._dispatchEvent(Qr.SCROLL_BEGAN)),this._dispatchEvent(Qr.SCROLLING)),i&&i.length>0&&this._dispatchEvent(i)},i._handlePressLogic=function(){this._autoScrolling&&this._dispatchEvent(Qr.SCROLL_ENDED),this._autoScrolling=!1,this._isBouncing=!1,this._touchMovePreviousTimestamp=os(),this._touchMoveDisplacements.length=0,this._touchMoveTimeDeltas.length=0,this._onScrollBarTouchBegan()},i._clampDelta=function(t){if(this._content&&this.view){var e=this.view.contentSize,i=this._content._uiProps.uiTransformComp;i.width<e.width&&(t.x=0),i.height<e.height&&(t.y=0)}},i._gatherTouchMove=function(t){var e=t.clone();for(this._clampDelta(e);this._touchMoveDisplacements.length>=5;)this._touchMoveDisplacements.shift(),this._touchMoveTimeDeltas.shift();this._touchMoveDisplacements.push(e);var i=os();this._touchMoveTimeDeltas.push((i-this._touchMovePreviousTimestamp)/1e3),this._touchMovePreviousTimestamp=i},i._startBounceBackIfNeeded=function(){if(!this.elastic)return!1;var t=this._getHowMuchOutOfBoundary();if(this._clampDelta(t),t.equals(c.ZERO,Jr))return!1;var e=Math.max(this.bounceDuration,0);return this._startAutoScroll(t,e,!0),this._isBouncing||(t.y>0&&this._dispatchEvent(Qr.BOUNCE_TOP),t.y<0&&this._dispatchEvent(Qr.BOUNCE_BOTTOM),t.x>0&&this._dispatchEvent(Qr.BOUNCE_RIGHT),t.x<0&&this._dispatchEvent(Qr.BOUNCE_LEFT),this._isBouncing=!0),!0},i._processInertiaScroll=function(){if(!this._startBounceBackIfNeeded()&&this.inertia){var t=this._calculateTouchMoveVelocity();!t.equals($r,Jr)&&this.brake<1&&this._startInertiaScroll(t)}this._onScrollBarTouchEnded()},i._isOutOfBoundary=function(){return!this._getHowMuchOutOfBoundary().equals(c.ZERO,Jr)},i._isNecessaryAutoScrollBrake=function(){if(this._autoScrollBraking)return!0;if(this._isOutOfBoundary()){if(!this._autoScrollCurrentlyOutOfBoundary)return this._autoScrollCurrentlyOutOfBoundary=!0,this._autoScrollBraking=!0,this._autoScrollBrakingStartPosition=this._getContentPosition(),!0}else this._autoScrollCurrentlyOutOfBoundary=!1;return!1},i._processAutoScrolling=function(t){var e=this._isNecessaryAutoScrollBrake(),i=e?.05:1;this._autoScrollAccumulatedTime+=t*(1/i);var o,n=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);this._autoScrollAttenuate&&(o=n,n=(o-=1)*o*o*o*o+1);var r=this._autoScrollTargetDelta.clone();r.multiplyScalar(n);var s=this._autoScrollStartPosition.clone();s.add(r);var a=Math.abs(n-1)<=Jr;if(Math.abs(n-1)<=this.getScrollEndedEventTiming()&&!this._isScrollEndedWithThresholdEventFired&&(this._dispatchEvent(Qr.SCROLL_ENG_WITH_THRESHOLD),this._isScrollEndedWithThresholdEventFired=!0),this.elastic){var h=s.clone();h.subtract(this._autoScrollBrakingStartPosition),e&&h.multiplyScalar(i),s.set(this._autoScrollBrakingStartPosition),s.add(h)}else{var l=s.clone();l.subtract(this.getContentPosition());var u=this._getHowMuchOutOfBoundary(l);u.equals(c.ZERO,Jr)||(s.add(u),a=!0)}a&&(this._autoScrolling=!1);var _=s.clone();_.subtract(this._getContentPosition()),this._clampDelta(_),this._moveContent(_,a),this._dispatchEvent(Qr.SCROLLING),this._autoScrolling||(this._isBouncing=!1,this._scrolling=!1,this._dispatchEvent(Qr.SCROLL_ENDED))},i._checkMouseWheel=function(t){if(!this._getHowMuchOutOfBoundary().equals(c.ZERO,Jr))return this._processInertiaScroll(),this.unschedule(this._checkMouseWheel),this._dispatchEvent(Qr.SCROLL_ENDED),void(this._stopMouseWheel=!1);this._mouseWheelEventElapsedTime+=t,this._mouseWheelEventElapsedTime>.1&&(this._onScrollBarTouchEnded(),this.unschedule(this._checkMouseWheel),this._dispatchEvent(Qr.SCROLL_ENDED),this._stopMouseWheel=!1)},i._calculateMovePercentDelta=function(t){var e=t.anchor,i=t.applyToHorizontal,o=t.applyToVertical;this._calculateBoundary(),e.clampf(F.ZERO,F.ONE);var n=this._getContentBottomBoundary()-this._bottomBoundary;n=-n;var r=this._getContentLeftBoundary()-this._leftBoundary;r=-r;var s=new c;if(this._content&&this.view){var a=0,h=this._content._uiProps.uiTransformComp.contentSize,l=this.view.contentSize;i&&(a=h.width-l.width,s.x=r-a*e.x),o&&(a=h.height-l.height,s.y=n-a*e.y)}return s},i._moveContentToTopLeft=function(t){var e=this._getContentBottomBoundary()-this._bottomBoundary;e=-e;var i=new c,o=0,n=this._getContentLeftBoundary()-this._leftBoundary;if(n=-n,this._content){var r=this._content._uiProps.uiTransformComp.contentSize;r.height<t.height&&(o=r.height-t.height,i.y=e-o),r.width<t.width&&(o=r.width-t.width,i.x=n)}this._updateScrollBarState(),this._moveContent(i),this._adjustContentOutOfBoundary()},i._scaleChanged=function(t){t===u.SCALE&&this._calculateBoundary()},_(e,[{key:"content",get:function(){return this._content},set:function(t){if(this._content!==t){var e=t&&t.parent&&t.parent._uiProps.uiTransformComp;!t||t&&e?(this._content=t,this._calculateBoundary()):Y(4302)}}},{key:"horizontalScrollBar",get:function(){return this._horizontalScrollBar},set:function(t){this._horizontalScrollBar!==t&&(this._horizontalScrollBar=t,this._horizontalScrollBar&&(this._horizontalScrollBar.setScrollView(this),this._updateScrollBar(F.ZERO)))}},{key:"verticalScrollBar",get:function(){return this._verticalScrollBar},set:function(t){this._verticalScrollBar!==t&&(this._verticalScrollBar=t,this._verticalScrollBar&&(this._verticalScrollBar.setScrollView(this),this._updateScrollBar(F.ZERO)))}},{key:"view",get:function(){var t=this._content&&this._content.parent;return t?t._uiProps.uiTransformComp:null}}]),e}(Kr),Yr.EventType=Qr,Nr=p((Br=Xr).prototype,"bounceDuration",[O,sr,ar,hr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Hr=p(Br.prototype,"brake",[O,lr,cr,ur],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Mr=p(Br.prototype,"elastic",[O,_r,pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),kr=p(Br.prototype,"inertia",[O,dr,gr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p(Br.prototype,"content",[fr,yr,br],Object.getOwnPropertyDescriptor(Br.prototype,"content"),Br.prototype),Vr=p(Br.prototype,"horizontal",[O,Tr,mr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p(Br.prototype,"horizontalScrollBar",[vr,Cr,Sr],Object.getOwnPropertyDescriptor(Br.prototype,"horizontalScrollBar"),Br.prototype),Fr=p(Br.prototype,"vertical",[O,Er,Or],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p(Br.prototype,"verticalScrollBar",[Ar,wr,Lr],Object.getOwnPropertyDescriptor(Br.prototype,"verticalScrollBar"),Br.prototype),jr=p(Br.prototype,"cancelInnerEvents",[O,Dr,Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Gr=p(Br.prototype,"scrollEvents",[zr,O,Ir,Rr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ur=p(Br.prototype,"_content",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wr=p(Br.prototype,"_horizontalScrollBar",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zr=p(Br.prototype,"_verticalScrollBar",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xr=Br))||xr)||xr)||xr)||xr)||xr)),Ls=new c;!function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(As||(As={})),i(As);var Ds,Ps,zs,Is,Rs,xs,Bs,Ns,Hs,Ms,ks,Vs,Fs,js,Gs,Us,Ws,Zs,Ys,Xs,qs=function(e){return t({Slider:e,SliderComponent:e}),e}((rs=o("cc.Slider"),ss=d(),as=g(110),hs=f(),ls=y(mt),cs=n(gt),us=T(),_s=n(As),ps=T(),ds=U(),gs=T(),fs=n([ot]),ys=T(),rs(bs=ss(bs=as(bs=hs(bs=ls((Os=Es=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"slideEvents",ms,S(e)),C(e,"_handle",vs,S(e)),C(e,"_direction",Cs,S(e)),C(e,"_progress",Ss,S(e)),e._offset=new c,e._dragging=!1,e._touchHandle=!1,e._handleLocalPos=new c,e._touchPos=new c,e}a(e,t);var i=e.prototype;return i.__preload=function(){this._updateHandlePosition()},i.onEnable=function(){this._updateHandlePosition(),this.node.on(l.TOUCH_START,this._onTouchBegan,this),this.node.on(l.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(l.TOUCH_END,this._onTouchEnded,this),this.node.on(l.TOUCH_CANCEL,this._onTouchCancelled,this),this._handle&&this._handle.isValid&&(this._handle.node.on(l.TOUCH_START,this._onHandleDragStart,this),this._handle.node.on(l.TOUCH_MOVE,this._onTouchMoved,this),this._handle.node.on(l.TOUCH_END,this._onTouchEnded,this))},i.onDisable=function(){this.node.off(l.TOUCH_START,this._onTouchBegan,this),this.node.off(l.TOUCH_MOVE,this._onTouchMoved,this),this.node.off(l.TOUCH_END,this._onTouchEnded,this),this.node.off(l.TOUCH_CANCEL,this._onTouchCancelled,this),this._handle&&this._handle.isValid&&(this._handle.node.off(l.TOUCH_START,this._onHandleDragStart,this),this._handle.node.off(l.TOUCH_MOVE,this._onTouchMoved,this),this._handle.node.off(l.TOUCH_END,this._onTouchEnded,this))},i._onHandleDragStart=function(t){if(t&&this._handle&&this._handle.node._uiProps.uiTransformComp){this._dragging=!0,this._touchHandle=!0;var e=t.touch.getUILocation();c.set(this._touchPos,e.x,e.y,0),this._handle.node._uiProps.uiTransformComp.convertToNodeSpaceAR(this._touchPos,this._offset),t.propagationStopped=!0}},i._onTouchBegan=function(t){this._handle&&t&&(this._dragging=!0,this._touchHandle||this._handleSliderLogic(t.touch),t.propagationStopped=!0)},i._onTouchMoved=function(t){this._dragging&&t&&(this._handleSliderLogic(t.touch),t.propagationStopped=!0)},i._onTouchEnded=function(t){this._dragging=!1,this._touchHandle=!1,this._offset=new c,t&&(t.propagationStopped=!0)},i._onTouchCancelled=function(t){this._dragging=!1,t&&(t.propagationStopped=!0)},i._handleSliderLogic=function(t){this._updateProgress(t),this._emitSlideEvent()},i._emitSlideEvent=function(){ot.emitEvents(this.slideEvents,this),this.node.emit("slide",this)},i._updateProgress=function(t){if(this._handle&&t){var e=t.getUILocation();c.set(this._touchPos,e.x,e.y,0);var i=this.node._uiProps.uiTransformComp,o=i.convertToNodeSpaceAR(this._touchPos,Ls);this.direction===As.Horizontal?this.progress=j(.5+(o.x-this._offset.x)/i.width):this.progress=j(.5+(o.y-this._offset.y)/i.height)}},i._updateHandlePosition=function(){if(this._handle){this._handleLocalPos.set(this._handle.node.getPosition());var t=this.node._uiProps.uiTransformComp;this._direction===As.Horizontal?this._handleLocalPos.x=-t.width*t.anchorX+this.progress*t.width:this._handleLocalPos.y=-t.height*t.anchorY+this.progress*t.height,this._handle.node.setPosition(this._handleLocalPos)}},i._changeLayout=function(){var t=this.node._uiProps.uiTransformComp,e=t.contentSize;if(t.setContentSize(e.height,e.width),this._handle){var i=this._handle.node.position;this._direction===As.Horizontal?this._handle.node.setPosition(i.x,0,i.z):this._handle.node.setPosition(0,i.y,i.z),this._updateHandlePosition()}},_(e,[{key:"handle",get:function(){return this._handle},set:function(t){this._handle!==t&&(this._handle=t)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this._changeLayout())}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress!==t&&(this._progress=t,this._updateHandlePosition())}}]),e}(E),Es.Direction=As,p((Ts=Os).prototype,"handle",[cs,us],Object.getOwnPropertyDescriptor(Ts.prototype,"handle"),Ts.prototype),p(Ts.prototype,"direction",[_s,ps],Object.getOwnPropertyDescriptor(Ts.prototype,"direction"),Ts.prototype),p(Ts.prototype,"progress",[G,ds,gs],Object.getOwnPropertyDescriptor(Ts.prototype,"progress"),Ts.prototype),ms=p(Ts.prototype,"slideEvents",[fs,O,ys],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),vs=p(Ts.prototype,"_handle",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Cs=p(Ts.prototype,"_direction",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return As.Horizontal}}),Ss=p(Ts.prototype,"_progress",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),bs=Ts))||bs)||bs)||bs)||bs)||bs));function Ks(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Object.assign.apply(Object,[{}].concat(e))}!function(t){t.TOGGLE="toggle"}(Xs||(Xs={}));var Qs,Js,$s,ta,ea,ia,oa,na,ra,sa,aa,ha,la,ca,ua,_a,pa,da,ga,fa,ya,ba,Ta,ma,va,Ca,Sa,Ea,Oa,Aa,wa,La,Da,Pa,za,Ia,Ra,xa,Ba,Na,Ha,Ma,ka,Va,Fa,ja,Ga,Ua,Wa,Za,Ya,Xa,qa,Ka,Qa,Ja,$a,th,eh,ih=function(e){return t({Toggle:e,ToggleComponent:e}),e}((Ds=o("cc.Toggle"),Ps=d(),zs=g(110),Is=f(),Rs=y(mt),xs=b(),Bs=T(),Ns=n(gt),Hs=b(),Ms=T(),ks=n([ot]),Vs=T(),Ds(Fs=Ps(Fs=zs(Fs=Is(Fs=Rs((Ys=Zs=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"checkEvents",Gs,S(e)),C(e,"_isChecked",Us,S(e)),C(e,"_checkMark",Ws,S(e)),e}a(e,t);var i=e.prototype;return i._internalToggle=function(){this.isChecked=!this.isChecked},i._set=function(t,e){if(void 0===e&&(e=!0),this._isChecked!=t){this._isChecked=t;var i=this._toggleContainer;i&&i.enabled&&this.enabled&&(t||!i.anyTogglesChecked()&&!i.allowSwitchOff)&&(this._isChecked=!0,i.notifyToggleCheck(this,e)),this.playEffect(),e&&this._emitToggleEvents()}},i.playEffect=function(){this._checkMark&&(this._checkMark.node.active=this._isChecked)},i.setIsCheckedWithoutNotify=function(t){this._set(t,!1)},i.onEnable=function(){t.prototype.onEnable.call(this),this.playEffect(),this.node.on(e.EventType.CLICK,this._internalToggle,this)},i.onDisable=function(){t.prototype.onDisable.call(this),this.node.off(e.EventType.CLICK,this._internalToggle,this)},i.OnDestroy=function(){var t=this._toggleContainer;t&&t.ensureValidState()},i._emitToggleEvents=function(){this.node.emit(e.EventType.TOGGLE,this),this.checkEvents&&ot.emitEvents(this.checkEvents,this)},_(e,[{key:"isChecked",get:function(){return this._isChecked},set:function(t){this._set(t)}},{key:"checkMark",get:function(){return this._checkMark},set:function(t){this._checkMark!==t&&(this._checkMark=t)}},{key:"_resizeToTarget",set:function(t){t&&this._resizeNodeToTargetNode()}},{key:"_toggleContainer",get:function(){var t=this.node.parent;return L.Node.isNode(t)?t.getComponent("cc.ToggleContainer"):null}}]),e}(Oe),Zs.EventType=Ks(Xs,Te),p((js=Ys).prototype,"isChecked",[xs,Bs],Object.getOwnPropertyDescriptor(js.prototype,"isChecked"),js.prototype),p(js.prototype,"checkMark",[Ns,Hs,Ms],Object.getOwnPropertyDescriptor(js.prototype,"checkMark"),js.prototype),Gs=p(js.prototype,"checkEvents",[ks,O,Vs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Us=p(js.prototype,"_isChecked",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ws=p(js.prototype,"_checkMark",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fs=js))||Fs)||Fs)||Fs)||Fs)||Fs)),oh=function(e){return t({ToggleContainer:e,ToggleContainerComponent:e}),e}((Qs=o("cc.ToggleContainer"),Js=d(),$s=g(110),ta=f(),ea=T(),ia=n([ot]),oa=T(),Qs(na=Js(na=$s(na=ta(na=s((ha=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"_allowSwitchOff",sa,S(e)),C(e,"checkEvents",aa,S(e)),e}a(e,t);var i=e.prototype;return i.onEnable=function(){this.ensureValidState(),this.node.on(l.CHILD_ADDED,this.ensureValidState,this),this.node.on(l.CHILD_REMOVED,this.ensureValidState,this)},i.onDisable=function(){this.node.off(l.CHILD_ADDED,this.ensureValidState,this),this.node.off(l.CHILD_REMOVED,this.ensureValidState,this)},i.activeToggles=function(){return this.toggleItems.filter((function(t){return t.isChecked}))},i.anyTogglesChecked=function(){return!!this.toggleItems.find((function(t){return t.isChecked}))},i.notifyToggleCheck=function(t,e){if(void 0===e&&(e=!0),this.enabledInHierarchy){for(var i=0;i<this.toggleItems.length;i++){var o=this.toggleItems[i];o!==t&&(e?o.isChecked=!1:o.setIsCheckedWithoutNotify(!1))}this.checkEvents&&L.Component.EventHandler.emitEvents(this.checkEvents,t)}},i.ensureValidState=function(){var t=this.toggleItems;if(!this._allowSwitchOff&&!this.anyTogglesChecked()&&0!==t.length){var e=t[0];e.isChecked=!0,this.notifyToggleCheck(e)}var i=this.activeToggles();if(i.length>1)for(var o=i[0],n=0;n<i.length;++n){var r=i[n];r!==o&&(r.isChecked=!1)}},_(e,[{key:"allowSwitchOff",get:function(){return this._allowSwitchOff},set:function(t){this._allowSwitchOff=t}},{key:"toggleItems",get:function(){return this.node.children.map((function(t){var e=t.getComponent("cc.Toggle");return e&&e.enabled?e:null})).filter(Boolean)}}]),e}(E),sa=p((ra=ha).prototype,"_allowSwitchOff",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p(ra.prototype,"allowSwitchOff",[ea],Object.getOwnPropertyDescriptor(ra.prototype,"allowSwitchOff"),ra.prototype),aa=p(ra.prototype,"checkEvents",[ia,O,oa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),na=ra))||na)||na)||na)||na)||na)),nh=new F;function rh(t){return t instanceof _t?lt:t._uiProps.uiTransformComp?t._uiProps.uiTransformComp.contentSize:M.ZERO}function sh(t,e,i,o){t.parent?nh.set(t.parent.getScale().x,t.parent.getScale().y):nh.set(0,0);for(var n=nh.x,r=nh.y,s=0,a=0,h=t.parent;;){if(!h)return i.x=i.y=0,void(o.x=o.y=1);var l=h.getPosition();if(s+=l.x,a+=l.y,(h=h.parent)===e)break;h?nh.set(h.getScale().x,h.getScale().y):nh.set(0,0);var c=nh.x,u=nh.y;s*=c,a*=u,n*=c,r*=u}o.x=0!==n?1/n:1,o.y=0!==r?1/r:1,i.x=-s,i.y=-a}!function(t){t[t.ONCE=0]="ONCE",t[t.ALWAYS=1]="ALWAYS",t[t.ON_WINDOW_RESIZE=2]="ON_WINDOW_RESIZE"}(th||(th={})),i(th),function(t){t[t.TOP=1]="TOP",t[t.MID=2]="MID",t[t.BOT=4]="BOT",t[t.LEFT=8]="LEFT",t[t.CENTER=16]="CENTER",t[t.RIGHT=32]="RIGHT",t[t.HORIZONTAL=56]="HORIZONTAL",t[t.VERTICAL=7]="VERTICAL"}(eh||(eh={}));var ah,hh,lh,ch,uh,_h,ph,dh,gh,fh,yh,bh,Th,mh,vh,Ch,Sh,Eh,Oh,Ah=eh.TOP|eh.BOT,wh=eh.LEFT|eh.RIGHT,Lh=function(e){return t({Widget:e,WidgetComponent:e}),e}((la=o("cc.Widget"),ca=d(),ua=g(110),_a=f(),pa=y(mt),da=n(r),ga=T(),fa=T(),ya=T(),ba=T(),Ta=T(),ma=T(),va=T(),Ca=k(),Sa=k(),Ea=T(),Oa=T(),Aa=T(),wa=T(),La=T(),Da=T(),Pa=n(th),za=T(),la(Ia=ca(Ia=ua(Ia=_a(Ia=pa(Ia=s(($a=Ja=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this)._lastPos=new c,e._lastSize=new M,e._dirty=!0,e._hadAlignOnce=!1,C(e,"_alignFlags",xa,S(e)),C(e,"_target",Ba,S(e)),C(e,"_left",Na,S(e)),C(e,"_right",Ha,S(e)),C(e,"_top",Ma,S(e)),C(e,"_bottom",ka,S(e)),C(e,"_horizontalCenter",Va,S(e)),C(e,"_verticalCenter",Fa,S(e)),C(e,"_isAbsLeft",ja,S(e)),C(e,"_isAbsRight",Ga,S(e)),C(e,"_isAbsTop",Ua,S(e)),C(e,"_isAbsBottom",Wa,S(e)),C(e,"_isAbsHorizontalCenter",Za,S(e)),C(e,"_isAbsVerticalCenter",Ya,S(e)),C(e,"_originalWidth",Xa,S(e)),C(e,"_originalHeight",qa,S(e)),C(e,"_alignMode",Ka,S(e)),C(e,"_lockFlags",Qa,S(e)),e}a(e,t);var i=e.prototype;return i.updateAlignment=function(){L._widgetManager.updateAlignment(this.node)},i._validateTargetInDEV=function(){},i.setDirty=function(){this._recursiveDirty()},i.onEnable=function(){this.node.getPosition(this._lastPos),this._lastSize.set(this.node._uiProps.uiTransformComp.contentSize),L._widgetManager.add(this),this._hadAlignOnce=!1,this._registerEvent(),this._registerTargetEvents()},i.onDisable=function(){L._widgetManager.remove(this),this._unregisterEvent(),this._unregisterTargetEvents()},i.onDestroy=function(){this._removeParentEvent()},i._adjustWidgetToAllowMovingInEditor=function(){},i._adjustWidgetToAllowResizingInEditor=function(){},i._adjustWidgetToAnchorChanged=function(){this.setDirty()},i._adjustTargetToParentChanged=function(t){t&&this._unregisterOldParentEvents(t),this.node.getParent()&&this._registerTargetEvents(),this._setDirtyByMode()},i._registerEvent=function(){this.node.on(l.TRANSFORM_CHANGED,this._setDirtyByMode,this),this.node.on(l.SIZE_CHANGED,this._setDirtyByMode,this),this.node.on(l.ANCHOR_CHANGED,this._adjustWidgetToAnchorChanged,this),this.node.on(l.PARENT_CHANGED,this._adjustTargetToParentChanged,this)},i._unregisterEvent=function(){this.node.off(l.TRANSFORM_CHANGED,this._setDirtyByMode,this),this.node.off(l.SIZE_CHANGED,this._setDirtyByMode,this),this.node.off(l.ANCHOR_CHANGED,this._adjustWidgetToAnchorChanged,this)},i._removeParentEvent=function(){this.node.off(l.PARENT_CHANGED,this._adjustTargetToParentChanged,this)},i._autoChangedValue=function(t,e){if((this._alignFlags&t)>0){var i=this.node.parent&&this.node.parent._uiProps,o=i&&i.uiTransformComp,n=o?o.contentSize:lt;this.isAlignLeft&&t===eh.LEFT?this._left=e?this._left*n.width:this._left/n.width:this.isAlignRight&&t===eh.RIGHT?this._right=e?this._right*n.width:this._right/n.width:this.isAlignHorizontalCenter&&t===eh.CENTER?this._horizontalCenter=e?this._horizontalCenter*n.width:this._horizontalCenter/n.width:this.isAlignTop&&t===eh.TOP?this._top=e?this._top*n.height:this._top/n.height:this.isAlignBottom&&t===eh.BOT?this._bottom=e?this._bottom*n.height:this._bottom/n.height:this.isAbsoluteVerticalCenter&&t===eh.MID&&(this._verticalCenter=this._verticalCenter/n.height),this._recursiveDirty()}},i._registerTargetEvents=function(){var t=this._target||this.node.parent;t&&t.getComponent(mt)&&(t.on(l.TRANSFORM_CHANGED,this._setDirtyByMode,this),t.on(l.SIZE_CHANGED,this._setDirtyByMode,this))},i._unregisterTargetEvents=function(){var t=this._target||this.node.parent;t&&(t.off(l.TRANSFORM_CHANGED,this._setDirtyByMode,this),t.off(l.SIZE_CHANGED,this._setDirtyByMode,this))},i._unregisterOldParentEvents=function(t){var e=this._target||t;e&&(e.off(l.TRANSFORM_CHANGED,this._setDirtyByMode,this),e.off(l.SIZE_CHANGED,this._setDirtyByMode,this))},i._setDirtyByMode=function(){this.alignMode===th.ALWAYS&&this._recursiveDirty()},i._setAlign=function(t,e){if(e!==(this._alignFlags&t)>0){var i=(t&wh)>0,o=this.node._uiProps.uiTransformComp;e?(this._alignFlags|=t,i?(this.isAlignHorizontalCenter=!1,this.isStretchWidth&&(this._originalWidth=o.width)):(this.isAlignVerticalCenter=!1,this.isStretchHeight&&(this._originalHeight=o.height))):(i?this.isStretchWidth&&(o.width=this._originalWidth):this.isStretchHeight&&(o.height=this._originalHeight),this._alignFlags&=~t)}},i._recursiveDirty=function(){this._dirty||(this._dirty=!0)},_(e,[{key:"target",get:function(){return this._target},set:function(t){this._target!==t&&(this._unregisterTargetEvents(),this._target=t,this._registerTargetEvents(),this._validateTargetInDEV(),this._recursiveDirty())}},{key:"isAlignTop",get:function(){return(this._alignFlags&eh.TOP)>0},set:function(t){this._setAlign(eh.TOP,t),this._recursiveDirty()}},{key:"isAlignBottom",get:function(){return(this._alignFlags&eh.BOT)>0},set:function(t){this._setAlign(eh.BOT,t),this._recursiveDirty()}},{key:"isAlignLeft",get:function(){return(this._alignFlags&eh.LEFT)>0},set:function(t){this._setAlign(eh.LEFT,t),this._recursiveDirty()}},{key:"isAlignRight",get:function(){return(this._alignFlags&eh.RIGHT)>0},set:function(t){this._setAlign(eh.RIGHT,t),this._recursiveDirty()}},{key:"isAlignVerticalCenter",get:function(){return(this._alignFlags&eh.MID)>0},set:function(t){t?(this.isAlignTop=!1,this.isAlignBottom=!1,this._alignFlags|=eh.MID):this._alignFlags&=~eh.MID,this._recursiveDirty()}},{key:"isAlignHorizontalCenter",get:function(){return(this._alignFlags&eh.CENTER)>0},set:function(t){t?(this.isAlignLeft=!1,this.isAlignRight=!1,this._alignFlags|=eh.CENTER):this._alignFlags&=~eh.CENTER,this._recursiveDirty()}},{key:"isStretchWidth",get:function(){return(this._alignFlags&wh)===wh}},{key:"isStretchHeight",get:function(){return(this._alignFlags&Ah)===Ah}},{key:"top",get:function(){return this._top},set:function(t){this._top=t,this._recursiveDirty()}},{key:"editorTop",get:function(){return this._isAbsTop?this._top:100*this._top},set:function(t){this._top=this._isAbsTop?t:t/100,this._recursiveDirty()}},{key:"bottom",get:function(){return this._bottom},set:function(t){this._bottom=t,this._recursiveDirty()}},{key:"editorBottom",get:function(){return this._isAbsBottom?this._bottom:100*this._bottom},set:function(t){this._bottom=this._isAbsBottom?t:t/100,this._recursiveDirty()}},{key:"left",get:function(){return this._left},set:function(t){this._left=t,this._recursiveDirty()}},{key:"editorLeft",get:function(){return this._isAbsLeft?this._left:100*this._left},set:function(t){this._left=this._isAbsLeft?t:t/100,this._recursiveDirty()}},{key:"right",get:function(){return this._right},set:function(t){this._right=t,this._recursiveDirty()}},{key:"editorRight",get:function(){return this._isAbsRight?this._right:100*this._right},set:function(t){this._right=this._isAbsRight?t:t/100,this._recursiveDirty()}},{key:"horizontalCenter",get:function(){return this._horizontalCenter},set:function(t){this._horizontalCenter=t,this._recursiveDirty()}},{key:"editorHorizontalCenter",get:function(){return this._isAbsHorizontalCenter?this._horizontalCenter:100*this._horizontalCenter},set:function(t){this._horizontalCenter=this._isAbsHorizontalCenter?t:t/100,this._recursiveDirty()}},{key:"verticalCenter",get:function(){return this._verticalCenter},set:function(t){this._verticalCenter=t,this._recursiveDirty()}},{key:"editorVerticalCenter",get:function(){return this._isAbsVerticalCenter?this._verticalCenter:100*this._verticalCenter},set:function(t){this._verticalCenter=this._isAbsVerticalCenter?t:t/100,this._recursiveDirty()}},{key:"isAbsoluteTop",get:function(){return this._isAbsTop},set:function(t){this._isAbsTop!==t&&(this._isAbsTop=t,this._autoChangedValue(eh.TOP,this._isAbsTop))}},{key:"isAbsoluteBottom",get:function(){return this._isAbsBottom},set:function(t){this._isAbsBottom!==t&&(this._isAbsBottom=t,this._autoChangedValue(eh.BOT,this._isAbsBottom))}},{key:"isAbsoluteLeft",get:function(){return this._isAbsLeft},set:function(t){this._isAbsLeft!==t&&(this._isAbsLeft=t,this._autoChangedValue(eh.LEFT,this._isAbsLeft))}},{key:"isAbsoluteRight",get:function(){return this._isAbsRight},set:function(t){this._isAbsRight!==t&&(this._isAbsRight=t,this._autoChangedValue(eh.RIGHT,this._isAbsRight))}},{key:"isAbsoluteHorizontalCenter",get:function(){return this._isAbsHorizontalCenter},set:function(t){this._isAbsHorizontalCenter!==t&&(this._isAbsHorizontalCenter=t,this._autoChangedValue(eh.CENTER,this._isAbsHorizontalCenter))}},{key:"isAbsoluteVerticalCenter",get:function(){return this._isAbsVerticalCenter},set:function(t){this._isAbsVerticalCenter!==t&&(this._isAbsVerticalCenter=t,this._autoChangedValue(eh.MID,this._isAbsVerticalCenter))}},{key:"alignMode",get:function(){return this._alignMode},set:function(t){this._alignMode=t,this._recursiveDirty()}},{key:"alignFlags",get:function(){return this._alignFlags},set:function(t){this._alignFlags!==t&&(this._alignFlags=t,this._recursiveDirty())}}]),e}(E),Ja.AlignMode=th,p((Ra=$a).prototype,"target",[da,ga],Object.getOwnPropertyDescriptor(Ra.prototype,"target"),Ra.prototype),p(Ra.prototype,"isAlignTop",[fa],Object.getOwnPropertyDescriptor(Ra.prototype,"isAlignTop"),Ra.prototype),p(Ra.prototype,"isAlignBottom",[ya],Object.getOwnPropertyDescriptor(Ra.prototype,"isAlignBottom"),Ra.prototype),p(Ra.prototype,"isAlignLeft",[ba],Object.getOwnPropertyDescriptor(Ra.prototype,"isAlignLeft"),Ra.prototype),p(Ra.prototype,"isAlignRight",[Ta],Object.getOwnPropertyDescriptor(Ra.prototype,"isAlignRight"),Ra.prototype),p(Ra.prototype,"isAlignVerticalCenter",[ma],Object.getOwnPropertyDescriptor(Ra.prototype,"isAlignVerticalCenter"),Ra.prototype),p(Ra.prototype,"isAlignHorizontalCenter",[va],Object.getOwnPropertyDescriptor(Ra.prototype,"isAlignHorizontalCenter"),Ra.prototype),p(Ra.prototype,"isStretchWidth",[Ca],Object.getOwnPropertyDescriptor(Ra.prototype,"isStretchWidth"),Ra.prototype),p(Ra.prototype,"isStretchHeight",[Sa],Object.getOwnPropertyDescriptor(Ra.prototype,"isStretchHeight"),Ra.prototype),p(Ra.prototype,"top",[Ea],Object.getOwnPropertyDescriptor(Ra.prototype,"top"),Ra.prototype),p(Ra.prototype,"editorTop",[X],Object.getOwnPropertyDescriptor(Ra.prototype,"editorTop"),Ra.prototype),p(Ra.prototype,"bottom",[Oa],Object.getOwnPropertyDescriptor(Ra.prototype,"bottom"),Ra.prototype),p(Ra.prototype,"editorBottom",[X],Object.getOwnPropertyDescriptor(Ra.prototype,"editorBottom"),Ra.prototype),p(Ra.prototype,"left",[Aa],Object.getOwnPropertyDescriptor(Ra.prototype,"left"),Ra.prototype),p(Ra.prototype,"editorLeft",[X],Object.getOwnPropertyDescriptor(Ra.prototype,"editorLeft"),Ra.prototype),p(Ra.prototype,"right",[wa],Object.getOwnPropertyDescriptor(Ra.prototype,"right"),Ra.prototype),p(Ra.prototype,"editorRight",[X],Object.getOwnPropertyDescriptor(Ra.prototype,"editorRight"),Ra.prototype),p(Ra.prototype,"horizontalCenter",[La],Object.getOwnPropertyDescriptor(Ra.prototype,"horizontalCenter"),Ra.prototype),p(Ra.prototype,"editorHorizontalCenter",[X],Object.getOwnPropertyDescriptor(Ra.prototype,"editorHorizontalCenter"),Ra.prototype),p(Ra.prototype,"verticalCenter",[Da],Object.getOwnPropertyDescriptor(Ra.prototype,"verticalCenter"),Ra.prototype),p(Ra.prototype,"editorVerticalCenter",[X],Object.getOwnPropertyDescriptor(Ra.prototype,"editorVerticalCenter"),Ra.prototype),p(Ra.prototype,"isAbsoluteTop",[X],Object.getOwnPropertyDescriptor(Ra.prototype,"isAbsoluteTop"),Ra.prototype),p(Ra.prototype,"isAbsoluteBottom",[X],Object.getOwnPropertyDescriptor(Ra.prototype,"isAbsoluteBottom"),Ra.prototype),p(Ra.prototype,"isAbsoluteLeft",[X],Object.getOwnPropertyDescriptor(Ra.prototype,"isAbsoluteLeft"),Ra.prototype),p(Ra.prototype,"isAbsoluteRight",[X],Object.getOwnPropertyDescriptor(Ra.prototype,"isAbsoluteRight"),Ra.prototype),p(Ra.prototype,"isAbsoluteHorizontalCenter",[X],Object.getOwnPropertyDescriptor(Ra.prototype,"isAbsoluteHorizontalCenter"),Ra.prototype),p(Ra.prototype,"isAbsoluteVerticalCenter",[X],Object.getOwnPropertyDescriptor(Ra.prototype,"isAbsoluteVerticalCenter"),Ra.prototype),p(Ra.prototype,"alignMode",[Pa,za],Object.getOwnPropertyDescriptor(Ra.prototype,"alignMode"),Ra.prototype),p(Ra.prototype,"alignFlags",[X],Object.getOwnPropertyDescriptor(Ra.prototype,"alignFlags"),Ra.prototype),xa=p(Ra.prototype,"_alignFlags",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ba=p(Ra.prototype,"_target",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Na=p(Ra.prototype,"_left",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ha=p(Ra.prototype,"_right",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ma=p(Ra.prototype,"_top",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ka=p(Ra.prototype,"_bottom",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Va=p(Ra.prototype,"_horizontalCenter",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fa=p(Ra.prototype,"_verticalCenter",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ja=p(Ra.prototype,"_isAbsLeft",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ga=p(Ra.prototype,"_isAbsRight",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ua=p(Ra.prototype,"_isAbsTop",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wa=p(Ra.prototype,"_isAbsBottom",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Za=p(Ra.prototype,"_isAbsHorizontalCenter",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ya=p(Ra.prototype,"_isAbsVerticalCenter",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Xa=p(Ra.prototype,"_originalWidth",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),qa=p(Ra.prototype,"_originalHeight",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ka=p(Ra.prototype,"_alignMode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return th.ON_WINDOW_RESIZE}}),Qa=p(Ra.prototype,"_lockFlags",[O,q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ia=Ra))||Ia)||Ia)||Ia)||Ia)||Ia)||Ia));L.internal.computeInverseTransForTarget=sh,L.internal.getReadonlyNodeSize=rh;var Dh,Ph=new e;!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(Dh||(Dh={})),i(Dh);var zh,Ih,Rh,xh,Bh,Nh,Hh,Mh,kh,Vh,Fh,jh,Gh,Uh,Wh,Zh,Yh,Xh,qh,Kh,Qh,Jh,$h,tl,el,il,ol,nl,rl,sl,al,hl,ll,cl,ul,_l,pl,dl,gl,fl,yl,bl,Tl,ml,vl,Cl=function(e){return t({PageViewIndicator:e,PageViewIndicatorComponent:e}),e}((ah=o("cc.PageViewIndicator"),hh=d(),lh=g(110),ch=f(),uh=n(dt),_h=T(),ph=n(Dh),dh=T(),gh=n(M),fh=T(),yh=T(),ah(bh=hh(bh=lh(bh=ch((Oh=Eh=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"spacing",mh,S(e)),C(e,"_spriteFrame",vh,S(e)),C(e,"_direction",Ch,S(e)),C(e,"_cellSize",Sh,S(e)),e._layout=null,e._pageView=null,e._indicators=[],e}a(e,t);var i=e.prototype;return i.onLoad=function(){this._updateLayout()},i.setPageView=function(t){this._pageView=t,this._refresh()},i._updateLayout=function(){this._layout=this.getComponent(vn),this._layout||(this._layout=this.addComponent(vn));var t=this._layout;this.direction===Dh.HORIZONTAL?(t.type=vn.Type.HORIZONTAL,t.spacingX=this.spacing):this.direction===Dh.VERTICAL&&(t.type=vn.Type.VERTICAL,t.spacingY=this.spacing),t.resizeMode=vn.ResizeMode.CONTAINER},i._createIndicator=function(){var t=new r;t.layer=this.node.layer;var e=t.addComponent(gt);return e.spriteFrame=this.spriteFrame,e.sizeMode=gt.SizeMode.CUSTOM,t.parent=this.node,t._uiProps.uiTransformComp.setContentSize(this._cellSize),t},i._changedState=function(){var t=this._indicators;if(0!==t.length&&this._pageView){var e=this._pageView.curPageIdx;if(!(e>=t.length)){for(var i=0;i<t.length;++i){var o=t[i];if(o._uiProps.uiComp){var n=o._uiProps.uiComp;Ph.set(n.color),Ph.a=127.5,n.color=Ph}}if(t[e]._uiProps.uiComp){var r=t[e]._uiProps.uiComp;Ph.set(r.color),Ph.a=255,r.color=Ph}}}},i._refresh=function(){if(this._pageView){var t=this._indicators,e=this._pageView.getPages();if(e.length!==t.length){var i=0;if(e.length>t.length)for(i=0;i<e.length;++i)t[i]||(t[i]=this._createIndicator());else for(i=t.length-e.length;i>0;--i){var o=t[i-1];this.node.removeChild(o),t.splice(i-1,1)}this._layout&&this._layout.enabledInHierarchy&&this._layout.updateLayout(),this._changedState()}}},_(e,[{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(t){this._spriteFrame!==t&&(this._spriteFrame=t)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t)}},{key:"cellSize",get:function(){return this._cellSize},set:function(t){this._cellSize!==t&&(this._cellSize=t)}}]),e}(E),Eh.Direction=Dh,p((Th=Oh).prototype,"spriteFrame",[uh,_h],Object.getOwnPropertyDescriptor(Th.prototype,"spriteFrame"),Th.prototype),p(Th.prototype,"direction",[ph,dh],Object.getOwnPropertyDescriptor(Th.prototype,"direction"),Th.prototype),p(Th.prototype,"cellSize",[gh,fh],Object.getOwnPropertyDescriptor(Th.prototype,"cellSize"),Th.prototype),mh=p(Th.prototype,"spacing",[O,yh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),vh=p(Th.prototype,"_spriteFrame",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ch=p(Th.prototype,"_direction",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Dh.HORIZONTAL}}),Sh=p(Th.prototype,"_cellSize",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new M(20,20)}}),bh=Th))||bh)||bh)||bh)||bh)),Sl=new F;!function(t){t[t.Unified=0]="Unified",t[t.Free=1]="Free"}(Tl||(Tl={})),i(Tl),function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(ml||(ml={})),i(ml),function(t){t.PAGE_TURNING="page-turning"}(vl||(vl={}));var El=function(e){return t({PageView:e,PageViewComponent:e}),e}((zh=o("cc.PageView"),Ih=d(),Rh=g(110),xh=f(),Bh=n(Tl),Nh=T(),Hh=n(ml),Mh=T(),kh=U(),Vh=T(),Fh=U(),jh=T(),Gh=n(Cl),Uh=T(),Wh=T(),Zh=n(qr),Yh=k(),Xh=n(qr),qh=k(),Kh=k(),Qh=k(),Jh=k(),$h=n([ot]),tl=k(),el=n([ot]),il=T(),zh(ol=Ih(ol=Rh(ol=xh((bl=yl=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"autoPageTurningThreshold",rl,S(e)),C(e,"horizontal",sl,S(e)),C(e,"vertical",al,S(e)),C(e,"cancelInnerEvents",hl,S(e)),C(e,"scrollEvents",ll,S(e)),C(e,"pageTurningSpeed",cl,S(e)),C(e,"pageEvents",ul,S(e)),C(e,"_sizeMode",_l,S(e)),C(e,"_direction",pl,S(e)),C(e,"_scrollThreshold",dl,S(e)),C(e,"_pageTurningEventTiming",gl,S(e)),C(e,"_indicator",fl,S(e)),e._curPageIdx=0,e._lastPageIdx=0,e._pages=[],e._initContentPos=new c,e._scrollCenterOffsetX=[],e._scrollCenterOffsetY=[],e._touchBeganPosition=new F,e._touchEndPosition=new F,e}a(e,t);var i=e.prototype;return i.onEnable=function(){t.prototype.onEnable.call(this),this.node.on(l.SIZE_CHANGED,this._updateAllPagesSize,this),this.node.on(e.EventType.SCROLL_ENG_WITH_THRESHOLD,this._dispatchPageTurningEvent,this)},i.onDisable=function(){t.prototype.onDisable.call(this),this.node.off(l.SIZE_CHANGED,this._updateAllPagesSize,this),this.node.off(e.EventType.SCROLL_ENG_WITH_THRESHOLD,this._dispatchPageTurningEvent,this)},i.onLoad=function(){this._initPages(),this.indicator&&this.indicator.setPageView(this)},i.getCurrentPageIndex=function(){return this._curPageIdx},i.setCurrentPageIndex=function(t){this.scrollToPage(t,1)},i.getPages=function(){return this._pages},i.addPage=function(t){t&&-1===this._pages.indexOf(t)&&this.content&&(t._uiProps.uiTransformComp?(this.content.addChild(t),this._pages.push(t),this._updatePageView()):Y(4301))},i.insertPage=function(t,e){if(!(e<0)&&t&&-1===this._pages.indexOf(t)&&this.content)if(e>=this._pages.length)this.addPage(t);else{if(!t._uiProps.uiTransformComp)return void Y(4301);this._pages.splice(e,0,t),this.content.insertChild(t,e),this._updatePageView()}},i.removePage=function(t){if(t&&this.content){var e=this._pages.indexOf(t);-1!==e?this.removePageAtIndex(e):K(4300,t.name)}},i.removePageAtIndex=function(t){var e=this._pages;if(!(t<0||t>=e.length)){var i=e[t];i&&this.content&&(this.content.removeChild(i),e.splice(t,1),this._updatePageView())}},i.removeAllPages=function(){if(this.content){for(var t=this._pages,e=0,i=t.length;e<i;e++)this.content.removeChild(t[e]);this._pages.length=0,this._updatePageView()}},i.scrollToPage=function(t,e){void 0===e&&(e=.3),t<0||t>=this._pages.length||(this._curPageIdx=t,this.scrollToOffset(this._moveOffsetValue(t),e,!0),this.indicator&&this.indicator._changedState())},i.getScrollEndedEventTiming=function(){return this.pageTurningEventTiming},i._updatePageView=function(){if(this.content){var t=this.content.getComponent(vn);t&&t.enabled&&t.updateLayout();var e=this._pages.length;this._curPageIdx>=e&&(this._curPageIdx=0===e?0:e-1,this._lastPageIdx=this._curPageIdx);for(var i=this._initContentPos,o=0;o<e;++o){var n=this._pages[o].position;this.direction===ml.Horizontal?this._scrollCenterOffsetX[o]=Math.abs(i.x+n.x):this._scrollCenterOffsetY[o]=Math.abs(i.y+n.y)}this.indicator&&this.indicator._refresh()}},i._updateAllPagesSize=function(){var t=this.view;if(this.content&&t&&this._sizeMode===Tl.Unified)for(var e=this._pages,i=t.contentSize,o=0,n=e.length;o<n;o++)e[o]._uiProps.uiTransformComp.setContentSize(i)},i._handleReleaseLogic=function(){this._autoScrollToPage(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent(e.EventType.SCROLL_ENDED))},i._onTouchBegan=function(e,i){e.touch.getUILocation(Sl),F.set(this._touchBeganPosition,Sl.x,Sl.y),t.prototype._onTouchBegan.call(this,e,i)},i._onTouchMoved=function(e,i){t.prototype._onTouchMoved.call(this,e,i)},i._onTouchEnded=function(e,i){e.touch.getUILocation(Sl),F.set(this._touchEndPosition,Sl.x,Sl.y),t.prototype._onTouchEnded.call(this,e,i)},i._onTouchCancelled=function(e,i){e.touch.getUILocation(Sl),F.set(this._touchEndPosition,Sl.x,Sl.y),t.prototype._onTouchCancelled.call(this,e,i)},i._onMouseWheel=function(){},i._syncScrollDirection=function(){this.horizontal=this.direction===ml.Horizontal,this.vertical=this.direction===ml.Vertical},i._syncSizeMode=function(){var t=this.view;if(this.content&&t){var e=this.content.getComponent(vn);if(e){if(this._sizeMode===Tl.Free&&this._pages.length>0){var i=this._pages[0]._uiProps.uiTransformComp,o=this._pages[this._pages.length-1]._uiProps.uiTransformComp;this.direction===ml.Horizontal?(e.paddingLeft=(t.width-i.width)/2,e.paddingRight=(t.width-o.width)/2):this.direction===ml.Vertical&&(e.paddingTop=(t.height-i.height)/2,e.paddingBottom=(t.height-o.height)/2)}e.updateLayout()}}},i._initPages=function(){if(this.content){this._initContentPos=this.content.position;for(var t=this.content.children,e=0;e<t.length;++e){var i=t[e];this._pages.indexOf(i)>=0||this._pages.push(i)}this._syncScrollDirection(),this._syncSizeMode(),this._updatePageView()}},i._dispatchPageTurningEvent=function(){this._lastPageIdx!==this._curPageIdx&&(this._lastPageIdx=this._curPageIdx,ot.emitEvents(this.pageEvents,this,vl.PAGE_TURNING),this.node.emit(vl.PAGE_TURNING,this))},i._isQuicklyScrollable=function(t){if(this.direction===ml.Horizontal){if(Math.abs(t.x)>this.autoPageTurningThreshold)return!0}else if(this.direction===ml.Vertical&&Math.abs(t.y)>this.autoPageTurningThreshold)return!0;return!1},i._moveOffsetValue=function(t){var e=new F;if(this._sizeMode===Tl.Free)this.direction===ml.Horizontal?e.x=this._scrollCenterOffsetX[t]:this.direction===ml.Vertical&&(e.y=this._scrollCenterOffsetY[t]);else{var i=this.view;if(!i)return e;this.direction===ml.Horizontal?e.x=t*i.width:this.direction===ml.Vertical&&(e.y=t*i.height)}return e},i._getDragDirection=function(t){return this._direction===ml.Horizontal?0===t.x?0:t.x>0?1:-1:0===t.y?0:t.y<0?1:-1},i._isScrollable=function(t,e,i){if(this._sizeMode===Tl.Free){var o=0,n=0;if(this.direction===ml.Horizontal)return o=this._scrollCenterOffsetX[e],n=this._scrollCenterOffsetX[i],Math.abs(t.x)>=Math.abs(o-n)*this.scrollThreshold;if(this.direction===ml.Vertical)return o=this._scrollCenterOffsetY[e],n=this._scrollCenterOffsetY[i],Math.abs(t.y)>=Math.abs(o-n)*this.scrollThreshold}else{var r=this.view;if(!r)return!1;if(this.direction===ml.Horizontal)return Math.abs(t.x)>=r.width*this.scrollThreshold;if(this.direction===ml.Vertical)return Math.abs(t.y)>=r.height*this.scrollThreshold}return!1},i._autoScrollToPage=function(){if(this._startBounceBackIfNeeded()){var t=this._getHowMuchOutOfBoundary();this._clampDelta(t),(t.x>0||t.y<0)&&(this._curPageIdx=0===this._pages.length?0:this._pages.length-1),(t.x<0||t.y>0)&&(this._curPageIdx=0),this.indicator&&this.indicator._changedState()}else{var e=new F;F.subtract(e,this._touchBeganPosition,this._touchEndPosition);var i=this._curPageIdx,o=i+this._getDragDirection(e),n=this.pageTurningSpeed*Math.abs(i-o);if(o<this._pages.length){if(this._isScrollable(e,i,o))return void this.scrollToPage(o,n);var r=this._calculateTouchMoveVelocity();if(this._isQuicklyScrollable(r))return void this.scrollToPage(o,n)}this.scrollToPage(i,n)}},_(e,[{key:"sizeMode",get:function(){return this._sizeMode},set:function(t){this._sizeMode!==t&&(this._sizeMode=t,this._syncSizeMode())}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this._syncScrollDirection())}},{key:"scrollThreshold",get:function(){return this._scrollThreshold},set:function(t){this._scrollThreshold!==t&&(this._scrollThreshold=t)}},{key:"pageTurningEventTiming",get:function(){return this._pageTurningEventTiming},set:function(t){this._pageTurningEventTiming!==t&&(this._pageTurningEventTiming=t)}},{key:"indicator",get:function(){return this._indicator},set:function(t){this._indicator!==t&&(this._indicator=t,this.indicator&&this.indicator.setPageView(this))}},{key:"curPageIdx",get:function(){return this._curPageIdx}},{key:"verticalScrollBar",get:function(){return t.prototype.verticalScrollBar},set:function(t){this.verticalScrollBar=t}},{key:"horizontalScrollBar",get:function(){return t.prototype.horizontalScrollBar},set:function(t){this.horizontalScrollBar=t}}]),e}(ws),yl.SizeMode=Tl,yl.Direction=ml,yl.EventType=Ks(vl,Qr),p((nl=bl).prototype,"sizeMode",[Bh,Nh],Object.getOwnPropertyDescriptor(nl.prototype,"sizeMode"),nl.prototype),p(nl.prototype,"direction",[Hh,Mh],Object.getOwnPropertyDescriptor(nl.prototype,"direction"),nl.prototype),p(nl.prototype,"scrollThreshold",[G,kh,Vh],Object.getOwnPropertyDescriptor(nl.prototype,"scrollThreshold"),nl.prototype),p(nl.prototype,"pageTurningEventTiming",[G,Fh,jh],Object.getOwnPropertyDescriptor(nl.prototype,"pageTurningEventTiming"),nl.prototype),p(nl.prototype,"indicator",[Gh,Uh],Object.getOwnPropertyDescriptor(nl.prototype,"indicator"),nl.prototype),rl=p(nl.prototype,"autoPageTurningThreshold",[O,Wh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),p(nl.prototype,"verticalScrollBar",[Zh,Q,Yh],Object.getOwnPropertyDescriptor(nl.prototype,"verticalScrollBar"),nl.prototype),p(nl.prototype,"horizontalScrollBar",[Xh,Q,qh],Object.getOwnPropertyDescriptor(nl.prototype,"horizontalScrollBar"),nl.prototype),sl=p(nl.prototype,"horizontal",[Q,O,Kh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),al=p(nl.prototype,"vertical",[Q,O,Qh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),hl=p(nl.prototype,"cancelInnerEvents",[Q,O,Jh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ll=p(nl.prototype,"scrollEvents",[$h,O,Q,tl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),cl=p(nl.prototype,"pageTurningSpeed",[O,X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),ul=p(nl.prototype,"pageEvents",[el,O,il],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_l=p(nl.prototype,"_sizeMode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Tl.Unified}}),pl=p(nl.prototype,"_direction",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ml.Horizontal}}),dl=p(nl.prototype,"_scrollThreshold",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),gl=p(nl.prototype,"_pageTurningEventTiming",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),fl=p(nl.prototype,"_indicator",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ol=nl))||ol)||ol)||ol)||ol)),Ol=new c,Al=new F,wl=new F,Ll=new F(1,1),Dl=new F,Pl=new F;function zl(t,e){if(!e._hadAlignOnce){e.alignMode===th.ONCE&&(e._hadAlignOnce=!0);var i,o=e.target,n=wl,r=Ll;o?sh(t,i=o,n,r):i=t.parent;var s=rh(i),a=i instanceof _t||!i.getComponent(mt),h=a?Al:i.getComponent(mt).anchorPoint,l=a;t.getPosition(Ol);var u=t._uiProps.uiTransformComp,_=Ol.x,p=Ol.y,d=u.anchorPoint,g=t.getScale();if(e.alignFlags&eh.HORIZONTAL){var f=0,y=0,b=s.width;l?(f=lt.left.x,y=lt.right.x):y=(f=-h.x*b)+b,f+=e.isAbsoluteLeft?e.left:e.left*b,y-=e.isAbsoluteRight?e.right:e.right*b,o&&(f+=n.x,f*=r.x,y+=n.x,y*=r.x);var T=0,m=d.x,v=g.x;if(v<0&&(m=1-m,v=-v),e.isStretchWidth)T=y-f,0!==v&&(u.width=T/v),_=f+m*T;else if(T=u.width*v,e.isAlignHorizontalCenter){var C=e.isAbsoluteHorizontalCenter?e.horizontalCenter:e.horizontalCenter*b,S=(.5-h.x)*s.width;o&&(C*=r.x,S+=n.x,S*=r.x),_=S+(m-.5)*T+C}else _=e.isAlignLeft?f+m*T:y+(m-1)*T;e._lastSize.width=T}if(e.alignFlags&eh.VERTICAL){var E=0,O=0,A=s.height;l?(O=lt.bottom.y,E=lt.top.y):E=(O=-h.y*A)+A,O+=e.isAbsoluteBottom?e.bottom:e.bottom*A,E-=e.isAbsoluteTop?e.top:e.top*A,o&&(O+=n.y,O*=r.y,E+=n.y,E*=r.y);var w=0,L=d.y,D=g.y;if(D<0&&(L=1-L,D=-D),e.isStretchHeight)w=E-O,0!==D&&(u.height=w/D),p=O+L*w;else if(w=u.height*D,e.isAlignVerticalCenter){var P=e.isAbsoluteVerticalCenter?e.verticalCenter:e.verticalCenter*A,z=(.5-h.y)*s.height;o&&(P*=r.y,z+=n.y,z*=r.y),p=z+(L-.5)*w+P}else p=e.isAlignBottom?O+L*w:E+(L-1)*w;e._lastSize.height=w}t.setPosition(_,p,Ol.z),c.set(e._lastPos,_,p,Ol.z)}}function Il(t){var e=t.getComponent(Lh);if(e&&e.enabled){if(!L.isValid(t,!0))return;Vl.push(e)}for(var i,o=t.children,n=Z(o);!(i=n()).done;){var r=i.value;r.active&&Il(r)}}function Rl(){var t=nt.getScene();if(t){Fl.isAligning=!0,Fl._nodesOrderDirty&&(Vl.length=0,Il(t),Fl._nodesOrderDirty=!1);var e=null,i=Fl._activeWidgetsIterator;for(i.i=0;i.i<Vl.length;++i.i)(e=Vl[i.i])._dirty&&(zl(e.node,e),e._dirty=!1);Fl.isAligning=!1}}var xl,Bl,Nl,Hl,Ml,kl,Vl=[],Fl=t("widgetManager",L._widgetManager={isAligning:!1,_nodesOrderDirty:!1,_activeWidgetsIterator:new J.MutableForwardIterator(Vl),animationState:null,init:function(){nt.on(rt.EVENT_AFTER_UPDATE,Rl),ut.instance.on("design-resolution-changed",this.onResized,this);var t=this.onResized.bind(this);ut.instance.on("canvas-resize",t),z.onOrientationChange(t)},add:function(){this._nodesOrderDirty=!0},remove:function(t){this._activeWidgetsIterator.remove(t)},onResized:function(){var t=nt.getScene();t&&this.refreshWidgetOnResized(t)},refreshWidgetOnResized:function(t){var e=r.isNode(t)&&t.getComponent(Lh);e&&e.enabled&&(e.alignMode===th.ON_WINDOW_RESIZE||e.alignMode===th.ALWAYS)&&e.setDirty();for(var i,o=t.children,n=Z(o);!(i=n()).done;){var s=i.value;this.refreshWidgetOnResized(s)}},updateOffsetsToStayPut:function(t,e){function i(t,e){return Math.abs(t-e)>1e-10?e:t}var o=t.node,n=o.parent;if(n){var r=Dl;r.set(0,0);var s=Pl;if(s.set(1,1),t.target&&sh(o,n=t.target,r,s),!e)return;var a=n._uiProps&&n._uiProps.uiTransformComp,h=a?a.anchorPoint:Al,l=o._uiProps.uiTransformComp,c=rh(n),u=l.anchorPoint,_=o.getPosition(),p=eh,d=o.getScale(),g=0;if(e&p.LEFT){var f=-h.x*c.width;f+=r.x,f*=s.x,g=_.x-u.x*l.width*d.x-f,t.isAbsoluteLeft||(g/=c.width),g/=s.x,t.left=i(t.left,g)}if(e&p.RIGHT){var y=(1-h.x)*c.width;y+=r.x,g=(y*=s.x)-(_.x+(1-u.x)*l.width*d.x),t.isAbsoluteRight||(g/=c.width),g/=s.x,t.right=i(t.right,g)}if(e&p.TOP){var b=(1-h.y)*c.height;b+=r.y,g=(b*=s.y)-(_.y+(1-u.y)*l.height*d.y),t.isAbsoluteTop||(g/=c.height),g/=s.y,t.top=i(t.top,g)}if(e&p.BOT){var T=-h.y*c.height;T+=r.y,T*=s.y,g=_.y-u.y*l.height*d.y-T,t.isAbsoluteBottom||(g/=c.height),g/=s.y,t.bottom=i(t.bottom,g)}}},updateAlignment:function t(e){var i=e.parent;i&&r.isNode(i)&&t(i);var o=e.getComponent(Lh);o&&i&&zl(e,o)},AlignMode:th,AlignFlags:eh});nt.on(rt.EVENT_INIT,(function(){Fl.init()}));var jl,Gl,Ul,Wl,Zl,Yl,Xl,ql,Kl,Ql,Jl,$l,tc,ec,ic,oc,nc,rc,sc,ac,hc,lc=function(e){return t({SafeArea:e,SafeAreaComponent:e}),e}((xl=o("cc.SafeArea"),Bl=d(),Nl=g(110),Hl=f(),Ml=y(Lh),xl(kl=Bl(kl=Nl(kl=s(kl=Hl(kl=Ml(kl=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var i=e.prototype;return i.onLoad=function(){this._boundUpdateArea=this.updateArea.bind(this)},i.onEnable=function(){this.updateArea(),z.onViewResize(this._boundUpdateArea),z.onOrientationChange(this._boundUpdateArea)},i.onDisable=function(){z.offViewResize(this._boundUpdateArea),z.offOrientationChange(this._boundUpdateArea)},i.updateArea=function(){var t=this.node.getComponent(Lh),e=this.node.getComponent(mt);if(t&&e){t.updateAlignment();var i=this.node.position.clone(),o=e.anchorPoint.clone();t.isAlignTop=t.isAlignBottom=t.isAlignLeft=t.isAlignRight=!0;var n=L.winSize.width,r=L.winSize.height,s=P.getSafeAreaRect();t.top=r-s.y-s.height,t.bottom=s.y,t.left=s.x,t.right=n-s.x-s.width,t.updateAlignment();var a=this.node.position.clone(),h=o.x-(a.x-i.x)/e.width,l=o.y-(a.y-i.y)/e.height;e.setAnchorPoint(h,l),Fl.add(t)}},e}(E))||kl)||kl)||kl)||kl)||kl)||kl)),cc=function(e){return t({UICoordinateTracker:e,UICoordinateTrackerComponent:e}),e}((jl=o("cc.UICoordinateTracker"),Gl=d(),Ul=f(),Wl=g(110),Zl=n(r),Yl=T(),Xl=n(pt),ql=T(),Kl=T(),Ql=T(),Jl=n([ot]),$l=T(),jl(tc=Gl(tc=Ul(tc=Wl((ac=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"syncEvents",ic,S(e)),C(e,"_target",oc,S(e)),C(e,"_camera",nc,S(e)),C(e,"_useScale",rc,S(e)),C(e,"_distance",sc,S(e)),e._transformPos=new c,e._viewPos=new c,e._canMove=!0,e._lastWPos=new c,e._lastCameraPos=new c,e}a(e,t);var i=e.prototype;return i.onEnable=function(){this._checkCanMove()},i.update=function(){var t=this.node.worldPosition,e=this._camera;if(this._canMove&&e&&e.camera&&(!this._lastWPos.equals(t)||!this._lastCameraPos.equals(e.node.worldPosition))&&(this._lastWPos.set(t),this._lastCameraPos.set(e.node.worldPosition),e.camera.update(),e.convertToUINode(t,this._target,this._transformPos),this._useScale&&c.transformMat4(this._viewPos,this.node.worldPosition,e.camera.matView),this.syncEvents.length>0)){var i=this._distance/Math.abs(this._viewPos.z);ot.emitEvents(this.syncEvents,this._transformPos,i)}},i._checkCanMove=function(){this._canMove=!(!this._camera||!this._target)},_(e,[{key:"target",get:function(){return this._target},set:function(t){this._target!==t&&(this._target=t,this._checkCanMove())}},{key:"camera",get:function(){return this._camera},set:function(t){this._camera!==t&&(this._camera=t,this._checkCanMove())}},{key:"useScale",get:function(){return this._useScale},set:function(t){this._useScale!==t&&(this._useScale=t)}},{key:"distance",get:function(){return this._distance},set:function(t){this._distance!==t&&(this._distance=t)}}]),e}(E),p((ec=ac).prototype,"target",[Zl,Yl],Object.getOwnPropertyDescriptor(ec.prototype,"target"),ec.prototype),p(ec.prototype,"camera",[Xl,ql],Object.getOwnPropertyDescriptor(ec.prototype,"camera"),ec.prototype),p(ec.prototype,"useScale",[Kl],Object.getOwnPropertyDescriptor(ec.prototype,"useScale"),ec.prototype),p(ec.prototype,"distance",[Ql],Object.getOwnPropertyDescriptor(ec.prototype,"distance"),ec.prototype),ic=p(ec.prototype,"syncEvents",[Jl,O,$l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),oc=p(ec.prototype,"_target",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nc=p(ec.prototype,"_camera",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rc=p(ec.prototype,"_useScale",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),sc=p(ec.prototype,"_distance",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),tc=ec))||tc)||tc)||tc)||tc)),uc=[l.TOUCH_START,l.TOUCH_END,l.TOUCH_MOVE,l.MOUSE_DOWN,l.MOUSE_MOVE,l.MOUSE_UP,l.MOUSE_ENTER,l.MOUSE_LEAVE,l.MOUSE_WHEEL];function _c(t){t.propagationStopped=!0}var pc,dc,gc,fc,yc,bc,Tc,mc,vc,Cc,Sc,Ec,Oc,Ac=function(e){return t({BlockInputEvents:e,BlockInputEventsComponent:e}),e}(o("cc.BlockInputEvents")(hc=d()(hc=f()(hc=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var i=e.prototype;return i.onEnable=function(){for(var t=0;t<uc.length;t++)this.node.on(uc[t],_c,this)},i.onDisable=function(){for(var t=0;t<uc.length;t++)this.node.off(uc[t],_c,this)},e}(E))||hc)||hc)||hc),wc=t("SubContextView",(pc=o("cc.SubContextView"),dc=d(),gc=g(110),fc=y(mt),yc=f(),bc=T(),Tc=T(),pc(mc=dc(mc=gc(mc=fc(mc=yc((Ec=function(t){function e(){var e;return e=t.call(this)||this,C(e,"_fps",Cc,S(e)),e._sprite=void 0,e._imageAsset=void 0,e._updatedTime=0,e._updateInterval=0,e._openDataContext=void 0,e._content=void 0,C(e,"_designResolutionSize",Sc,S(e)),e._content=new r("content"),e._content.hideFlags|=tt.Flags.DontSave|tt.Flags.HideInHierarchy,e._sprite=null,e._imageAsset=new et,e._openDataContext=null,e._updatedTime=performance.now(),e}a(e,t);var i=e.prototype;return i.onLoad=function(){$.getOpenDataContext?(this._updateInterval=1e3/this._fps,this._openDataContext=$.getOpenDataContext(),this._initSharedCanvas(),this._initContentNode(),this._updateSubContextView(),this._updateContentLayer()):this.enabled=!1},i.onEnable=function(){this._registerNodeEvent()},i.onDisable=function(){this._unregisterNodeEvent()},i._initSharedCanvas=function(){if(this._openDataContext){var t=this._openDataContext.canvas;t.width=this._designResolutionSize.width,t.height=this._designResolutionSize.height}},i._initContentNode=function(){if(this._openDataContext){var t=this._openDataContext.canvas,e=this._imageAsset;if(e.reset(t),e._texture.create(t.width,t.height),this._sprite=this._content.getComponent(gt),this._sprite||(this._sprite=this._content.addComponent(gt)),this._sprite.spriteFrame)this._sprite.spriteFrame.texture=this._imageAsset._texture;else{var i=new dt;i.texture=this._imageAsset._texture,this._sprite.spriteFrame=i}this._content.parent=this.node}},i._updateSubContextView=function(){if(this._openDataContext&&$.getSystemInfoSync){var t=this.node.getComponent(mt),e=this._content.getComponent(mt),i=t.width/e.width,o=t.height/e.height,n=i>o?o:i;e.width*=n,e.height*=n;var r=$.getSystemInfoSync(),s=e.getBoundingBoxToWorld(),a=st.getVisibleSize(),h=r.screenWidth*(s.x/a.width),l=r.screenHeight*(s.y/a.height),c=r.screenWidth*(s.width/a.width),u=r.screenHeight*(s.height/a.height);this._openDataContext.postMessage({fromEngine:!0,type:"engine",event:"viewport",x:h,y:l,width:c,height:u})}},i._updateSubContextTexture=function(){var t=this._imageAsset;if(t&&this._openDataContext&&!(t.width<=0||t.height<=0)){var e=this._openDataContext.canvas;t.reset(e),(e.width>t.width||e.height>t.height)&&this._imageAsset._texture.create(e.width,e.height),this._imageAsset._texture.uploadData(e)}},i._registerNodeEvent=function(){this.node.on(r.EventType.TRANSFORM_CHANGED,this._updateSubContextView,this),this.node.on(r.EventType.SIZE_CHANGED,this._updateSubContextView,this),this.node.on(l.LAYER_CHANGED,this._updateContentLayer,this)},i._unregisterNodeEvent=function(){this.node.off(r.EventType.TRANSFORM_CHANGED,this._updateSubContextView,this),this.node.off(r.EventType.SIZE_CHANGED,this._updateSubContextView,this),this.node.off(l.LAYER_CHANGED,this._updateContentLayer,this)},i._updateContentLayer=function(){this._content.layer=this.node.layer},i.update=function(t){void 0===t?this._updateSubContextTexture():performance.now()-this._updatedTime>=this._updateInterval&&(this._updatedTime+=this._updateInterval,this._updateSubContextTexture())},_(e,[{key:"designResolutionSize",get:function(){return this._designResolutionSize},set:function(){}},{key:"fps",get:function(){return this._fps},set:function(t){this._fps!==t&&(this._fps=t,this._updateInterval=1e3/t)}}]),e}(E),p((vc=Ec).prototype,"designResolutionSize",[bc],Object.getOwnPropertyDescriptor(vc.prototype,"designResolutionSize"),vc.prototype),p(vc.prototype,"fps",[Tc],Object.getOwnPropertyDescriptor(vc.prototype,"fps"),vc.prototype),Cc=p(vc.prototype,"_fps",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),Sc=p(vc.prototype,"_designResolutionSize",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new M(640,960)}}),mc=vc))||mc)||mc)||mc)||mc)||mc));L.SubContextView=wc;var Lc=t("UIReorderComponent",o("cc.UIReorderComponent")(Oc=function(){K(1408,"UIReorderComponent")})||Oc);L.UIReorderComponent=Lc,L.ButtonComponent=Oe,it.setClassAlias(Oe,"cc.ButtonComponent"),L.EditBoxComponent=jo,it.setClassAlias(jo,"cc.EditBoxComponent"),L.LayoutComponent=vn,it.setClassAlias(vn,"cc.LayoutComponent"),L.ProgressBarComponent=Yn,it.setClassAlias(Yn,"cc.ProgressBarComponent"),L.ScrollViewComponent=ws,it.setClassAlias(ws,"cc.ScrollViewComponent"),L.ScrollBarComponent=qr,it.setClassAlias(qr,"cc.ScrollBarComponent"),L.SliderComponent=qs,it.setClassAlias(qs,"cc.SliderComponent"),L.ToggleComponent=ih,it.setClassAlias(ih,"cc.ToggleComponent"),L.ToggleContainerComponent=oh,it.setClassAlias(oh,"cc.ToggleContainerComponent"),L.WidgetComponent=Lh,it.setClassAlias(Lh,"cc.WidgetComponent"),L.PageViewComponent=El,it.setClassAlias(El,"cc.PageViewComponent"),L.PageViewIndicatorComponent=Cl,it.setClassAlias(Cl,"cc.PageViewIndicatorComponent"),L.SafeAreaComponent=lc,it.setClassAlias(lc,"cc.SafeAreaComponent"),it.setClassAlias(cc,"cc.UICoordinateTrackerComponent"),L.BlockInputEventsComponent=Ac,it.setClassAlias(Ac,"cc.BlockInputEventsComponent")}}}));
