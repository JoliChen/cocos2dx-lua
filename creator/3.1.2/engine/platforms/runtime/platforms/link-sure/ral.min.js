!function n(r,i,a){function u(t,e){if(!i[t]){if(!r[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(c)return c(t,!0);throw(o=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",o}o=i[t]={exports:{}},r[t][0].call(o.exports,function(e){return u(r[t][1][e]||e)},o,o.exports,n,r,i,a)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n={},r={setFeature:function(e,t,o){(n[e]||(n[e]={}))[t]=o},getFeatureProperty:function(e,t){e=n[e];return e?e[t]:void 0}};o.default=r},{}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(t){void 0===y&&(y=Object.assign({},t),Object.keys(t).forEach(function(e){"function"==typeof t[e]&&(t[e]=function(){return console.warn("AudioEngine."+e+" is deprecated"),y[e].apply(t,arguments)})}));return new T};function n(e,t,o){if(e=w.get(e),"function"!=typeof o||!e)return-1;for(var n=e[t]||[],r=0,i=n.length;r<i;++r)if(o===n[r])return n.splice(r,1),o.length+1;return 0}function r(e,t,o){if(e=w.get(e),"function"!=typeof o||!e)return-1;var n=e[t];if(n){for(var r=0,i=n.length;r<i;++r)if(o===n[r])return 0;n.push(o)}else n=e[t]=[o];return n.length}var i="canplayCallbacks",a="endedCallbacks",u="errorCallbacks",c="pauseCallbacks",f="playCallbacks",l="seekedCallbacks",s="seekingCallbacks",d="stopCallbacks",h="timeUpdateCallbacks",p="waitingCallbacks",g=10003,v=-1,m={ERROR:-1,INITIALIZING:0,PLAYING:1,PAUSED:2},y=void 0,w=new WeakMap,b=function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],n=w.get(e);if(n)for(var r=n[t]||[],i=0,a=r.length;i<a;++i)r[i].apply(e,o)};function T(){this.startTime=0,this.autoplay=!1,w.set(this,{src:"",volume:1,loop:!1}),Object.defineProperty(this,"loop",{set:function(e){e=!!e;var t,o=w.get(this);o&&("number"==typeof(t=o.audioID)&&0<=t&&y.setLoop(t,e),o.loop=e)},get:function(){var e=w.get(this);return!!e&&e.loop}}),Object.defineProperty(this,"volume",{set:function(e){"number"==typeof e?e<0?e=0:1<e&&(e=1):e=1;var t,o=w.get(this);o&&("number"==typeof(t=o.audioID)&&0<=t&&y.setVolume(t,e),o.volume=e)},get:function(){var e=w.get(this);return e?e.volume:1}}),Object.defineProperty(this,"src",{set:function(e){var t,o,n,r=w.get(this);r&&(t=r.src,"string"==typeof(r.src=e)&&("number"==typeof(o=r.audioID)&&0<=o&&y.getState(o)===m.PAUSED&&t!==e&&(y.stop(o),r.audioID=-1),n=this,y.preload(e,function(){setTimeout(function(){n.src===e&&(b(n,i),n.autoplay&&n.play())})})))},get:function(){var e=w.get(this);return e?e.src:""}}),Object.defineProperty(this,"duration",{get:function(){var e=w.get(this);if(e){e=e.audioID;if("number"==typeof e&&0<=e)return y.getDuration(e)}return NaN},set:function(){}}),Object.defineProperty(this,"currentTime",{get:function(){var e=w.get(this);if(e){e=e.audioID;if("number"==typeof e&&0<=e)return y.getCurrentTime(e)}return 0},set:function(){}}),Object.defineProperty(this,"paused",{get:function(){var e=w.get(this);if(e){e=e.audioID;if("number"==typeof e&&0<=e)return y.getState(e)===m.PAUSED}return!0},set:function(){}}),Object.defineProperty(this,"buffered",{get:function(){var e=w.get(this);if(e){e=e.audioID;if("number"==typeof e&&0<=e)return y.getBuffered(e)}return 0},set:function(){}})}o=T.prototype;o.destroy=function(){var e,t=w.get(this);t&&("number"==typeof(e=t.audioID)&&0<=e&&(y.stop(e),t.audioID=-1,b(this,d)),t[i]=[],t[a]=[],t[u]=[],t[c]=[],t[f]=[],t[l]=[],t[s]=[],t[d]=[],t[h]=[],t[p]=[],clearInterval(t.intervalID))},o.play=function(){var e=w.get(this);if(e){var t,o=e.src,n=e.audioID;if("string"==typeof o&&""!==o){if("number"==typeof n&&0<=n){if(y.getState(n)===m.PAUSED)return y.resume(n),void b(this,f);y.stop(n),e.audioID=-1}-1!==(n=y.play(o,this.loop,this.volume))?(e.audioID=n,"number"==typeof this.startTime&&0<this.startTime&&y.setCurrentTime(n,this.startTime),b(this,p),t=this,y.setCanPlayCallback(n,function(){o===t.src&&(b(t,i),b(t,f))}),y.setWaitingCallback(n,function(){o===t.src&&b(t,p)}),y.setErrorCallback(n,function(){o===t.src&&(e.audioID=-1,b(t,u))}),y.setFinishCallback(n,function(){o===t.src&&(e.audioID=-1,b(t,a))})):b(this,u,[{errMsg:"unknown",errCode:v}])}else b(this,u,[{errMsg:"invalid src",errCode:g}])}},o.pause=function(){var e=w.get(this);!e||"number"==typeof(e=e.audioID)&&0<=e&&(y.pause(e),b(this,c))},o.seek=function(e){var t=w.get(this);t&&"number"==typeof e&&0<=e&&("number"==typeof(t=t.audioID)&&0<=t&&(y.setCurrentTime(t,e),b(this,s),b(this,l)))},o.stop=function(){var e,t=w.get(this);!t||"number"==typeof(e=t.audioID)&&0<=e&&(y.stop(e),t.audioID=-1,b(this,d))},o.offCanplay=function(e){n(this,i,e)},o.offEnded=function(e){n(this,a,e)},o.offError=function(e){n(this,u,e)},o.offPause=function(e){n(this,c,e)},o.offPlay=function(e){n(this,f,e)},o.offSeeked=function(e){n(this,l,e)},o.offSeeking=function(e){n(this,s,e)},o.offStop=function(e){n(this,d,e)},o.offTimeUpdate=function(e){1===n(this,h,e)&&clearInterval(w.get(this).intervalID)},o.offWaiting=function(e){n(this,p,e)},o.onCanplay=function(e){r(this,i,e)},o.onEnded=function(e){r(this,a,e)},o.onError=function(e){r(this,u,e)},o.onPause=function(e){r(this,c,e)},o.onPlay=function(e){r(this,f,e)},o.onSeeked=function(e){r(this,l,e)},o.onSeeking=function(e){r(this,"seekingCallbacks",e)},o.onStop=function(e){r(this,d,e)},o.onTimeUpdate=function(e){var t,o;1===r(this,h,e)&&(e=w.get(this),t=this,o=setInterval(function(){var e=w.get(t);e?"number"==typeof(e=e.audioID)&&0<=e&&y.getState(e)===m.PLAYING&&b(t,h):clearInterval(o)},500),e.intervalID=o)},o.onWaiting=function(e){r(this,p,e)}},{}],3:[function(e,t,o){"use strict";var n,r=(n=e("../../util"))&&n.__esModule?n:{default:n};r.default.exportTo("onShow",wuji,ral),r.default.exportTo("onHide",wuji,ral),r.default.exportTo("offShow",wuji,ral),r.default.exportTo("offHide",wuji,ral)},{"../../util":21}],4:[function(e,t,o){"use strict";var n;((n=e("../../util"))&&n.__esModule?n:{default:n}).default.exportTo("loadSubpackage",wuji,ral)},{"../../util":21}],5:[function(e,t,o){"use strict";var n,r=(n=e("../../util"))&&n.__esModule?n:{default:n};function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.default.exportTo("env",wuji,ral),r.default.exportTo("getSystemInfo",wuji,ral),r.default.exportTo("getSystemInfoSync",wuji,ral);var c=ral.getSystemInfoSync.bind(wuji);ral.getSystemInfoSync=function(){var e=c.apply(void 0,arguments);return e.language||(e.language="zh"),e};var f=ral.getSystemInfo.bind(wuji);ral.getSystemInfo=function(e){var t,o=Array.prototype.slice.call(arguments,1),n=e;return"object"===u(n)&&"function"===n.success&&(n=Object.assign({},n),t=e.success.bind(e),n.success=function(e){e&&!e.language&&(e.language="zh"),t.apply(void 0,arguments)}),f.apply(void 0,[n].concat(i(o)))}},{"../../util":21}],6:[function(e,t,o){"use strict";function f(e){for(var t,o=0;o<s.length;o++)if(t=s[o],e.identifier===t.identifier)return o;return-1}function l(e,t){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])}var n=(n=window.jsb)||{},s=[],d={touchstart:[],touchmove:[],touchend:[],touchcancel:[]};function r(e,t){for(var o=d[e]||[],n=o.length,r=0;r<n;++r)if(t===o[r])return void o.splice(r,1)}var h=!1,i=wuji.getSystemInfoSync();window.innerWidth&&i.windowWidth!==window.innerWidth&&(h=!0);i=function(c){return function(e){if("function"!=typeof e){var t,o=new TouchEvent(c);"touchstart"===c?e.forEach(function(e){0<=(t=f(e))?l(e,s[t]):(l(e,e={}),s.push(e))}):"touchmove"===c?e.forEach(function(e){0<=(t=f(e))&&l(e,s[t])}):"touchend"!==c&&"touchcancel"!==c||e.forEach(function(e){0<=(t=f(e))&&s.splice(t,1)});var r=[].concat(s),i=[];e.forEach(function(e){for(var t=r.length,o=0;o<t;++o){var n=r[o];if(e.identifier===n.identifier)return void i.push(n)}i.push(e)}),o.touches=r,o.targetTouches=r,o.changedTouches=i,h&&(r.forEach(function(e){e.clientX/=window.devicePixelRatio,e.clientY/=window.devicePixelRatio,e.pageX/=window.devicePixelRatio,e.pageY/=window.devicePixelRatio}),"touchcancel"!==c&&"touchend"!==c||i.forEach(function(e){e.clientX/=window.devicePixelRatio,e.clientY/=window.devicePixelRatio,e.pageX/=window.devicePixelRatio,e.pageY/=window.devicePixelRatio}));for(var n=d[c],a=n.length,u=0;u<a;u++)n[u](o)}else!function(e){for(var t=d[c],o=0,n=t.length;o<n;o++)if(e===t[o])return;t.push(e)}(e)}};wuji.onTouchStart?(ral.onTouchStart=wuji.onTouchStart,ral.offTouchStart=wuji.offTouchStart):(n.onTouchStart=i("touchstart"),n.offTouchStart=function(e){r("touchstart",e)},ral.onTouchStart=n.onTouchStart.bind(n),ral.offTouchStart=n.offTouchStart.bind(n)),wuji.onTouchMove?(ral.onTouchMove=wuji.onTouchMove,ral.offTouchMove=wuji.offTouchMove):(n.onTouchMove=i("touchmove"),n.offTouchMove=function(e){r("touchmove",e)},ral.onTouchMove=n.onTouchMove.bind(n),ral.offTouchMove=n.offTouchMove.bind(n)),wuji.onTouchCancel?(ral.onTouchCancel=wuji.onTouchCancel,ral.offTouchCancel=wuji.offTouchCancel):(n.onTouchCancel=i("touchcancel"),n.offTouchCancel=function(e){r("touchcancel",e)},ral.onTouchCancel=n.onTouchCancel.bind(n),ral.offTouchCancel=n.offTouchCancel.bind(n)),wuji.onTouchEnd?(ral.onTouchEnd=wuji.onTouchEnd,ral.offTouchEnd=wuji.offTouchEnd):(n.onTouchEnd=i("touchend"),n.offTouchEnd=function(e){r("touchend",e)},ral.onTouchEnd=n.onTouchEnd.bind(n),ral.offTouchEnd=n.offTouchEnd.bind(n))},{}],7:[function(e,t,o){"use strict";var n;(n=e("../../util"))&&n.__esModule;var r,i,a=[];ral.device=ral.device||{},wuji.offAccelerometerChange?(ral.onAccelerometerChange=wuji.onAccelerometerChange.bind(wuji),ral.offAccelerometerChange=wuji.offAccelerometerChange.bind(wuji),ral.stopAccelerometer=wuji.stopAccelerometer.bind(wuji),r=wuji.startAccelerometer.bind(wuji),ral.startAccelerometer=function(e){return r(Object.assign({type:"accelerationIncludingGravity"},e))}):(ral.onAccelerometerChange=function(e){if("function"==typeof e){for(var t=a.length,o=0;o<t;++o)if(e===a[o])return;a.push(e)}},ral.offAccelerometerChange=function(e){for(var t=a.length,o=0;o<t;++o)if(e===a[o])return void a.splice(o,1)},i="android"===wuji.getSystemInfoSync().platform.toLowerCase(),jsb.device.dispatchDeviceMotionEvent=function(e){var t=Object.assign({},e._accelerationIncludingGravity);i?(t.x/=-10,t.y/=-10,t.z/=-10):(t.x/=10,t.y/=10,t.z/=10),a.forEach(function(e){e({x:t.x,y:t.y,z:t.z})})},ral.stopAccelerometer=function(){jsb.device.setMotionEnabled(!1)},ral.startAccelerometer=function(){jsb.device.setMotionEnabled(!0)})},{"../../util":21}],8:[function(e,t,o){"use strict";var n,r=(n=e("../../util"))&&n.__esModule?n:{default:n};r.default.exportTo("getBatteryInfo",wuji,ral),r.default.exportTo("getBatteryInfoSync",wuji,ral)},{"../../util":21}],9:[function(e,t,o){"use strict";var n;((n=e("../../util"))&&n.__esModule?n:{default:n}).default.exportTo("getFileSystemManager",wuji,ral)},{"../../util":21}],10:[function(e,t,o){"use strict";var n=i(e("../util")),r=i(e("../feature"));function i(e){return e&&e.__esModule?e:{default:e}}window.jsb?window.ral=Object.assign({},window.jsb):window.ral={},e("./base/lifecycle"),e("./base/subpackage"),e("./base/system-info"),e("./base/touch-event"),e("./device/accelerometer"),e("./device/battery"),e("./file/file-system-manager"),e("./interface/keyboard"),e("./interface/window"),e("./media/audio"),e("./media/video"),e("./network/download"),e("./rendering/canvas"),e("./rendering/webgl"),e("./rendering/font"),e("./rendering/frame"),e("./rendering/image"),n.default.exportTo("getFeatureProperty",r.default,ral)},{"../feature":1,"../util":21,"./base/lifecycle":3,"./base/subpackage":4,"./base/system-info":5,"./base/touch-event":6,"./device/accelerometer":7,"./device/battery":8,"./file/file-system-manager":9,"./interface/keyboard":11,"./interface/window":12,"./media/audio":13,"./media/video":14,"./network/download":15,"./rendering/canvas":16,"./rendering/font":17,"./rendering/frame":18,"./rendering/image":19,"./rendering/webgl":20}],11:[function(e,t,o){"use strict";var n,r=(n=e("../../util"))&&n.__esModule?n:{default:n};r.default.exportTo("onKeyboardInput",wuji,ral),r.default.exportTo("onKeyboardConfirm",wuji,ral),r.default.exportTo("onKeyboardComplete",wuji,ral),r.default.exportTo("offKeyboardInput",wuji,ral),r.default.exportTo("offKeyboardConfirm",wuji,ral),r.default.exportTo("offKeyboardComplete",wuji,ral),r.default.exportTo("hideKeyboard",wuji,ral),r.default.exportTo("showKeyboard",wuji,ral),r.default.exportTo("updateKeyboard",wuji,ral)},{"../../util":21}],12:[function(e,t,o){"use strict";var n=wuji.onWindowResize,r=wuji.getSystemInfoSync();ral.onWindowResize=function(t){n(function(e){t(e.width||e.windowWidth/r.devicePixelRatio,e.height||e.windowHeight/r.devicePixelRatio)})}},{}],13:[function(e,t,o){"use strict";var n=r(e("../../inner-context")),e=r(e("../../util"));function r(e){return e&&e.__esModule?e:{default:e}}e.default.exportTo("AudioEngine",wuji,ral),e.default.exportTo("createInnerAudioContext",wuji,ral,function(){wuji.AudioEngine&&(ral.createInnerAudioContext=function(){return(0,n.default)(wuji.AudioEngine)})})},{"../../inner-context":2,"../../util":21}],14:[function(e,t,o){"use strict";var n;((n=e("../../util"))&&n.__esModule?n:{default:n}).default.exportTo("createVideo",wuji,ral)},{"../../util":21}],15:[function(e,t,o){"use strict";var n;((n=e("../../util"))&&n.__esModule?n:{default:n}).default.exportTo("downloadFile",wuji,ral)},{"../../util":21}],16:[function(e,t,o){"use strict";var n=i(e("../../util")),r=i(e("../../feature"));function i(e){return e&&e.__esModule?e:{default:e}}n.default.exportTo("createCanvas",wuji,ral,function(){var e="unsupported";document&&"function"==typeof document.createElement&&(e="wrapper",ral.createCanvas=function(){return document.createElement("canvas")}),r.default.setFeature("ral.createCanvas","spec",e)})},{"../../feature":1,"../../util":21}],17:[function(e,t,o){"use strict";var n;((n=e("../../util"))&&n.__esModule?n:{default:n}).default.exportTo("loadFont",wuji,ral)},{"../../util":21}],18:[function(e,t,o){"use strict";window.jsb&&jsb.setPreferredFramesPerSecond?ral.setPreferredFramesPerSecond=jsb.setPreferredFramesPerSecond.bind(jsb):wuji.setPreferredFramesPerSecond?ral.setPreferredFramesPerSecond=wuji.setPreferredFramesPerSecond.bind(wuji):ral.setPreferredFramesPerSecond=function(){console.error("The setPreferredFramesPerSecond is not define!")}},{}],19:[function(e,t,o){"use strict";var n=i(e("../../util")),r=i(e("../../feature"));function i(e){return e&&e.__esModule?e:{default:e}}n.default.exportTo("loadImageData",wuji,ral),n.default.exportTo("createImage",wuji,ral,function(){var e="unsupported";document&&"function"==typeof document.createElement&&(e="wrapper",ral.createImage=function(){return document.createElement("image")}),r.default.setFeature("ral.createImage","spec",e)})},{"../../feature":1,"../../util":21}],20:[function(e,t,o){"use strict";var d,h,p;window.__gl&&(d=window.__gl,h=d.texImage2D,d.texImage2D=function(e,t,o,n,r,i,a,u,c){var f,l,s=arguments.length;6===s?(u=r,a=n,(f=i)instanceof HTMLImageElement?(l=console.error,console.error=function(){},h.apply(void 0,arguments),console.error=l,d.texImage2D_image(e,t,f._imageMeta)):f instanceof HTMLCanvasElement?(l=console.error,console.error=function(){},h.apply(void 0,arguments),console.error=l,l=f.getContext("2d"),d.texImage2D_canvas(e,t,o,a,u,l)):f instanceof ImageData?h(e,t,o,f.width,f.height,0,a,u,f.data):console.error("Invalid pixel argument passed to gl.texImage2D!")):9===s?h(e,t,o,n,r,i,a,u,c):console.error("gl.texImage2D: invalid argument count!")},p=d.texSubImage2D,d.texSubImage2D=function(e,t,o,n,r,i,a,u,c){var f,l,s=arguments.length;7===s?(f=a,u=i,a=r,f instanceof HTMLImageElement?(l=console.error,console.error=function(){},p.apply(void 0,arguments),console.error=l,d.texSubImage2D_image(e,t,o,n,f._imageMeta)):f instanceof HTMLCanvasElement?(l=console.error,console.error=function(){},p.apply(void 0,arguments),console.error=l,l=f.getContext("2d"),d.texSubImage2D_canvas(e,t,o,n,a,u,l)):f instanceof ImageData?p(e,t,o,n,f.width,f.height,a,u,f.data):console.error("Invalid pixel argument passed to gl.texImage2D!")):9===s?p(e,t,o,n,r,i,a,u,c):console.error(new Error("gl.texImage2D: invalid argument count!").stack)})},{}],21:[function(e,t,o){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n={exportTo:function(e,t,o,n){var r;"object"===i(t)&&"object"===i(o)?void 0!==(r=t[e])?"function"==typeof r?(o[e]=r.bind(t),Object.assign(o[e],r)):o[e]=r:(o[e]=function(){return console.error(e+" is not support!"),{}},"function"==typeof n&&n()):console.warn("invalid exportTo: ",e)}};o.default=n},{}]},{},[10]);